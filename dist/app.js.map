{"version":3,"sources":["lib.js","EntityInterface.js","Class.OneEntity.js","Class.EntitiesCollection.js","activity/Class.OneActivity.js","activity/Class.ActivitiesCollection.js","category/Class.OneCategory.js","category/Class.CategoriesCollection.js","date/Class.OneDate.js","date/Class.DatesCollection.js","event/Class.OneEvent.js","event/Class.EventsCollection.js","event/Class.ActualEventsCollection.js","event/Class.CanceledEventsCollection.js","event/Class.DayEventsCollection.js","event/Class.DelayedEventsCollection.js","event/Class.FavoredEventsCollection.js","event/Class.FriendsEventsCollection.js","event/Class.FutureEventsCollection.js","event/Class.PastEventsCollection.js","event/Class.RecommendedEventsCollection.js","event/Class.TimelineEventsCollection.js","organization/Class.OneOrganization.js","organization/Class.OrganizationsCollection.js","search/Class.SearchResults.js","statistics/Class.Statistics.js","statistics/Class.EventStatistics.js","statistics/Class.OrganizationsStatistics.js","tag/Class.OneTag.js","tag/Class.TagsCollection.js","user/Class.OneUser.js","user/Class.CurrentUser.js","user/Class.UsersCollection.js","Class.Calendar.js","Class.DatePicker.js","action_button/Class.ActionButton.js","action_button/Class.AddToFavoriteButton.js","action_button/Class.SubscribeButton.js","Class.Modal.js","Class.AbstractUsersModal.js","Class.CropperModal.js","Class.EditorsModal.js","Class.FavoredModal.js","Class.MapModal.js","Class.MediaModal.js","Class.SubscribersModal.js","Class.Page.js","events/feed/Class.FeedPage.js","events/feed/Class.ActualEventsPage.js","events/feed/Class.DayEventsPage.js","events/feed/Class.FavoredEventsPage.js","events/feed/Class.FriendsEventsPage.js","events/feed/Class.RecommendedEventsPage.js","events/feed/Class.TimelineEventsPage.js","statistics/Class.StatisticsPage.js","statistics/organization/Class.StatisticsOrganizationPage.js","statistics/organization/Class.StatisticsOrganizationAuditoryPage.js","statistics/organization/Class.StatisticsOrganizationEventsPage.js","statistics/organization/Class.StatisticsOrganizationOverviewPage.js","statistics/organization/Class.StatisticsOrganizationPromotionPage.js","statistics/organization/Class.StatisticsOrganizationSettingsPage.js","statistics/organization/Class.StatisticsOrganizationSupportPage.js","statistics/event/Class.StatisticsEventPage.js","statistics/event/Class.StatisticsEventAuditoryPage.js","statistics/event/Class.StatisticsEventEditPage.js","statistics/event/Class.StatisticsEventOverviewPage.js","statistics/event/Class.StatisticsEventPromotionPage.js","events/Class.RedactEventPage.js","events/Class.AddEventPage.js","events/Class.OneEventPage.js","onboarding/Class.OnboardingPage.js","friends/Class.FriendsPage.js","friends/Class.OneFriendPage.js","organizations/Class.EditOrganizationPage.js","organizations/Class.AddOrganizationPage.js","organizations/Class.CatalogPage.js","organizations/Class.OrganizationPage.js","search/Class.SearchPage.js","statistics/Class.StatisticsOverviewPage.js","node_connection.js","application.js","init.js"],"names":["tmpl","template_type","items","addTo","direction","htmlEntities","str","String","replace","replaceTags","html","object","jQuery_pairs","keys","$","each","key","value","type","jQuery","length","format","map","i","el","$el","id","toArray","find","append","get","unwrap","result","html_val","trim","undefined","console","group","log","groupEnd","Array","isArray","makeSet","item","prepend","storeStat","entity_id","entity_type","event_type","window","__stats","push","getUnitsText","num","cases","Math","abs","word","toString","indexOf","GEN","NOM","PLU","formatDates","dates","is_same_time","formatString","formatting","days","time","month","year","output","genitive_month_names","format_options","d","D","t","T","M","MM","MMM","__LOCALES","ru_RU","DATE","MONTH_SHORT_NAMES","toLocaleLowerCase","MMMM","MONTH_NAMES","MMMMs","Y","YY","substr","YYYY","capitalize","elem","$elem","clone","text","innerText","add","cur_moment","prev_moment","cur_year","cur_month","cur_time","prev_time","is_with_time","cur_range_of_days","last_index","dates_obj","date","contains","this","end_time","displayTimeRange","start_time","forEach","moment","unix","event_date","diff","join","months","formatted_days","range","day","formatted_day","trimSeconds","split","splice","displayDateRange","first_date","last_date","m_first","m_last","m_today","isSame","bindLimitInputSize","$parent","not","e","$this","$form_unit","closest","max","data","$prompt","siblings","val","after","addClass","on","is","crlfs","match","hasClass","removeClass","initSelect2","$element","options","opt","containerCssClass","dropdownCssClass","select2","extend","initTimeInput","time_field","onBlur","parseInt","$time_field","$hours","eq","$minutes","inputmask","regex","focus","trigger","trimAvatarsCollection","$collection","$avatars","amount","width","outerWidth","bindDatePickers","DatePicker","init","bindTimeInput","bindTabs","$wrapper","$tabs","$bodies","filter","__C","CLASSES","NEW_ACTIVE","index","height","bindShareButtons","open","bindSelect2","bindRippleEffect","$ripple","size","x","y","children","outerHeight","css","pageX","offset","left","pageY","top","one","bindDropdown","$button","$dropbox","dropdown","closeDropbox","off","document","hasOwnProperty","ddWidth","isFinite","search","button_pos","position","xPos","ddPosX","parent","yPos","ddPosY","target","keyCode","bindAddAvatar","$favored_count","current_count","toggleClass","bindFileLoadButton","click","bindCollapsing","toggleCollapsing","default_height","$content","bindPageLinks","DISABLED","which","preventDefault","__APP","changeState","attr","unbindPageLinks","handleErrorField","$unit","$input","toggleStatus","toDataUrl","url","callback","xhr","XMLHttpRequest","responseType","onload","reader","FileReader","onloadend","readAsDataURL","response","send","showNotifier","notify","message","pos","status","showSettingsModal","$modal","remove","ajax","success","res","appendTo","prop","show_to_friends","notify_in_browser","Notify","needsPermission","requestPermission","modal","_data","Pace","ignore","getFriendsList","$friends_right_list","cb","HIDDEN","empty","innerHeight","slimscroll","EntityInterface","OneEntity","EntitiesCollection","OneActivity","stat_type_id","event_id","event","OneEvent","organization_id","organization","OneOrganization","user_id","user","OneUser","entity","type_code","created_at","ActivitiesCollection","OneCategory","category_id","is_loading_continuous","name","order_position","organizations","OrganizationsCollection","loading","fetchCategory","CategoriesCollection","OneDate","events_count","favored_count","DatesCollection","title","description","location","detail_info_url","can_edit","registration_required","registration_till","organization_short_name","image_vertical_url","image_horizontal_url","image_horizontal_large_url","organization_logo_small_url","is_free","min_price","first_event_date","last_event_date","nearest_event_date","tags","TagsCollection","notifications","favored","UsersCollection","favored_users_count","is_favorite","canceled","fetchEvent","EventsCollection","ActualEventsCollection","CanceledEventsCollection","DayEventsCollection","Error","DelayedEventsCollection","FavoredEventsCollection","FriendsEventsCollection","FutureEventsCollection","PastEventsCollection","RecommendedEventsCollection","TimelineEventsCollection","short_name","img_url","img_small_url","background_img_url","background_medium_img_url","type_id","type_name","site_url","default_address","is_subscribed","subscribed_count","subscribed","privileges","role","staff","fetchOrganization","SearchResults","query_string","events","Statistics","view","fave","unfave","notifications_sent","dynamics","EventStatistics","apply","open_site","view_detail","open_conversion","fave_conversion","OrganizationsStatistics","subscribe","unsubscribe","conversion","audience","OneTag","tag_id","fetchTag","first_name","last_name","middle_name","gender","avatar_url","is_friend","is_editor","blurred_image_url","link","subscriptions","accounts","fetchUser","CurrentUser","instance","Calendar","$calendar","classes","wrapper_class","header_class","prev_btn_class","next_btn_class","month_name_class","table_class","thead_class","tbody_class","tr_class","head_tr_class","th_class","td_class","td_additional_classes","td_disabled_class","table_cell_class","today_class","additional_dataset","selection_type","SELECTION_TYPES","SINGLE","weekday_selection","month_selection","disable_selection","min_date","max_date","locale","labels","Element","MULTI","selected_days","selected_weeks","selected_months","last_action","last_selected_days","now_selected_day","prev_selected_day","current_month","Date","_today","TypeError","$datepicker","close_on_pick","$datepicker_modal","calendar","selected_day","formated_selected_day","reverse","ActionButton","self","subscribed_state","states","state","icons","colors","fn","call","BUILD","button","concat","initiate","AddToFavoriteButton","TEXTS","BUTTON","ADD_FAVORITE","REMOVE_FAVORITE","FAVORED","SubscribeButton","ADD_SUBSCRIPTION","REMOVE_SUBSCRIPTION","SUBSCRIBED","Modal","content","modal_title","modal_content","modal_footer","footer_buttons","pushModal","AbstractUsersModal","entities_length","disable_upload","users","is_first","modal_type","constructor","modal_content_classes","CropperModal","image_src","cropper_options","cropper","crop_button","destroy_crop_button","viewMode","zoomable","zoomOnWheel","EditorsModal","specific_role","ajax_data","order_by","roles","FavoredModal","fields","MapModal","MediaModal","src","modal_wrapper","SubscribersModal","Page","state_name","page_title","$view","wrapper_tmpl","is_loading","can_render","with_header_tabs","FeedPage","next_events_length","ActualEventsPage","DayEventsPage","FavoredEventsPage","FriendsEventsPage","RecommendedEventsPage","TimelineEventsPage","StatisticsPage","SCALES","MINUTE","HOUR","DAY","WEEK","MONTH","YEAR","OVERALL","highchart_defaults","chart","backgroundColor","plotBorderWidth","plotShadow","style","fontFamily","fontSize","credits","enabled","StatisticsOrganizationPage","org_id","StatisticsOrganizationAuditoryPage","arguments","StatisticsOrganizationEventsPage","StatisticsOrganizationOverviewPage","graphics_stats","other_stats","appendAjaxData","future","is_canceled","is_delayed","triggerRender","StatisticsOrganizationPromotionPage","StatisticsOrganizationSettingsPage","StatisticsOrganizationSupportPage","StatisticsEventPage","StatisticsEventAuditoryPage","StatisticsEventEditPage","StatisticsEventOverviewPage","scoreboards_stats","StatisticsEventPromotionPage","RedactEventPage","AddEventPage","OneEventPage","OnboardingPage","block_scroll","FriendsPage","OneFriendPage","friend_id","EditOrganizationPage","categories","AddOrganizationPage","CatalogPage","categories_ajax_data","organizations_ajax_data","default_title","selected_category_id","all_organizations","fetchCategoriesWithOrganizations","reduce","collection","cat","setData","sort","a","b","OrganizationPage","event_type_default","events_fields","event_types","scroll_event","sort_date_type","past","delayed","events_load","future_events","past_events","delayed_events","canceled_events","is_admin","ROLE","USER","max_events_load","SearchPage","$search_bar_input","search_string","decodeURIComponent","events_ajax_data","filters","search_results","fetchEventsAndOrganizations","StatisticsOverviewPage","my_organizations_fields","my_organizations","fetchMyOrganizations","Function","prototype","Object","create","__super","__superCall","method_name","slice","error","charAt","toUpperCase","it","m","n","toCamelCase","delimiter","part","toUnderscore","toLowerCase","$1","JSON","stringify","props","obj","methods","values","vals","propertyIsEnumerable","toHtmlDataSet","dataset","toHtmlAttributes","attributes","newFrom","original","additional_values","arg","new_array","merge","toSpaceSeparatedString","clean","delete_value","roundTo","decimals","pow","round","handleStep","tween","extractNumberParts","separated_number","group_length","current_number_part","current_index","q","numbers","number_parts","l","ceil","removePrecendingZeros","last","floored_number","defaults","separator","suffix","prefix","nodeType","parentNode","floor","now","Tween","propHooks","number","set","fx","step","statuses","$form_elements","removeAttr","serializeForm","output_type","zb","yb","xb","elements","makeArray","test","nodeName","checked","c","std","data_names","animateNumber","args","animate","array","containers","messages","Message","show","closeAll","instantly","close","uuid","getTime","random","element","currentstatus","timout","marginbottom","opacity","margin-top","margin-bottom","timeout","closefn","setTimeout","hover","clearTimeout","finalize","hide","container","socket","io","connect","protocol","secure","yaCounter32442130","reachGoal","mobile","href","token","email","localStorage","getItem","subscriptions_count","isSupported","emit","notification_id","myNotification","note","payload","body","icon","tag","notifyClick","origin","click_time","DATE_FORMAT","handleImgUpload","current_load_button","filename","$groups","CURRENT_PAGE","option","gid","display_name","photo","field","collection_of","getByID","has","fetchUserActions","SERVER","getData","fetchFriendsActions","fetchCategories","orgs_ajax_data","org_field","validateData","fetchDates","STATUS","CANCEL","BRING_BACK","HIDE","SHOW","createEvent","new_event_data","addData","updateEvent","updateData","changeEventStatus","hidden","addFavored","deleteFavored","deleteData","addEventNotification","notification_type","deleteEventNotification","notification_uuid","response_data","addNotification","deleteNotification","KIND","MY","RECOMMENDED","fetchEvents","fetchMyEvents","fetchFavoredEvents","fetchRecommendedEvents","fetchOrganizationsEvents","kind","fetchFeed","fetchOrganizationsFeed","till","createOrganization","new_organization_data","updateOrganization","organization_data","subscribeOrganization","unsubscribeOrganization","recognizeRole","fetchSubscribedOrganizations","fetchRecommendations","sanitizeQueryVar","fetchOrganizations","ENTITIES","EVENT","ORGANIZATION","fetchStatistics","scale","statistics_fields","dynamics_ajax_data","getOwnPropertyNames","since","fetchTags","ACCOUNTS","VK","FACEBOOK","GOOGLE","MODERATOR","ADMIN","defineProperty","enumerable","privilege","role_id","fetchUserWithSubscriptions","subscriptions_ajax_data","subscriptions_fields","logout","AJAX","AJAX_METHOD","GET","subscribeToOrganization","warn","unsubscribeFromOrganization","getSpecificStaff","additional_fields","specific_staff","man","fetchUsers","fetchFriends","fetchEventFavorites","fetchOrganizationSubscribers","fetchOrganizationStaff","setMonth","renderTable","destroyTable","setMonthName","buildTable","this_day","this_moment","$calendar_table","days_count","daysInMonth","first_day_in_month","last_day_in_month","td_days","td_classes","day_number","date_text","curr_month_clone","unshift","$tbody","tds_in_tr","trs_count","$trs","activateSelectedDays","bindDragSelection","bindDaySelection","bindWeekdaySelection","bindMonthSelection","selectToday","formatDays","январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь","_date","month_num","days_in_month","_day","month_name","selectDays","select","removing_days","deselectDays","deselect","this_weekday_pos","$this_day","$this_weekday","$this_month_name","this_year","this_month_num","this_month","selectWeek","week","$this_weekday_days","selectMonth","$this_month_days","this_month_pos","bindMonthArrows","$days_in_month","$active_days","$weekdays","selectDate","$target","disableDragSelection","weekday","setDaysWithEvents","startOf","endOf","my","unique","NEW_DISABLED","$tr","classList","page","favorites_count","bindOpener","openDialog","destroy","bindCloseDialog","checkOnClick","checkOnKeyDown","pushStack","elems","ret","prevObject","context","bindHoverEffects","bindClick","afterSubscribe","afterUnsubscribe","askToSubscribe","last_id","modals","active_modal","modal_destroyer","bindCallModal","modal_id","aspectRatio","eval","initer","appear","NEW_HIDDEN","adjustDestroyer","disappear","html_height","modal_height","scrollTop","uploadUsers","buildUsers","$users","last_is_fiends","label","userTombstones","tombstone_classes","is_link","afterUpload","$new_users","crop","toDataURL","last_role","admin","moderator","$media","real_w","real_h","$window","window_max_w","onLoad","wrap","add_to","^([0-9]+)","","edit","feed","actual","timeline","recommendations","friends","^([0-9]{4}-[0-9]{2}-[0-9]{2})","onboarding","^([^/]+)","friend","statistics","routeNewPage","path","PageClass","path_split","pages_child","PAGES","RegExp","bind","PAGE","$main_header","is_other_page","PREVIOUS_PAGE","wrapper_field","$prev","changeTitle","CURRENT_JQXHR","abort","render","bindFeedEvents","$event","parents","$remove_button","addNoEventsBlock","$no_events_block","appendEvents","$events","feedEventCards","initFeedCalendar","selected_date","MainCalendar","td_disabled","renderHeaderTabs","pathname","areaChartSeriesNormalize","raw_data","dataNormalize","value_field_name","STD_NAMES","line","time_value","valueOf","CONVERSATIONS","with","to","COMPARISONS","subscribe_unsubscribe","HIDDEN_SERIES_OPTIONS","showInLegend","lineWidth","fillOpacity","tooltip","valueSuffix","field_key","buildAreaCharts","additional_options","normalized_series","FIELDS","FILL_COLORS","area_chart_options","plotBackgroundColor","plotBorderColor","COLORS","FRANKLIN","MUTED_80","ACCENT","MUTED","MUTED_50","MUTED_30","align","margin","legend","itemStyle","color","TEXT","cursor","fontWeight","itemMarginTop","itemMarginBottom","symbolHeight","symbolWidth","symbolRadius","itemDistance","plotOptions","series","areaspline","marker","symbol","radius","dataGrouping","dateTimeLabelFormats","millisecond","second","minute","hour","headerFormat","positioner","labelWidth","labelHeight","plotLeft","plotTop","shadow","shape","valueDecimals","xDateFormat","shared","scrollbar","navigator","outlineColor","outlineWidth","maskInside","maskFill","handles","borderColor","xAxis","gridLineWidth","reserveSpace","rangeSelector","buttonTheme","fill","stroke","r","textTransform","dominantBaseline","buttons","count","allButtonsEnabled","selected","labelStyle","display","inputEnabled","gridLineDashStyle","showEmpty","tickPosition","yAxis","allowDecimals","min","opposite","field_data","series_unit","fillColor","linearGradient","x1","x2","y1","y2","stops","colors_set","j","highcharts","updateScoreboards","$scoreboards_wrapper","titles","order","with_dynamics","measure","scoreboard_type","$scoreboard","dynamic_by_week","buildStaffBlock","avatars","avatarBlocks","buildPieChart","$container","pieChartSeriesNormalize","browser","android","ios","female","male","other","null","pie_chart_options","pointFormat","pie","center","allowPointSelect","dataLabels","distance","defer","formatter","percentage","textShadow","verticalAlign","layout","labelFormatter","stat_dynamics","staffs_additional_fields","avatar_classes","storage_data_name","storage_until_name","is_cached_data_actual","sessionStorage","isAfter","staff_block","event_blocks","badges","public_at","isBefore","parse","EVENDATE_BEGIN","setItem","stat_data","scoreboards_data","devices","dates_block","stats","$context","source","$preview","$file_name_text","$file_name","$data_url","cropped_src","crop_data","formatVKPost","$post","$title","$place","$description","$is_free","$min_price","$is_required","$registration_till","$tags","$link","post_text","$main_time_inputs","$inputs","toggleVkImg","$wrap","$left_block","$right_block","submitEditEvent","afterSubmit","$form","guid","vk_group","vk_post","image","base64","vk_image_src","vk_image_filename","image_horizontal","different_time","delayed_publication","filenames","horizontal","form_data","is_edit","is_form_valid","$times","max_length","stop","$row","start","end","filename_horizontal","registration_till_date","registration_till_time_hours","registration_till_time_minutes","public_at_date","public_at_time_hours","public_at_time_minutes","selected_days_rows","$main_time","paceOptions","catchupTime","maxProgressPerFrame","ghostTime","Number","MAX_SAFE_INTEGER","checkInterval","eventLag","minSamples","sampleCount","lagThreshold","restart","bindRemoveRow","displayFormattedText","$selected_days_text","doTheFuckingSort","$rows","an","bn","detach","$output","formatted_date","$fucking_table","DP","$selected_days_table_rows","BuildSelectedDaysTable","$table_wrapper","$table_content","overflow","AddRowDatePicker","selected_id","selected_address","organizations_options","$default_address_button","$select","placepicker","placeholder","maximumSelectionLength","maximumSelectionSize","tokenSeparators","multiple","createSearchChoice","term","localeCompare","dataType","results","alias","autoGroup","digits","digitsOptional","rightAlign","files","f","the_file","$vk_post_wrapper","$vk_post_content","selectDates","raw_dates","$table_rows","$day_row","selectTags","selected_tags","initVkImgCopying","$vk_wrapper","$vk_wrap","$vk_preview","$vk_button","$vk_$data_url","$button_orig","page_vars","public_at_data_label","registration_till_data_label","current_date","tomorrow_date","header_text","button_text","m_public_at","public_at_data","m_registration_till","registration_till_data","image_horizontal_filename","vk_image_url","base64_string","buildNotifications","raw_notifications","all_notifications","notification-before-quarter-of-hour","subtract","notification-before-three-hours","notification-before-day","notification-before-three-days","notification-before-week","$notifications","current_notifications","notif","notification","is_disabled","done","unit_classes","disabled","radioOrCheckbox","STATS","EVENT_ENTITY","EVENT_OPEN_SITE","EVENT_OPEN_MAP","$subscribers","avatars_collection_classes","$event_additional_fields","date_times","add_to_favorite_button","subscribers","favored_users_show","location_sanitized","encodeURI","event_edit_functions","event_registration_information","event_price_information","event_additional_fields","cancel_cancellation","m_nearest_date","SUBSCRIBED_ORGS","update","bindSubscriptions","appendRecommendations","$loader","onScroll","scroll","maxScroll","getFeed","page_number","cards_by_users","stat","ent","action_name","ACTION_NAMES","entities","$card","item_tmpl_name","$load_btn","before","getFriendFeed","hide_btn","ACTIVE","fadeIn","initEditEventPage","bindLoadByURLButton","submitEditOrganization","initOrganizationTypes","formValidation","for_edit","is_valid","background_filename","logo_filename","vk_url","facebook_url","background","logo","valid_form","local_storage","removeItem","selectCategory","bindOrganizationsEvents","$categories","org","disableBodyScroll","organizationCard","next","is_parent_category","is_this_active","organisationsCategoriesItems","organizationFeedEvents","bindUploadEventsOnScroll","scrollEvent","$subscribers_scroll","scroll_events","ORGANIZATION_ENTITY","ORGANIZATION_OPEN_SITE","subscribe_button","has_address","redact_org_button","hidden_for_users","subscribed_blocks","namespace","buildOrganizationItems","organizationItems","block_classes","counter_classes","$organizations_scrollbar","no_organizations","buildMyOrganizationsBlocks","avatars_max_count","staff_additional_fields","org_roles","plural_name","staffs_fields","modal_organization_id","avatarCollection","modal_specific_role","SUBSCRIBERS","bindUploadOnScroll","POST","PUT","DELETE","ajax_method","ajax_url","method","contentType","ajaxHandler","ajaxErrorHandler","jqxhr","settings","thrownError","debug","groupCollapsed","responseJSON","stack","errors_array","normalizeBuildProps","datasets","normalizeTag","encodeURIComponent","normalize","html_tag","props_unit","subscriber","max_count","orgs","new_events_count","subscribed_text","m_event_date","different_day","divider","times","aside_classes","sum","category_name","last_is_fiend","append_divider","avatar_block","feed_event_infos","EVENT_VIEW","accY","tabs","tab","new_title","title_str","$new_title","title_chunk","page_name","soft_change","reload","History","replaceState","_index","getCurrentIndex","pushState","reInit","$sidebar_nav_items","getAttribute","PRIMARY","ACCENT_ALT","FRANKLIN_ALT","EVENT_VIEW_DETAIL","PEOPLE","search_is_active","search_query","search_xhr","ajaxStart","ajaxError","ready","initSidebar","$sidebar","$sidebar_nav","initTopBar","$document","OneSignal","appId","autoRegister","notifyButton","enable","isPushNotificationsSupported","isPushNotificationsEnabled","isEnabled","isSubscribed","getUserId","userId","device_token","client_type","model","appVersion","os_version","platform","global","language","tz","setDefault","updateLocale","monthsShort","sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse","Highcharts","setOptions","lang","shortMonths","Adapter","getState","timing","current_menu_items","to_add","to_remove","org_block","$organization_item","setInterval","batch"],"mappings":"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","file":"app.js","sourcesContent":["/**\r\n * Extending class\r\n * @param {Function} parent\r\n */\r\nFunction.prototype.extend = function(parent) {\r\n\tthis.prototype = Object.create(parent.prototype);\r\n\tthis.prototype.constructor = this;\r\n\tthis.prototype.__super = parent.prototype;\r\n\tthis.prototype.__superCall = function(method_name) {\r\n\t\tif (parent.prototype[method_name] && typeof parent.prototype[method_name] == 'function') {\r\n\t\t\treturn parent.prototype[method_name].call(this, Array.prototype.slice.call(1, arguments));\r\n\t\t} else {\r\n\t\t\tconsole.error('There is no \"' + method_name + '\" method in object \"' + parent.prototype.constructor.name + '\"');\r\n\t\t}\r\n\t};\r\n};\r\n/**\r\n * Returns capitalized string\r\n * @return {string}\r\n */\r\nString.prototype.capitalize = function() {\r\n\treturn this.charAt(0).toUpperCase() + this.slice(1);\r\n};\r\n/**\r\n * Checks if string contains some substring\r\n * @param {(string|RegExp)} it\r\n * @return {boolean}\r\n */\r\nString.prototype.contains = function(it) {return this.search(it) !== -1;};\r\n/**\r\n * Works like printf. Variables must be inside the {braces}. Returns formatted string\r\n * @param {object} fields\r\n * @return {string}\r\n */\r\nString.prototype.format = function(fields) {\r\n\treturn this.replace(/\\{(\\w+)\\}/g, function(m, n) {\r\n\t\treturn fields[n] != null ? fields[n] : '';\r\n\t});\r\n};\r\n/**\r\n * Converts {delimiter}-separated string into CamelCase\r\n * @param {string} [delimiter=' ']\r\n * @return {string}\r\n */\r\nString.prototype.toCamelCase = function(delimiter) {\r\n\treturn this.split(delimiter ? delimiter : ' ').map(function(part) { return part.capitalize(); }).join('');\r\n};\r\n/**\r\n * Makes CamelCase to_underscore\r\n * @return {string}\r\n */\r\nString.prototype.toUnderscore = function() {\r\n\treturn (this.charAt(0).toLowerCase() + this.slice(1)).replace(/([A-Z])/g, function($1) {return \"_\" + $1.toLowerCase();});\r\n};\r\n/**\r\n * Returns formatted string for fields AJAX data\r\n * @param {AJAXData} data\r\n * @return {string}\r\n */\r\nString.prototype.appendAjaxData = function(data) {\r\n\tif (data.fields && data.fields instanceof Array) {\r\n\t\tdata.fields = data.fields.join(',');\r\n\t}\r\n\treturn this + JSON.stringify(data);\r\n};\r\n/**\r\n * Returns array of objects` own properties\r\n * @param {object} obj\r\n * @return {Array}\r\n */\r\nObject.props = function(obj) {\r\n\tvar props = [];\r\n\tObject.keys(obj).forEach(function(prop) {\r\n\t\tif (typeof obj[prop] !== 'function') {\r\n\t\t\tprops.push(prop);\r\n\t\t}\r\n\t});\r\n\treturn props;\r\n};\r\n/**\r\n * Returns array of objects` own methods\r\n * @param {object} obj\r\n * @return {Array}\r\n */\r\nObject.methods = function(obj) {\r\n\tvar methods = [];\r\n\tObject.keys(obj).forEach(function(prop) {\r\n\t\tif (typeof obj[prop] === 'function') {\r\n\t\t\tmethods.push(prop);\r\n\t\t}\r\n\t});\r\n\treturn methods;\r\n};\r\n\r\nif (typeof Object.values !== 'function') {\r\n\t/**\r\n\t * Returns array of objects` own properties` values\r\n\t * @param {object} obj\r\n\t * @return {Array}\r\n\t */\r\n\tObject.values = function(obj) {\r\n\t\tvar vals = [];\r\n\t\tfor (var key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key) && obj.propertyIsEnumerable(key)) {\r\n\t\t\t\tvals.push(obj[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn vals;\r\n\t};\r\n}\r\n/**\r\n * Converts object into string of html data set\r\n * @return {string}\r\n */\r\nObject.toHtmlDataSet = function() {\r\n\tvar dataset = [], obj = this;\r\n\tObject.props(obj).forEach(function(prop) {\r\n\t\tdataset.push(((prop.indexOf('data-') != 0) ? 'data-' + prop : prop) + '=\"' + obj[prop] + '\"');\r\n\t});\r\n\treturn dataset.join(' ');\r\n};\r\n/**\r\n * Converts object into string of html attributes\r\n * @return {string}\r\n */\r\nObject.toHtmlAttributes = function() {\r\n\tvar attributes = [], obj = this;\r\n\tObject.props(obj).forEach(function(prop) {\r\n\t\tattributes.push(prop + '=\"' + obj[prop] + '\"');\r\n\t});\r\n\treturn attributes.join(' ');\r\n};\r\n/**\r\n * Returns copy of original array and appends additional_values\r\n * @param {Array} original\r\n * @param {...(number|string|boolean|object|Array)} [additional_values]\r\n * @return {Array}\r\n */\r\nArray.newFrom = function(original, additional_values) {\r\n\tvar new_array = original.slice(0), arg, i;\r\n\tif (arguments.length > 1) {\r\n\t\tfor (i = 1; i < arguments.length; i++) {\r\n\t\t\targ = arguments[i];\r\n\t\t\tswitch (typeof arg) {\r\n\t\t\t\tcase 'number':\r\n\t\t\t\tcase 'string':\r\n\t\t\t\tcase 'boolean': {\r\n\t\t\t\t\t$.merge(new_array, [arg]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'object': {\r\n\t\t\t\t\tif (arg instanceof Array) {\r\n\t\t\t\t\t\t$.merge(new_array, arg);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$.merge(new_array, Object.keys(arg).map(function(key) {return arg[key]}));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tdefault: {\r\n\t\t\t\t\tconsole.error('')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn new_array;\r\n};\r\n/**\r\n * Returns string of elements, separated by space\r\n * @return {string}\r\n */\r\nArray.toSpaceSeparatedString = function() {\r\n\treturn this.join(' ');\r\n};\r\n/**\r\n * Cleans array from specific values. If no delete_value is passed, deletes undefined values,\r\n * @param {*} [delete_value]\r\n * @return {Array}\r\n */\r\nArray.prototype.clean = function(delete_value) {\r\n\tfor (var i = 0; i < this.length; i++) {\r\n\t\tif (this[i] == delete_value) {\r\n\t\t\tthis.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};\r\n/**\r\n * Returns rounded num to specific count of decimals\r\n * @param {(number|string)} num\r\n * @param {number} decimals\r\n * @return {number}\r\n */\r\nMath.roundTo = function(num, decimals) {\r\n\tvar d = Math.pow(10, decimals ? decimals : 0);\r\n\treturn Math.round(num * d) / d;\r\n};\r\n\r\n\r\n(function($) {\r\n\tfunction handleStep(tween) {\r\n\t\tvar target = $(tween.elem),\r\n\t\t\tdefaults = {\r\n\t\t\t\tseparator: ' ',\r\n\t\t\t\tgroup_length: 3,\r\n\t\t\t\tsuffix: '',\r\n\t\t\t\tprefix: ''\r\n\t\t\t},\r\n\t\t\toptions, floored_number, separated_number;\r\n\t\tif (tween.elem.nodeType && tween.elem.parentNode) {\r\n\t\t\toptions = $.extend(true, {}, defaults, target.data());\r\n\t\t\tfloored_number = Math.floor(tween.now);\r\n\t\t\tseparated_number = floored_number.toString();\r\n\t\t\t\r\n\t\t\tfunction extractNumberParts(separated_number, group_length) {\r\n\t\t\t\tvar numbers = separated_number.split('').reverse(),\r\n\t\t\t\t\tnumber_parts = [],\r\n\t\t\t\t\tcurrent_number_part,\r\n\t\t\t\t\tcurrent_index,\r\n\t\t\t\t\tq;\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0, l = Math.ceil(separated_number.length / group_length); i < l; i++) {\r\n\t\t\t\t\tcurrent_number_part = '';\r\n\t\t\t\t\tfor (q = 0; q < group_length; q++) {\r\n\t\t\t\t\t\tcurrent_index = i * group_length + q;\r\n\t\t\t\t\t\tif (current_index === separated_number.length) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrent_number_part = current_number_part + numbers[current_index];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnumber_parts.push(current_number_part);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn number_parts;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction removePrecendingZeros(number_parts) {\r\n\t\t\t\tvar last_index = number_parts.length - 1,\r\n\t\t\t\t\tlast = number_parts[last_index].split('').reverse().join('');\r\n\t\t\t\t\r\n\t\t\t\tnumber_parts[last_index] = parseInt(last, 10).toString().split('').reverse().join('');\r\n\t\t\t\treturn number_parts;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (separated_number.length > options.group_length) {\r\n\t\t\t\tvar number_parts = extractNumberParts(separated_number, options.group_length);\r\n\t\t\t\tseparated_number = removePrecendingZeros(number_parts).join(options.separator);\r\n\t\t\t\tseparated_number = separated_number.split('').reverse().join('');\r\n\t\t\t}\r\n\t\t\ttarget.prop('number', tween.now).text(options.prefix + separated_number + options.suffix);\r\n\t\t}\r\n\t}\r\n\t\r\n\tif (!$.Tween || !$.Tween.propHooks) {\r\n\t\t$.fx.step.number = handleStep;\r\n\t} else {\r\n\t\t$.Tween.propHooks.number = {\r\n\t\t\tset: handleStep\r\n\t\t};\r\n\t}\r\n}(window.jQuery));\r\n\r\n$.fn.extend({\r\n\ttoggleStatus: function(statuses) {\r\n\t\tvar $this = this;\r\n\t\t\r\n\t\tif ($this.is('.form_unit')) {\r\n\t\t\tstatuses.split(' ').forEach(function(status) {\r\n\t\t\t\tvar $form_elements = $this.find('input, select, textarea, button');\r\n\t\t\t\tif (status === 'disabled') {\r\n\t\t\t\t\tif ($this.hasClass('-status_disabled')) {\r\n\t\t\t\t\t\t$form_elements.removeAttr('disabled');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$form_elements.attr('disabled', true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$this.toggleClass('-status_' + status);\r\n\t\t\t});\r\n\t\t} else if ($this.is('input, textarea, select, button')) {\r\n\t\t\t$this.closest('.form_unit').toggleStatus(statuses);\r\n\t\t} else if ($this.length) {\r\n\t\t\t$this.find('.form_unit').toggleStatus(statuses);\r\n\t\t} else {\r\n\t\t\tthrow Error('Argument not found');\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Сбор данных с формы\r\n\t * Метод возвращает javaScript объект, состоящий из атрибутов name и value элементов формы.\r\n\t * Если output_type стоит на array, то возвращается массив из объектов с полями name и value (аналогично с serializeArray).\r\n\t *\r\n\t * @method external:\"jQuery.fn\".serializeForm\r\n\t *\r\n\t * @param {string} [output_type=object]\r\n\t * @returns {Array|Object}\r\n\t */\r\n\tserializeForm: function(output_type) {\r\n\t\tvar zb = /^(?:input|select|textarea|keygen)/i,\r\n\t\t\tyb = /^(?:submit|button|image|reset|file)$/i,\r\n\t\t\tT = /^(?:checkbox|radio)$/i,\r\n\t\t\txb = /\\r?\\n/g,\r\n\t\t\telements = this.map(function() {\r\n\t\t\t\tvar a = $.prop(this, \"elements\");\r\n\t\t\t\treturn a ? $.makeArray(a) : this\r\n\t\t\t});\r\n\t\t\r\n\t\tswitch (output_type) {\r\n\t\t\tcase 'array': {\r\n\t\t\t\t/* Работает так же как и serializeArray, с некоторыми модификациями */\r\n\t\t\t\treturn elements.filter(function() {\r\n\t\t\t\t\tvar a = this.type;\r\n\t\t\t\t\treturn this.name\r\n\t\t\t\t\t\t&& !$(this).is(\":disabled\")\r\n\t\t\t\t\t\t&& zb.test(this.nodeName)\r\n\t\t\t\t\t\t&& !yb.test(a)\r\n\t\t\t\t\t\t&& ((this.checked && this.value != \"on\") || a != \"radio\")\r\n\t\t\t\t\t\t&& ((this.checked && this.value != \"on\") || this.value == \"on\" || a != \"checkbox\")\r\n\t\t\t\t}).map(function(a, b) {\r\n\t\t\t\t\tvar c = $(this).val(),\r\n\t\t\t\t\t\tstd = \"\";\r\n\t\t\t\t\tswitch (this.type) {\r\n\t\t\t\t\t\tcase \"radio\":\r\n\t\t\t\t\t\tcase \"checkbox\": {\r\n\t\t\t\t\t\t\tstd = c == \"on\" ? ( this.checked ? 1 : 0 ) : c;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\t\tstd = c.replace(xb, \"\\r\\n\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null == c ? null : {\r\n\t\t\t\t\t\tname: b.name,\r\n\t\t\t\t\t\tvalue: std\r\n\t\t\t\t\t}\r\n\t\t\t\t}).get();\r\n\t\t\t}\r\n\t\t\tcase 'object':\r\n\t\t\tdefault: {\r\n\t\t\t\tvar output = {};\r\n\t\t\t\telements.filter(function() {\r\n\t\t\t\t\tvar a = this.type;\r\n\t\t\t\t\treturn this.name && !$(this).is(':disabled') && zb.test(this.nodeName) && !yb.test(a) && !T.test(a)\r\n\t\t\t\t}).each(function(i, el) {\r\n\t\t\t\t\tvar $element = $(el),\r\n\t\t\t\t\t\tname = el.name,\r\n\t\t\t\t\t\tvalue = $element.val();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (elements.filter(\"[name='\" + name + \"']\").length > 1 && value != \"\") {\r\n\t\t\t\t\t\toutput[name] = typeof(output[name]) == \"undefined\" ? [] : output[name];\r\n\t\t\t\t\t\toutput[name].push(value ? value.replace(xb, \"\\r\\n\") : value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ($element.attr('type') === 'hidden' && value.indexOf('data.') === 0) {\r\n\t\t\t\t\t\tvar data_names = value.split('.'),\r\n\t\t\t\t\t\t\tdata = $element.data(data_names[1]),\r\n\t\t\t\t\t\t\tn = 2;\r\n\t\t\t\t\t\twhile (data_names[n]) {\r\n\t\t\t\t\t\t\tdata = data[data_names[n]];\r\n\t\t\t\t\t\t\tn++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\toutput[name] = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\toutput[name] = value || value === 0 ? value.replace(xb, \"\\r\\n\") : null;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\telements.filter(function() {\r\n\t\t\t\t\tvar a = this.type;\r\n\t\t\t\t\treturn this.name && !$(this).is(\":disabled\") && T.test(a) && ((this.checked && this.value != \"on\") || (this.value == \"on\" && a == \"checkbox\"))\r\n\t\t\t\t}).each(function(i, el) {\r\n\t\t\t\t\tvar name = el.name,\r\n\t\t\t\t\t\tvalue = el.value;\r\n\t\t\t\t\t\r\n\t\t\t\t\tswitch (el.type) {\r\n\t\t\t\t\t\tcase 'radio': {\r\n\t\t\t\t\t\t\toutput[name] = value;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase 'checkbox': {\r\n\t\t\t\t\t\t\tif (elements.filter(\"[name='\" + name + \"']\").length > 1 && value != \"on\") {\r\n\t\t\t\t\t\t\t\toutput[name] = typeof(output[name]) == \"undefined\" ? [] : output[name];\r\n\t\t\t\t\t\t\t\toutput[name].push(value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (value != \"on\")\r\n\t\t\t\t\t\t\t\toutput[name] = value;\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\toutput[name] = el.checked ? true : false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn output;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tanimateNumber: function(options) {\r\n\t\tvar args = [options];\r\n\t\t\r\n\t\tfor (var i = 1, l = arguments.length; i < l; i++) {\r\n\t\t\targs.push(arguments[i]);\r\n\t\t}\r\n\t\tthis.data(options);\r\n\t\t\r\n\t\treturn this.animate.apply(this, args);\r\n\t}\r\n});\r\n\r\njQuery.makeSet = function(array) {\r\n\treturn $($.map(array, function(el) {return el.get();}));\r\n};\r\n\r\n\r\n/**\r\n * Notify Addon definition as jQuery plugin\r\n * Adapted version to work with Bootstrap classes\r\n * More information http://getuikit.com/docs/addons_notify.html\r\n */\r\n(function($, window, document) {\r\n\t\r\n\tvar containers = {},\r\n\t\tmessages = {},\r\n\t\t\r\n\t\tnotify = function(options) {\r\n\t\t\t\r\n\t\t\tif ($.type(options) == 'string') {\r\n\t\t\t\toptions = {message: options};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (arguments[1]) {\r\n\t\t\t\toptions = $.extend(options, $.type(arguments[1]) == 'string' ? {status: arguments[1]} : arguments[1]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn (new Message(options)).show();\r\n\t\t},\r\n\t\tcloseAll = function(group, instantly) {\r\n\t\t\tif (group) {\r\n\t\t\t\tfor (var id in messages) {\r\n\t\t\t\t\tif (group === messages[id].group) messages[id].close(instantly);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var id in messages) {\r\n\t\t\t\t\tmessages[id].close(instantly);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\tvar Message = function(options) {\r\n\t\t\r\n\t\tvar $this = this;\r\n\t\t\r\n\t\tthis.options = $.extend({}, Message.defaults, options);\r\n\t\t\r\n\t\tthis.uuid = \"ID\" + (new Date().getTime()) + \"RAND\" + (Math.ceil(Math.random() * 100000));\r\n\t\tthis.element = $([\r\n\t\t\t// alert-dismissable enables bs close icon\r\n\t\t\t'<div class=\"uk-notify-message alert-dismissable\">',\r\n\t\t\t'<a class=\"close\">&times;</a>',\r\n\t\t\t'<div>' + this.options.message + '</div>',\r\n\t\t\t'</div>'\r\n\t\t\r\n\t\t].join('')).data(\"notifyMessage\", this);\r\n\t\t\r\n\t\t// status\r\n\t\tif (this.options.status) {\r\n\t\t\tthis.element.addClass('alert alert-' + this.options.status);\r\n\t\t\tthis.currentstatus = this.options.status;\r\n\t\t}\r\n\t\t\r\n\t\tthis.group = this.options.group;\r\n\t\t\r\n\t\tmessages[this.uuid] = this;\r\n\t\t\r\n\t\tif (!containers[this.options.pos]) {\r\n\t\t\tcontainers[this.options.pos] = $('<div class=\"uk-notify uk-notify-' + this.options.pos + '\"></div>').appendTo('body').on(\"click\", \".uk-notify-message\", function() {\r\n\t\t\t\t$(this).data(\"notifyMessage\").close();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t\r\n\t$.extend(Message.prototype, {\r\n\t\t\r\n\t\tuuid: false,\r\n\t\telement: false,\r\n\t\ttimout: false,\r\n\t\tcurrentstatus: \"\",\r\n\t\tgroup: false,\r\n\t\t\r\n\t\tshow: function() {\r\n\t\t\t\r\n\t\t\tif (this.element.is(\":visible\")) return;\r\n\t\t\t\r\n\t\t\tvar $this = this;\r\n\t\t\t\r\n\t\t\tcontainers[this.options.pos].show().prepend(this.element);\r\n\t\t\t\r\n\t\t\tvar marginbottom = parseInt(this.element.css(\"margin-bottom\"), 10);\r\n\t\t\t\r\n\t\t\tthis.element.css({\r\n\t\t\t\t\"opacity\": 0,\r\n\t\t\t\t\"margin-top\": -1 * this.element.outerHeight(),\r\n\t\t\t\t\"margin-bottom\": 0\r\n\t\t\t}).animate({\"opacity\": 1, \"margin-top\": 0, \"margin-bottom\": marginbottom}, function() {\r\n\t\t\t\t\r\n\t\t\t\tif ($this.options.timeout) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar closefn = function() {\r\n\t\t\t\t\t\t$this.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t$this.timeout = setTimeout(closefn, $this.options.timeout);\r\n\t\t\t\t\t\r\n\t\t\t\t\t$this.element.hover(\r\n\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\tclearTimeout($this.timeout);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t$this.timeout = setTimeout(closefn, $this.options.timeout);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t\r\n\t\tclose: function(instantly) {\r\n\t\t\t\r\n\t\t\tvar $this = this,\r\n\t\t\t\tfinalize = function() {\r\n\t\t\t\t\t$this.element.remove();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!containers[$this.options.pos].children().length) {\r\n\t\t\t\t\t\tcontainers[$this.options.pos].hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tdelete messages[$this.uuid];\r\n\t\t\t\t};\r\n\t\t\t\r\n\t\t\tif (this.timeout) clearTimeout(this.timeout);\r\n\t\t\t\r\n\t\t\tif (instantly) {\r\n\t\t\t\tfinalize();\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.animate({\r\n\t\t\t\t\t\"opacity\": 0,\r\n\t\t\t\t\t\"margin-top\": -1 * this.element.outerHeight(),\r\n\t\t\t\t\t\"margin-bottom\": 0\r\n\t\t\t\t}, function() {\r\n\t\t\t\t\tfinalize();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tcontent: function(html) {\r\n\t\t\t\r\n\t\t\tvar container = this.element.find(\">div\");\r\n\t\t\t\r\n\t\t\tif (!html) {\r\n\t\t\t\treturn container.html();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcontainer.html(html);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t\r\n\t\tstatus: function(status) {\r\n\t\t\t\r\n\t\t\tif (!status) {\r\n\t\t\t\treturn this.currentstatus;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.element.removeClass('alert alert-' + this.currentstatus).addClass('alert alert-' + status);\r\n\t\t\t\r\n\t\t\tthis.currentstatus = status;\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t}\r\n\t});\r\n\t\r\n\tMessage.defaults = {\r\n\t\tmessage: \"\",\r\n\t\tstatus: \"normal\",\r\n\t\ttimeout: 5000,\r\n\t\tgroup: null,\r\n\t\tpos: 'top-center'\r\n\t};\r\n\t\r\n\t\r\n\t$[\"notify\"] = notify;\r\n\t$[\"notify\"].message = Message;\r\n\t$[\"notify\"].closeAll = closeAll;\r\n\t\r\n\treturn notify;\r\n\t\r\n}(jQuery, window, document));\r\n\r\n\r\n/**===========================================================\r\n * Templates for jQuery\r\n *\r\n * @param {string} template_type\r\n * @param {(object|Array)} [items={}]\r\n * @param {jQuery} [addTo]\r\n * @param {string} [direction=\"append\"]\r\n * @returns {jQuery}\r\n */\r\nfunction tmpl(template_type, items, addTo, direction) {\r\n\titems = items ? items : {};\r\n\t\r\n\tvar htmlEntities = function(str) {\r\n\t\t\treturn String(str + '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n\t\t},\r\n\t\treplaceTags = function(html, object) {\r\n\t\t\tvar jQuery_pairs = {},\r\n\t\t\t\tkeys = {};\r\n\t\t\t$.each(object, function(key, value) {\r\n\t\t\t\tif ($.type(value) == 'string') {\r\n\t\t\t\t\tkeys[key] = htmlEntities(value);\r\n\t\t\t\t} else if (value instanceof jQuery) {\r\n\t\t\t\t\tif (value.length) {\r\n\t\t\t\t\t\tjQuery_pairs[key] = value;\r\n\t\t\t\t\t\tkeys[key] = '<div id=\"JQ_tmpl_' + key + '\"></div>';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (value == null) {\r\n\t\t\t\t\tkeys[key] = '';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tkeys[key] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\thtml = $(html ? html.format(keys) : '');\r\n\t\t\t$.each(jQuery_pairs, function(key, value) {\r\n\t\t\t\thtml = html.map(function(i, el) {\r\n\t\t\t\t\tvar $el = $(el);\r\n\t\t\t\t\tif (el.id == 'JQ_tmpl_' + key) {\r\n\t\t\t\t\t\treturn value.toArray();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$el.find('#JQ_tmpl_' + key).append(value);\r\n\t\t\t\t\treturn $el.get(0);\r\n\t\t\t\t});\r\n\t\t\t\tvalue.unwrap();\r\n\t\t\t});\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t\r\n\t\tresult = $(),\r\n\t\thtml_val = $('#tmpl-' + template_type).html()\r\n\t\t\t.replace(/(?:\\/\\*(?:[\\s\\S]*?)\\*\\/)|(?:([\\s;])+\\/\\/(?:.*)$)/gim, '')// comments\r\n\t\t\t.replace(/\\\\s{2,}|\\t|\\n|\\r/gim, '')// spaces, tabs, new lines\r\n\t\t\t.trim();\r\n\t\r\n\tif (html_val === undefined) {\r\n\t\tconsole.group('tmpl_error');\r\n\t\tconsole.log('error in ' + template_type);\r\n\t\tconsole.log('items', items);\r\n\t\tconsole.log('addTo', addTo);\r\n\t\tconsole.log('html_val', html_val);\r\n\t\tconsole.log('inputs', {template_type: template_type, items: items, addTo: addTo, direction: direction});\r\n\t\tconsole.groupEnd();\r\n\t}\r\n\tif (Array.isArray(items)) {\r\n\t\tresult = $.makeSet(items.map(function(item) {\r\n\t\t\treturn replaceTags(html_val, item);\r\n\t\t}));\r\n\t} else {\r\n\t\tresult = replaceTags(html_val, items);\r\n\t}\r\n\tif (addTo == null || addTo == undefined) {\r\n\t\treturn result;\r\n\t}\r\n\tif (direction == 'prepend') {\r\n\t\taddTo.prepend(result);\r\n\t} else {\r\n\t\taddTo.append(result);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction storeStat(entity_id, entity_type, event_type) {\r\n\twindow.__stats = window.__stats ? window.__stats : [];\r\n\twindow.__stats.push({\r\n\t\tentity_id: entity_id,\r\n\t\tentity_type: entity_type,\r\n\t\tevent_type: event_type\r\n\t});\r\n}\r\n\r\n/**\r\n * Возвращает единицу измерения с правильным окончанием\r\n *\r\n * @param {Number} num      Число\r\n * @param {{NOM: {string}, GEN: {string}, PLU: {string}}} cases    Варианты слова {nom: 'час', gen: 'часа', plu: 'часов'}\r\n * @return {String}\r\n */\r\nfunction getUnitsText(num, cases) {\r\n\tnum = Math.abs(num);\r\n\t\r\n\tvar word = '';\r\n\t\r\n\tif (num.toString().indexOf('.') > -1) {\r\n\t\tword = cases.GEN;\r\n\t} else {\r\n\t\tword = (\r\n\t\t\tnum % 10 == 1 && num % 100 != 11\r\n\t\t\t\t? cases.NOM\r\n\t\t\t\t: num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20)\r\n\t\t\t\t? cases.GEN\r\n\t\t\t\t: cases.PLU\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn word;\r\n}\r\n\r\n\r\n/**\r\n * Returns formatted array of format variable\r\n * @param {(Array<OneDate>|DatesCollection)} dates\r\n * @param {(string|Array|jQuery|object)} format\r\n * @param {boolean} [is_same_time=false]\r\n * @returns {(Array<string>|Array<Array>|Array<jQuery>|Array<object>)}\r\n */\r\nfunction formatDates(dates, format, is_same_time) {\r\n\tvar cur_moment,\r\n\t\tprev_moment,\r\n\t\tcur_year,\r\n\t\tcur_month,\r\n\t\tcur_time,\r\n\t\tprev_time,\r\n\t\tis_with_time = false,\r\n\t\tcur_range_of_days = [],\r\n\t\tlast_index = dates.length - 1,\r\n\t\tdates_obj = {},\r\n\t\toutput = [];\r\n\t\r\n\t\r\n\tfunction formatString(formatting, days, time, month, year) {\r\n\t\tvar genitive_month_names = [\r\n\t\t\t\t'января',\r\n\t\t\t\t'февраля',\r\n\t\t\t\t'марта',\r\n\t\t\t\t'апреля',\r\n\t\t\t\t'мая',\r\n\t\t\t\t'июня',\r\n\t\t\t\t'июля',\r\n\t\t\t\t'августа',\r\n\t\t\t\t'сентября',\r\n\t\t\t\t'октября',\r\n\t\t\t\t'ноября',\r\n\t\t\t\t'декабря'\r\n\t\t\t],\r\n\t\t\tformat_options = {\r\n\t\t\t\td: days,\r\n\t\t\t\tD: days,\r\n\t\t\t\tt: time,\r\n\t\t\t\tT: time,\r\n\t\t\t\tM: month + 1,\r\n\t\t\t\tMM: month + 1 > 9 ? month + 1 : \"0\" + (month + 1),\r\n\t\t\t\tMMM: __LOCALES.ru_RU.DATE.MONTH_SHORT_NAMES[month].toLocaleLowerCase(),\r\n\t\t\t\tMMMM: __LOCALES.ru_RU.DATE.MONTH_NAMES[month].toLocaleLowerCase(),\r\n\t\t\t\tMMMMs: genitive_month_names[month],\r\n\t\t\t\tY: year,\r\n\t\t\t\tYY: year.substr(2, 2),\r\n\t\t\t\tYYYY: year\r\n\t\t\t},\r\n\t\t\toutput;\r\n\t\t\r\n\t\tif (typeof formatting == 'string') {\r\n\t\t\toutput = formatting.format(format_options).capitalize();\r\n\t\t} else if (Array.isArray(formatting)) {\r\n\t\t\toutput = formatting.map(function(str) {\r\n\t\t\t\treturn str.format(format_options).capitalize();\r\n\t\t\t});\r\n\t\t} else if (formatting instanceof jQuery) {\r\n\t\t\toutput = $();\r\n\t\t\tformatting.each(function(key, elem) {\r\n\t\t\t\tvar $elem = $(elem).clone();\r\n\t\t\t\t$elem.text(elem.innerText.format(format_options).capitalize());\r\n\t\t\t\toutput = output.add($elem);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\toutput = {};\r\n\t\t\t$.each(formatting, function(key, str) {\r\n\t\t\t\toutput[key] = str.format(format_options).capitalize();\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tif (!format) {\r\n\t\tformat = {\r\n\t\t\tdate: '{D} {MMMMs} {YYYY}',\r\n\t\t\ttime: '{T}'\r\n\t\t}\r\n\t}\r\n\t\r\n\tif (typeof format == 'string') {\r\n\t\tis_with_time = format.contains((/\\{T\\}|\\{t\\}/)) && dates[0]['start_time'] !== undefined;\r\n\t} else {\r\n\t\tis_with_time = dates[0]['start_time'] !== undefined;\r\n\t\t$.each(format, function() {\r\n\t\t\tis_with_time = is_with_time || this.contains((/\\{T\\}|\\{t\\}/));\r\n\t\t})\r\n\t}\r\n\t\r\n\tif (is_same_time) {\r\n\t\tif (is_with_time) {\r\n\t\t\tcur_time = dates[0].end_time ? displayTimeRange(dates[0].start_time, dates[0].end_time) : displayTimeRange(dates[0].start_time);\r\n\t\t}\r\n\t\t\r\n\t\tdates.forEach(function(date, i) {\r\n\t\t\tcur_moment = moment.unix(date.event_date);\r\n\t\t\tcur_year = cur_moment.year();\r\n\t\t\tcur_month = cur_moment.month();\r\n\t\t\tif (!dates_obj[cur_year])  dates_obj[cur_year] = {};\r\n\t\t\tif (!dates_obj[cur_year][cur_month])  dates_obj[cur_year][cur_month] = [];\r\n\t\t\t\r\n\t\t\tif (prev_moment) {\r\n\t\t\t\tif (cur_month !== prev_moment.month() || prev_moment.diff(cur_moment, 'days') !== -1) {\r\n\t\t\t\t\tdates_obj[prev_moment.year()][prev_moment.month()].push(cur_range_of_days.join('-'));\r\n\t\t\t\t\tcur_range_of_days[0] = cur_moment.format('D');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcur_range_of_days[1] = cur_moment.format('D');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcur_range_of_days[0] = cur_moment.format('D');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (i === last_index) {\r\n\t\t\t\tdates_obj[cur_year][cur_month].push(cur_range_of_days.join('-'));\r\n\t\t\t} else {\r\n\t\t\t\tprev_moment = cur_moment;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t$.each(dates_obj, function(year, months) {\r\n\t\t\t$.each(months, function(month, days) {\r\n\t\t\t\toutput.push(formatString(format, days.join(', '), is_with_time ? cur_time : '', month, year));\r\n\t\t\t})\r\n\t\t});\r\n\t\t\r\n\t} else {\r\n\t\tdates.forEach(function(date, i) {\r\n\t\t\tcur_moment = moment.unix(date.event_date);\r\n\t\t\tcur_year = cur_moment.year();\r\n\t\t\tcur_month = cur_moment.month();\r\n\t\t\tcur_time = date.end_time ? displayTimeRange(date.start_time, date.end_time) : displayTimeRange(date.start_time);\r\n\t\t\tif (!dates_obj[cur_year])  dates_obj[cur_year] = {};\r\n\t\t\tif (!dates_obj[cur_year][cur_month])  dates_obj[cur_year][cur_month] = [];\r\n\t\t\t\r\n\t\t\tif (prev_moment) {\r\n\t\t\t\tif (cur_month !== prev_moment.month() || prev_moment.diff(cur_moment, 'days') !== -1 || prev_time !== cur_time) {\r\n\t\t\t\t\tdates_obj[prev_moment.year()][prev_moment.month()].push({\r\n\t\t\t\t\t\tdate: cur_range_of_days.join('-'),\r\n\t\t\t\t\t\ttime: prev_time\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcur_range_of_days = [cur_moment.format('D')];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcur_range_of_days[1] = cur_moment.format('D');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tcur_range_of_days = [cur_moment.format('D')];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (i === last_index) {\r\n\t\t\t\tdates_obj[cur_year][cur_month].push({\r\n\t\t\t\t\tdate: cur_range_of_days.join('-'),\r\n\t\t\t\t\ttime: cur_time\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tprev_moment = cur_moment;\r\n\t\t\t\tprev_time = cur_time;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t$.each(dates_obj, function(year, months) {\r\n\t\t\t$.each(months, function(month, days) {\r\n\t\t\t\tvar formatted_days = [],\r\n\t\t\t\t\trange = [],\r\n\t\t\t\t\tprev_time;\r\n\t\t\t\t$.each(days, function(i, day) {\r\n\t\t\t\t\tif (prev_time) {\r\n\t\t\t\t\t\tif (day.time != prev_time) {\r\n\t\t\t\t\t\t\tformatted_days.push({date: range.join(', '), time: prev_time});\r\n\t\t\t\t\t\t\trange = [day.date];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trange.push(day.date);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trange = [day.date];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (i === days.length - 1) {\r\n\t\t\t\t\t\tformatted_days.push({date: range.join(', '), time: day.time});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tprev_time = day.time;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t$.each(formatted_days, function(i, formatted_day) {\r\n\t\t\t\t\toutput.push(formatString(format, formatted_day.date, is_with_time ? formatted_day.time : '', month, year));\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn output;\r\n}\r\n/**\r\n * Cutting out seconds in time string\r\n * @param {string} time\r\n * @return {string}\r\n */\r\nfunction trimSeconds(time) {\r\n\ttime = time.split(':');\r\n\tif (time.length == 3)\r\n\t\ttime = time.splice(0, 2);\r\n\t\r\n\treturn time.join(':');\r\n}\r\n/**\r\n * Returns formatted range of dates\r\n * @param {timestamp} first_date\r\n * @param {timestamp} last_date\r\n * @returns {string}\r\n */\r\nfunction displayDateRange(first_date, last_date) {\r\n\tvar m_first = moment.unix(first_date),\r\n\t\tm_last = moment.unix(last_date),\r\n\t\tm_today = moment();\r\n\t\r\n\tif (m_first.isSame(m_last, 'year')) {\r\n\t\tif (m_first.isSame(m_last, 'month')) {\r\n\t\t\tif (m_first.isSame(m_last, 'day')) {\r\n\t\t\t\treturn m_first.format(m_first.isSame(m_today, 'year') ? 'D MMM' : 'D MMM YYYY');\r\n\t\t\t} else {\r\n\t\t\t\treturn m_first.format('D') + '-' + m_last.format(m_first.isSame(m_today, 'year') ? 'D MMM' : 'D MMM YYYY');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn m_first.format('D MMM') + ' - ' + m_last.format(m_first.isSame(m_today, 'year') ? 'D MMM' : 'D MMM YYYY');\r\n\t\t}\r\n\t} else {\r\n\t\treturn m_first.format('MMM YYYY') + ' - ' + m_last.format('MMM YYYY');\r\n\t}\r\n}\r\n/**\r\n * Returns formatted times range\r\n * @param {string} start_time\r\n * @param {string} [end_time]\r\n * @returns {string}\r\n */\r\nfunction displayTimeRange(start_time, end_time) {\r\n\t\r\n\tif (end_time) {\r\n\t\tif (end_time == start_time && (start_time == '00:00:00' || start_time == '00:00')) {\r\n\t\t\treturn 'Весь день';\r\n\t\t} else {\r\n\t\t\treturn trimSeconds(start_time) + ' - ' + trimSeconds(end_time);\r\n\t\t}\r\n\t} else {\r\n\t\treturn trimSeconds(start_time);\r\n\t}\r\n}\r\n\r\n\r\nfunction bindLimitInputSize($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.LimitSize').not('.-Handled_LimitSize').each(function(i, e) {\r\n\t\tvar $this = $(e),\r\n\t\t\t$form_unit = $this.closest('.form_unit'),\r\n\t\t\tmax = $this.data('maxlength'),\r\n\t\t\t$prompt = $this.siblings('.form_prompt');\r\n\t\tif (!$prompt.length) {\r\n\t\t\t$this.after($('<p>').addClass('form_prompt').text($this.val().length + '/' + max));\r\n\t\t\t$prompt = $this.siblings('.form_prompt');\r\n\t\t} else {\r\n\t\t\t$prompt.text($this.val().length + '/' + max);\r\n\t\t}\r\n\t\t$this.on('input', function() {\r\n\t\t\tvar length = $this.val().length;\r\n\t\t\tif ($this.is('textarea')) {\r\n\t\t\t\tvar crlfs = $this.val().match(/\\n/g);\r\n\t\t\t\tlength = crlfs ? length + crlfs.length : length;\r\n\t\t\t}\r\n\t\t\tif (length > max) {\r\n\t\t\t\t$form_unit.addClass('-status_error');\r\n\t\t\t} else if ($form_unit.hasClass('-status_error')) {\r\n\t\t\t\t$form_unit.removeClass('-status_error');\r\n\t\t\t}\r\n\t\t\t$prompt.text(length + '/' + max);\r\n\t\t})\r\n\t}).addClass('-Handled_LimitSize');\r\n}\r\n\r\nfunction initSelect2($element, options) {\r\n\tvar opt = {\r\n\t\tcontainerCssClass: 'form_select2',\r\n\t\tdropdownCssClass: 'form_select2_drop'\r\n\t};\r\n\tif ($element.hasClass('-Handled_ToSelect2')) {\r\n\t\t$element.select2('destroy');\r\n\t}\r\n\tif (options) {\r\n\t\t$.extend(true, opt, options);\r\n\t}\r\n\t$element.select2(opt).addClass('-Handled_ToSelect2')\r\n}\r\n\r\nfunction initTimeInput(time_field) {\r\n\tvar $time_field = $(time_field),\r\n\t\t$hours = $time_field.find('input').eq(0),\r\n\t\t$minutes = $time_field.find('input').eq(1);\r\n\t\r\n\tfunction onBlur() {\r\n\t\tvar $this = $(this);\r\n\t\tif ($this.val() == \"0\" || $this.val() === \"\") {\r\n\t\t\t$this.val(\"00\");\r\n\t\t}\r\n\t\telse if ($this.val() <= 9) {\r\n\t\t\t$this.val(\"0\" + parseInt($this.val()));\r\n\t\t}\r\n\t}\r\n\t\r\n\t$hours.inputmask('Regex', {regex: \"([01]?[0-9]|2[0-3])\"}).on('keyup', function() {\r\n\t\tif ($hours.val() > 2 || $hours.val() == \"00\") {\r\n\t\t\t$minutes.focus();\r\n\t\t\t$hours.trigger('blur');\r\n\t\t}\r\n\t}).on('blur', onBlur);\r\n\t$minutes.inputmask('Regex', {regex: \"[0-5][0-9]\"}).on('blur', onBlur);\r\n\t$time_field.addClass('-Handled_TimeInput');\r\n}\r\n\r\nfunction trimAvatarsCollection($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.AvatarsCollection').each(function() {\r\n\t\tvar $collection = $(this),\r\n\t\t\t$avatars = $collection.find('.avatar'),\r\n\t\t\tamount = $avatars.length;\r\n\t\tif ($collection.hasClass('-subscribed') && !$collection.hasClass('-shift')) {\r\n\t\t\t$collection.width(amount == 1 ? ($avatars.outerWidth() * amount) : ($avatars.outerWidth() * amount) - (6 * (amount - 1)));\r\n\t\t} else {\r\n\t\t\t$collection.width(amount == 1 ? 0 : ($avatars.outerWidth() * (amount - 1)) - (6 * (amount - 2)));\r\n\t\t}\r\n\t\t$collection.addClass('-trimmed');\r\n\t});\r\n}\r\n\r\nfunction bindDatePickers($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.DatePicker').not('.-Handled_DatePicker').each(function(i, elem) {\r\n\t\t(new DatePicker(elem, $(elem).data())).init();\r\n\t}).addClass('-Handled_DatePicker');\r\n}\r\n\r\nfunction bindTimeInput($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.TimeInput').not('.-Handled_TimeInput').each(function(i, elem) {\r\n\t\tinitTimeInput(elem);\r\n\t}).addClass('-Handled_TimeInput');\r\n}\r\n\r\nfunction bindTabs($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.Tabs').not('.-Handled_Tabs').each(function(i, elem) {\r\n\t\tvar $this = $(elem),\r\n\t\t\t$wrapper = $this.find('.TabsBodyWrapper'),\r\n\t\t\t$tabs = $this.find('.Tab'),\r\n\t\t\t$bodies = $this.find('.TabsBody');\r\n\t\t\r\n\t\tif (!$tabs.filter('.-active').length) {\r\n\t\t\t$tabs.eq(0).addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t}\r\n\t\t$bodies.removeClass(__C.CLASSES.NEW_ACTIVE).eq($tabs.index($tabs.filter('.-active'))).addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t$wrapper.height($bodies.filter('.-active').height());\r\n\t\t\r\n\t\t$tabs.on('click', function() {\r\n\t\t\tif (!$(this).hasClass(__C.CLASSES.NEW_ACTIVE)) {\r\n\t\t\t\t$tabs.removeClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\t\t$bodies.removeClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\t\t$(this).addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\t\t$bodies.eq($tabs.index(this)).addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\t\t$wrapper.height($bodies.filter('.-active').height());\r\n\t\t\t\t$this.trigger('change.tabs');\r\n\t\t\t}\r\n\t\t})\r\n\t}).addClass('-Handled_Tabs');\r\n}\r\n\r\nfunction bindShareButtons($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.ShareButton').not('.-Handled_ShareButton').each(function(i, elem) {\r\n\t\tvar $this = $(elem);\r\n\t\t$this.on('click', function() {\r\n\t\t\twindow.open($this.data('href'), $this.data('title'), 'width=600,height=440,resizable=yes,scrollbars=no,status=no');\r\n\t\t});\r\n\t}).addClass('-Handled_ShareButton');\r\n}\r\n\r\nfunction bindSelect2($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.ToSelect2').not('.-Handled_ToSelect2').each(function(i, el) {\r\n\t\tinitSelect2($(el));\r\n\t});\r\n}\r\n\r\nfunction bindRippleEffect($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.RippleEffect').not('.-Handled_RippleEffect').on('click.RippleEffect', function(e) {\r\n\t\tvar $this = $(this), $ripple, size, x, y;\r\n\t\t\r\n\t\tif ($this.children('.Ripple').length == 0)\r\n\t\t\t$this.prepend('<span class=\"ripple Ripple\"></span>');\r\n\t\t\r\n\t\t$ripple = $this.children('.Ripple');\r\n\t\t$ripple.removeClass('animate');\r\n\t\t\r\n\t\tif (!$ripple.height() && !$ripple.width()) {\r\n\t\t\tsize = Math.max($this.outerWidth(), $this.outerHeight());\r\n\t\t\t$ripple.css({height: size, width: size});\r\n\t\t}\r\n\t\t\r\n\t\tx = e.pageX - $this.offset().left - ($ripple.width() / 2);\r\n\t\ty = e.pageY - $this.offset().top - ($ripple.height() / 2);\r\n\t\t\r\n\t\t$ripple\r\n\t\t\t.css({top: y + 'px', left: x + 'px'})\r\n\t\t\t.addClass('animate')\r\n\t\t\t.one('animationend webkitAnimationEnd', function() {\r\n\t\t\t\t$ripple.removeClass('animate');\r\n\t\t\t});\r\n\t}).addClass('-Handled_RippleEffect');\r\n}\r\n\r\nfunction bindDropdown($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.DropdownButton').not('.-Handled_DropdownButton').each(function() {\r\n\t\tvar $button = $(this),\r\n\t\t\tdata = $button.data(),\r\n\t\t\t$dropbox = $('.DropdownBox').filter('[data-dropdown_id=\"' + data.dropdown + '\"]');\r\n\t\t\r\n\t\t$dropbox.data($.extend({}, $dropbox.data(), data));\r\n\t\t$dropbox.closeDropbox = function() {\r\n\t\t\t$('body').off('mousedown.CloseDropdown');\r\n\t\t\t$(document).off('keyup.CloseDropdown');\r\n\t\t\t$dropbox.removeClass('-show');\r\n\t\t\t$button.addClass('-dropdown_active');\r\n\t\t};\r\n\t\t\r\n\t\tif (data.hasOwnProperty('ddWidth')) {\r\n\t\t\tif (data.ddWidth == 'self') {\r\n\t\t\t\t$dropbox.width($button.outerWidth());\r\n\t\t\t} else if ((isFinite(data.ddWidth)) || (data.ddWidth.search(/^[1-9]\\d*%$|^0%$/) === 0)) {\r\n\t\t\t\t$dropbox.width(data.ddWidth);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (data.hasOwnProperty('ddPosX') || data.hasOwnProperty('ddPosY')) {\r\n\t\t\tvar button_pos = $button.position();\r\n\t\t\tif (data.hasOwnProperty('ddPosX')) {\r\n\t\t\t\tvar xPos;\r\n\t\t\t\tif (data.ddPosX == 'self.center') {\r\n\t\t\t\t\txPos = (button_pos.left + $button.outerWidth() / 2) - $dropbox.outerWidth() / 2;\r\n\t\t\t\t} else if (data.ddPosX == 'center') {\r\n\t\t\t\t\txPos = $dropbox.parent().outerWidth() / 2 - $dropbox.outerWidth() / 2;\r\n\t\t\t\t} else if (isFinite(data.ddPosX)) {\r\n\t\t\t\t\txPos = data.ddPosX;\r\n\t\t\t\t}\r\n\t\t\t\t$dropbox.css('left', xPos);\r\n\t\t\t}\r\n\t\t\tif (data.hasOwnProperty('ddPosY')) {\r\n\t\t\t\tvar yPos;\r\n\t\t\t\tif (data.ddPosY == 'self.center') {\r\n\t\t\t\t\tyPos = (button_pos.top + $button.outerHeight() / 2) - $dropbox.outerHeight() / 2;\r\n\t\t\t\t} else if (data.ddPosY == 'center') {\r\n\t\t\t\t\tyPos = $dropbox.parent().outerHeight() / 2 - $dropbox.outerHeight() / 2;\r\n\t\t\t\t} else if (isFinite(data.ddPosY)) {\r\n\t\t\t\t\tyPos = (button_pos.top + $button.outerHeight()) + data.ddPosY;\r\n\t\t\t\t}\r\n\t\t\t\t$dropbox.css('top', yPos);\r\n\t\t\t}\r\n\t\t}\r\n\t\t$dropbox.find('.CloseDropdown').on('click.CloseDropdown', $dropbox.closeDropbox);\r\n\t\t$button.on('click.Dropdown', function() {\r\n\t\t\t$dropbox.addClass('-show');\r\n\t\t\t$button.addClass('-dropdown_active');\r\n\t\t\t$('body').on('mousedown.CloseDropdown', function(e) {\r\n\t\t\t\tif (!$(e.target).closest('.DropdownBox').length) {\r\n\t\t\t\t\t$dropbox.closeDropbox();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t$(document).on('keyup.CloseDropdown', function(e) {\r\n\t\t\t\tif (e.keyCode == 27) {\r\n\t\t\t\t\t$dropbox.closeDropbox();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t}).addClass('-Handled_DropdownButton')\r\n}\r\n\r\nfunction bindAddAvatar($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.AddAvatar').not('.-Handled_AddAvatar').on('click', function() {\r\n\t\tvar $wrapper = $(this).closest('.AddAvatarWrapper'),\r\n\t\t\t$collection = $wrapper.find('.AvatarsCollection'),\r\n\t\t\t$favored_count = $wrapper.find('.FavoredCount'),\r\n\t\t\t$avatars = $collection.find('.avatar'),\r\n\t\t\tamount = $avatars.length;\r\n\t\t\r\n\t\tif ($collection.data('max_amount') >= amount) {\r\n\t\t\tif ($collection.hasClass('-subscribed')) {\r\n\t\t\t\t$collection.removeClass('-subscribed');\r\n\t\t\t\t$collection.width(amount == 1 ? 0 : ($avatars.outerWidth() * (amount - 1)) - (6 * (amount - 2)));\r\n\t\t\t} else {\r\n\t\t\t\t$collection.addClass('-subscribed');\r\n\t\t\t\t$collection.width(($avatars.outerWidth() * amount) - (6 * (amount - 1)));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif ($favored_count.length) {\r\n\t\t\t\tvar current_count = parseInt($favored_count.text());\r\n\t\t\t\tif ($collection.hasClass('-subscribed')) {\r\n\t\t\t\t\t$favored_count.text(current_count - 1);\r\n\t\t\t\t\tif (current_count - 1 <= 0) {\r\n\t\t\t\t\t\t$favored_count.parent().addClass('-cast');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$favored_count.text(current_count + 1);\r\n\t\t\t\t\t$favored_count.parent().removeClass('-cast');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$collection.toggleClass('-shift -subscribed');\r\n\t\t}\r\n\t}).addClass('-Handled_AddAvatar');\r\n}\r\n\r\nfunction bindFileLoadButton($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.FileLoadButton').not('.-Handled_FileLoadButton').click(function(e) {\r\n\t\tvar $this = $(this);\r\n\t\t$this.children('input').get(0).click();\r\n\t}).addClass('-Handled_FileLoadButton');\r\n}\r\n\r\nfunction bindCollapsing($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.CollapsingButton').each(function() {\r\n\t\tvar $button = $(this),\r\n\t\t\t$wrapper = $button.siblings('.CollapsingWrapper'),\r\n\t\t\t$content = $wrapper.children(),\r\n\t\t\tdefault_height = $wrapper.data('defaultHeight') < $content.height() ? $wrapper.data('defaultHeight') : $content.height();\r\n\t\t\r\n\t\tfunction toggleCollapsing() {\r\n\t\t\tif ($wrapper.hasClass('-opened')) {\r\n\t\t\t\t$wrapper.height(default_height);\r\n\t\t\t\t$wrapper.on('click.toggleCollapsing', toggleCollapsing);\r\n\t\t\t} else {\r\n\t\t\t\t$wrapper.height($content.outerHeight());\r\n\t\t\t\t$wrapper.off('click.toggleCollapsing');\r\n\t\t\t}\r\n\t\t\t$wrapper.toggleClass('-opened');\r\n\t\t}\r\n\t\t\r\n\t\tif (!$wrapper.hasClass('-opened')) {\r\n\t\t\t$wrapper.on('click.toggleCollapsing', toggleCollapsing);\r\n\t\t\tif ($wrapper.height() < default_height) {\r\n\t\t\t\t$wrapper.height(default_height);\r\n\t\t\t}\r\n\t\t}\r\n\t\t$button.on('click.toggleCollapsing', toggleCollapsing);\r\n\t})\r\n}\r\n\r\nfunction bindPageLinks($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.Link').not('.-Handled_Link').on('click.pageRender', function(e) {\r\n\t\tvar $this = $(this);\r\n\t\tif ($this.hasClass(__C.CLASSES.DISABLED)) return true;\r\n\t\tif (e.which == 1) {\r\n\t\t\te.preventDefault();\r\n\t\t\t__APP.changeState($this.attr('href'));\r\n\t\t}\r\n\t}).addClass('-Handled_Link');\r\n}\r\n\r\nfunction unbindPageLinks($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.Link').removeClass('-Handled_Link').off('click.pageRender');\r\n}\r\n\r\n/**\r\n * Changes form unit`s state to error\r\n * @param {jQuery} $unit\r\n */\r\nfunction handleErrorField($unit) {\r\n\tif (!$unit instanceof jQuery) {\r\n\t\thandleErrorField($($unit));\r\n\t} else if (!$unit.is('.form_unit')) {\r\n\t\thandleErrorField($unit.closest('.form_unit'));\r\n\t} else {\r\n\t\tif (!$unit.closest('form_unit').hasClass('-status_error')) {\r\n\t\t\tvar $input = $unit.find('input, select, textarea');\r\n\t\t\t$unit\r\n\t\t\t\t.toggleStatus('error')\r\n\t\t\t\t.off('input.clear_error change.clear_error')\r\n\t\t\t\t.one('input.clear_error change.clear_error', function() {\r\n\t\t\t\t\t$unit.off('input.clear_error change.clear_error').toggleStatus('error');\r\n\t\t\t\t\t$input.off('blur.clear_error');\r\n\t\t\t\t});\r\n\t\t\t$input\r\n\t\t\t\t.off('blur.clear_error')\r\n\t\t\t\t.one('blur.clear_error', function() {\r\n\t\t\t\t\tif ($(this).val() !== \"\") {\r\n\t\t\t\t\t\t$unit.trigger('input.clear_error');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction toDataUrl(url, callback) {\r\n\tvar xhr = new XMLHttpRequest();\r\n\txhr.responseType = 'blob';\r\n\txhr.onload = function() {\r\n\t\tvar reader = new FileReader();\r\n\t\treader.onloadend = function() {\r\n\t\t\tcallback(reader.result);\r\n\t\t};\r\n\t\treader.readAsDataURL(xhr.response);\r\n\t};\r\n\txhr.open('GET', url);\r\n\txhr.send();\r\n}\r\n\r\nfunction showNotifier(response) {\r\n\t$.notify({\r\n\t\t'message': response.text,\r\n\t\t'pos': response.pos ? response.pos : 'top-right',\r\n\t\t'status': response.status ? 'success' : 'danger'\r\n\t});\r\n}\r\n\r\n\r\n/* OLD CODE */\r\n\r\nfunction showSettingsModal() {\r\n\tvar $modal = $('#settings-modal');\r\n\t$modal.remove();\r\n\t\r\n\t$.ajax({\r\n\t\turl: '/api/v1/users/me/settings',\r\n\t\ttype: 'GET',\r\n\t\tsuccess: function(res) {\r\n\t\t\t$modal = tmpl('settings-modal', res.data);\r\n\t\t\t$modal\r\n\t\t\t\t.appendTo($('body'))\r\n\t\t\t\t.on('shown.bs.modal', function() {\r\n\t\t\t\t\tif (res.data.hasOwnProperty('show_to_friends')) {\r\n\t\t\t\t\t\t$modal.find('.show-to-friends').prop('checked', res.data.show_to_friends);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res.data.hasOwnProperty('notify_in_browser')) {\r\n\t\t\t\t\t\t$modal.find('.notify-in-browser').prop('checked', res.data.notify_in_browser);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$modal.find('.notify-in-browser').on('change', function() {\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tif ($this.prop('checked')) {\r\n\t\t\t\t\t\t\tif (Notify.needsPermission) {\r\n\t\t\t\t\t\t\t\tNotify.requestPermission(function() {\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\t$this.prop('checked', false);\r\n\t\t\t\t\t\t\t\t\tshowNotifier({\r\n\t\t\t\t\t\t\t\t\t\tstatus: false,\r\n\t\t\t\t\t\t\t\t\t\ttext: 'Мы не можем включить уведомления в браузере. Вы запретили их для нас :('\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.modal();\r\n\t\t\t$modal\r\n\t\t\t\t.find('.save-settings-btn')\r\n\t\t\t\t.off('click')\r\n\t\t\t\t.on('click', function() {\r\n\t\t\t\t\tvar _data = {};\r\n\t\t\t\t\t$modal.find('input').each(function() {\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t_data[$this.attr('name')] = $this.prop('checked');\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tPace.ignore(function() {\r\n\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\turl: '/api/v1/users/me/settings',\r\n\t\t\t\t\t\t\ttype: 'PUT',\r\n\t\t\t\t\t\t\tdata: _data\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modal.modal('hide');\r\n\t\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getFriendsList($friends_right_list, cb) {\r\n\t$.ajax({\r\n\t\turl: '/api/v1/users/friends?page=0&length=500',\r\n\t\tsuccess: function(res) {\r\n\t\t\tif (res.data.length == 0) {\r\n\t\t\t\t$('.no-friends-block').removeClass(__C.CLASSES.HIDDEN);\r\n\t\t\t\t$('.friends-right-bar, .friends-main-content, .one-friend-profile').addClass(__C.CLASSES.HIDDEN);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t$friends_right_list.find('.friends-list').empty();\r\n\t\t\t$friends_right_list.removeClass(__C.CLASSES.HIDDEN);\r\n\t\t\ttmpl('friend-item', res.data, $friends_right_list.find('.friends-list'));\r\n\t\t\t$friends_right_list.find('.friends-count').text(res.data.length);\r\n\t\t\tbindPageLinks($friends_right_list);\r\n\t\t\tif ($friends_right_list.height() > window.innerHeight - 200) {\r\n\t\t\t\t$friends_right_list.find('.friends-list').slimscroll({\r\n\t\t\t\t\theight: window.innerHeight - 200,\r\n\t\t\t\t\twidth: '100%'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (cb) cb(res);\r\n\t\t}\r\n\t});\r\n}","/**\r\n * @typedef {object} AJAXData\r\n * @property {(Array|string|undefined)} [fields]\r\n * @property {(string|undefined)} [format=json] Sets the response format. Can be xml or json. Default: json\r\n * @property {(boolean|undefined)} [download=false] If flag is TRUE server will set additional headers to make response downloadble in browser. Default: false\r\n * @property {(boolean|undefined)} [nude_data=false] If nude_data is TRUE server response with only data, without status code and description. Default: false\r\n * @property {(number|undefined)} [offset] Use offset to set how many elements you want to skip. Default: 0\r\n * @property {(number|undefined)} [length] Sets the items count server will return in response. Default: 100\r\n * @property {(string|undefined)} [order_by]\r\n */\r\n/**\r\n * @typedef {function(({}|Array<{}>))} AJAXCallback\r\n */\r\n/**\r\n *\r\n * @interface\r\n */\r\nfunction EntityInterface() {}\r\n/**\r\n *\r\n * @param {(Array|object)} data\r\n * @returns {EntityInterface}\r\n */\r\nEntityInterface.prototype.setData = function(data) {};","/**\r\n * @requires EntityInterface.js\r\n */\r\n/**\r\n *\r\n * @abstract\r\n * @implements EntityInterface\r\n */\r\nfunction OneEntity() {}\r\n/**\r\n *\r\n * @param {(Array|object)} data\r\n * @returns {OneEntity}\r\n */\r\nOneEntity.prototype.setData = function(data) {\r\n\tvar field;\r\n\tif (Array.isArray(data)) {\r\n\t\tdata = data[0];\r\n\t}\r\n\tfor (field in data) {\r\n\t\tif (this[field] instanceof EntitiesCollection) {\r\n\t\t\tthis[field].setData(data[field]);\r\n\t\t} else {\r\n\t\t\tthis[field] = data[field];\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};","/**\r\n * @requires Class.OneEntity.js\r\n */\r\n/**\r\n *\r\n * @abstract\r\n * @augments Array\r\n * @implements EntityInterface\r\n */\r\nfunction EntitiesCollection() {}\r\nEntitiesCollection.extend(Array);\r\nEntitiesCollection.prototype.collection_of = OneEntity;\r\n/**\r\n *\r\n * @param {(Array|object)} data\r\n * @returns {EntitiesCollection}\r\n */\r\nEntitiesCollection.prototype.setData = function(data) {\r\n\tdata = data instanceof Array ? data : [data];\r\n\tthis.push.apply(this, data);\r\n\treturn this;\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} id\r\n * @returns {(OneEntity|null)}\r\n */\r\nEntitiesCollection.prototype.getByID = function(id) {\r\n\tfor (var i = 0; i < this.length; i++) {\r\n\t\tif (this[i].id == id) {\r\n\t\t\treturn this[i];\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} id\r\n * @returns {boolean}\r\n */\r\nEntitiesCollection.prototype.has = function(id) {\r\n\treturn this.getByID(id) instanceof OneEntity;\r\n};\r\n/**\r\n *\r\n * @param {...object} element\r\n * @returns {number}\r\n */\r\nEntitiesCollection.prototype.push = function(element) {\r\n\tfor (var i = 0; i < arguments.length; i++) {\r\n\t\tif (!arguments[i].id || (arguments[i].id && !this.has(arguments[i].id))) {\r\n\t\t\tthis[this.length++] = arguments[i] instanceof this.collection_of ? arguments[i] : (new this.collection_of()).setData(arguments[i]);\r\n\t\t}\r\n\t}\r\n\treturn this.length;\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} id\r\n * @returns {Array<OneEntity>}\r\n */\r\nEntitiesCollection.prototype.remove = function(id) {\r\n\tif (this.has(id)) {\r\n\t\treturn this.splice(this.indexOf(this.getByID(id)), 1);\r\n\t}\r\n\treturn [];\r\n};","/**\r\n * @requires ../Class.OneEntity.js\r\n */\r\n/**\r\n *\r\n * @abstract\r\n * @augments OneEntity\r\n */\r\nfunction OneActivity() {\r\n\tthis.stat_type_id = 0;\r\n\tthis.event_id = 0;\r\n\tthis.event = new OneEvent(this.event_id);\r\n\tthis.organization_id = 0;\r\n\tthis.organization = new OneOrganization(this.organization_id);\r\n\tthis.user_id = 0;\r\n\tthis.user = new OneUser(this.user_id);\r\n\tthis.entity = '';\r\n\tthis.type_code = '';\r\n\tthis.created_at = 0;\r\n}\r\nOneActivity.extend(OneEntity);","/**\r\n * @requires ../Class.EntitiesCollection.js\r\n * @requires Class.OneActivity.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EntitiesCollection\r\n */\r\nfunction ActivitiesCollection() {}\r\nActivitiesCollection.extend(EntitiesCollection);\r\nActivitiesCollection.prototype.collection_of = OneActivity;\r\n/**\r\n *\r\n * @param {(string|number)} user_id\r\n * @param {AJAXData} data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nActivitiesCollection.fetchUserActions = function(user_id, data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/users/' + user_id + '/actions', data, success);\r\n};\r\n/**\r\n *\r\n * @param {AJAXData} data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nActivitiesCollection.fetchFriendsActions = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/users/feed', data, success);\r\n};\r\n/**\r\n *\r\n * @param {(Array|string)} [fields]\r\n * @param {(number|string)} [length]\r\n * @param {string} [order_by]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nActivitiesCollection.prototype.fetchUserActions = function(fields, length, order_by, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: fields,\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t};\r\n\tif (order_by) {\r\n\t\tajax_data.order_by = order_by;\r\n\t}\r\n\treturn this.constructor.fetchUserActions(ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(Array|string)} [fields]\r\n * @param {(number|string)} [length]\r\n * @param {string} [order_by]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nActivitiesCollection.prototype.fetchFriendsActions = function(fields, length, order_by, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: fields,\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t};\r\n\tif (order_by) {\r\n\t\tajax_data.order_by = order_by;\r\n\t}\r\n\treturn this.constructor.fetchFriendsActions(ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.OneEntity.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments OneEntity\r\n * @param {(string|number)} [category_id]\r\n * @param {boolean} [is_loading_continuous]\r\n */\r\nfunction OneCategory(category_id, is_loading_continuous) {\r\n\tthis.id = category_id ? category_id : 0;\r\n\tthis.name = '';\r\n\tthis.order_position = 0;\r\n\tthis.organizations = new OrganizationsCollection();\r\n\t\r\n\tif (category_id && is_loading_continuous) {\r\n\t\tthis.loading = true;\r\n\t\tthis.fetchCategory([], function() {\r\n\t\t\tthis.loading = false;\r\n\t\t\t$(window).trigger('fetch.OneCategory');\r\n\t\t});\r\n\t}\r\n}\r\nOneCategory.extend(OneEntity);\r\n/**\r\n *\r\n * @param {(string|number)} category_id\r\n * @param {AJAXData} data\r\n * @param {AJAXCallback} [success]\r\n * @return {jqXHR}\r\n */\r\nOneCategory.fetchCategory = function(category_id, data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/organizations/types', $.extend({}, data, {id: category_id}), success);\r\n};\r\n/**\r\n *\r\n * @param {(Array|string)} fields\r\n * @param {AJAXCallback} [success]\r\n * @return {jqXHR}\r\n */\r\nOneCategory.prototype.fetchCategory = function(fields, success) {\r\n\tvar self = this;\r\n\treturn this.constructor.fetchCategory(self.id, fields, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data[0]);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.EntitiesCollection.js\r\n * @requires Class.OneCategory.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EntitiesCollection\r\n */\r\nfunction CategoriesCollection() {}\r\nCategoriesCollection.extend(EntitiesCollection);\r\nCategoriesCollection.prototype.collection_of = OneCategory;\r\n/**\r\n *\r\n * @param {AJAXData} data\r\n * @param {AJAXCallback} [success]\r\n */\r\nCategoriesCollection.fetchCategories = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/organizations/types', data, success);\r\n};\r\n/**\r\n *\r\n * @param {AJAXData} data\r\n * @param {(number|string)} [length]\r\n * @param {AJAXCallback} [success]\r\n */\r\nCategoriesCollection.prototype.fetchCategories = function(data, length, success) {\r\n\tvar self = this,\r\n\t\tajax_data = $.extend({}, data, {\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t});\r\n\treturn this.constructor.fetchCategories(ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {AJAXData} categories_ajax_data\r\n * @param {AJAXData} orgs_ajax_data\r\n * @param {(number|string)} [length]\r\n * @param {AJAXCallback} [success]\r\n */\r\nCategoriesCollection.prototype.fetchCategoriesWithOrganizations = function(categories_ajax_data, orgs_ajax_data, length, success) {\r\n\tvar self = this,\r\n\t\tajax_data = $.extend({}, categories_ajax_data, {\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t}),\r\n\t\torg_field = 'organizations' + JSON.stringify(__APP.SERVER.validateData(orgs_ajax_data));\r\n\tif (!ajax_data.fields) {\r\n\t\tajax_data.fields = [];\r\n\t} else if (!Array.isArray(ajax_data.fields)) {\r\n\t\tajax_data.fields = ajax_data.fields.split(',');\r\n\t}\r\n\tajax_data.fields.push(org_field);\r\n\treturn this.constructor.fetchCategories(ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.OneEntity.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments OneEntity\r\n */\r\nfunction OneDate() {\r\n\tthis.event_date = '';\r\n\tthis.id = 0;\r\n\tthis.start_time = '';\r\n\tthis.end_time = '';\r\n\tthis.event_id = 0;\r\n\tthis.organization_id = 0;\r\n\tthis.events_count = 0;\r\n\tthis.favored_count = 0;\r\n}\r\nOneDate.extend(OneEntity);","/**\r\n * @requires ../Class.EntitiesCollection.js\r\n * @requires Class.OneDate.js\r\n */\r\n/**\r\n * @typedef {AJAXData} DatesCollectionAJAXData\r\n * @property {string} [month]\r\n * @property {string} [since]\r\n * @property {string} [till]\r\n * @property {(number|string)} [organization_id]\r\n * @property {(number|string)} [event_id]\r\n * @property {boolean} [unique]\r\n * @property {boolean} [my]\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EntitiesCollection\r\n */\r\nfunction DatesCollection() {}\r\nDatesCollection.prototype.collection_of = OneDate;\r\nDatesCollection.extend(EntitiesCollection);\r\n/**\r\n *\r\n * @param {DatesCollectionAJAXData} ajax_data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nDatesCollection.fetchDates = function(ajax_data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/events/dates', ajax_data, success);\r\n};","/**\r\n * @requires ../Class.OneEntity.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments OneEntity\r\n * @param {(string|number)} [event_id]\r\n * @param {boolean} [is_loading_continuous]\r\n */\r\nfunction OneEvent(event_id, is_loading_continuous) {\r\n\tthis.id = event_id ? event_id : 0;\r\n\tthis.title = '';\r\n\tthis.description = '';\r\n\tthis.location = '';\r\n\tthis.detail_info_url = '';\r\n\tthis.can_edit = false;\r\n\tthis.registration_required = false;\r\n\tthis.registration_till = '';\r\n\tthis.organization_id = 0;\r\n\tthis.organization_short_name = '';\r\n\tthis.image_vertical_url = '';\r\n\tthis.image_horizontal_url = '';\r\n\tthis.image_horizontal_large_url = '';\r\n\tthis.organization_logo_small_url = '';\r\n\tthis.is_free = false;\r\n\tthis.min_price = 0;\r\n\tthis.first_event_date = null;\r\n\tthis.last_event_date = null;\r\n\tthis.nearest_event_date = null;\r\n\tthis.is_same_time = false;\r\n\tthis.dates = new DatesCollection();\r\n\tthis.tags = new TagsCollection();\r\n\tthis.notifications = [];\r\n\tthis.favored = new UsersCollection();\r\n\tthis.favored_users_count = 0;\r\n\tthis.is_favorite = false;\r\n\tthis.canceled = false;\r\n\tthis.loading = false;\r\n\t\r\n\tif (event_id && is_loading_continuous) {\r\n\t\tthis.loading = true;\r\n\t\tthis.fetchEvent([], function() {\r\n\t\t\tthis.loading = false;\r\n\t\t\t$(window).trigger('fetch.OneEvent');\r\n\t\t});\r\n\t}\r\n}\r\nOneEvent.extend(OneEntity);\r\n/**\r\n * @const\r\n * @enum {string}\r\n */\r\nOneEvent.STATUS = {\r\n\tCANCEL: 'cancel',\r\n\tBRING_BACK: 'bring_back',\r\n\tHIDE: 'hide',\r\n\tSHOW: 'show'\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} event_id\r\n * @param {(string|Array)} [fields]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.fetchEvent = function(event_id, fields, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/events/' + event_id, fields || (Array.isArray(fields) && fields.length) ? {fields: fields} : {}, success);\r\n};\r\n/**\r\n * @typedef {function({\r\n *   event_id: number\r\n * })} OneEventCreateEventCallback\r\n */\r\n/**\r\n * @typedef {object} OneEventCreateEventData\r\n * @property {string} [title]\r\n * @property {string} [description]\r\n * @property {string} [location]\r\n * @property {integer} [organization_id]\r\n * @property {object} [location_object]\r\n * @property {number} [location_object.latitude]\r\n * @property {number} [location_object.longitude]\r\n * @property {number} [longitude]\r\n * @property {number} [latitude]\r\n * @property {string} [image_horizontal]\r\n * @property {string} [detail_info_url]\r\n * @property {DatesCollection} [dates]\r\n * @property {Array<(string|number)>} [tags]\r\n */\r\n/**\r\n *\r\n * @param {OneEventCreateEventData} new_event_data\r\n * @param {OneEventCreateEventCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.createEvent = function(new_event_data, success) {\r\n\treturn __APP.SERVER.addData('/api/v1/events/', JSON.stringify(new_event_data), success);\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} event_id\r\n * @param {OneEventCreateEventData} data\r\n * @param {OneEventCreateEventCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.updateEvent = function(event_id, data, success) {\r\n\treturn __APP.SERVER.updateData('/api/v1/events/' + event_id, JSON.stringify(data), success);\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} event_id\r\n * @param {(OneEvent.STATUS|Array<OneEvent.STATUS>)} status\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.changeEventStatus = function(event_id, status, success) {\r\n\tvar data = {};\r\n\tstatus = Array.isArray(status) ? status : [status];\r\n\tstatus.forEach(function(el) {\r\n\t\tswitch (el) {\r\n\t\t\tcase OneEvent.STATUS.CANCEL: {\r\n\t\t\t\tdata.canceled = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase OneEvent.STATUS.BRING_BACK: {\r\n\t\t\t\tdata.canceled = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase OneEvent.STATUS.HIDE: {\r\n\t\t\t\tdata.hidden = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase OneEvent.STATUS.SHOW: {\r\n\t\t\t\tdata.hidden = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\treturn __APP.SERVER.updateData('/api/v1/events/' + event_id + '/status', data, function() {\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} event_id\r\n * @param {function} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.addFavored = function(event_id, success) {\r\n\treturn __APP.SERVER.addData('/api/v1/events/' + event_id + '/favorites', {}, success);\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} event_id\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.deleteFavored = function(event_id, success) {\r\n\treturn __APP.SERVER.deleteData('/api/v1/events/' + event_id + '/favorites', {}, success);\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} event_id\r\n * @param {string} notification_type\r\n * @param {function} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.addEventNotification = function(event_id, notification_type, success) {\r\n\treturn __APP.SERVER.addData('/api/v1/events/' + event_id + '/notifications', {notification_type: notification_type}, success);\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} event_id\r\n * @param {string} notification_uuid\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.deleteEventNotification = function(event_id, notification_uuid, success) {\r\n\treturn __APP.SERVER.deleteData('/api/v1/events/' + event_id + '/notifications' + notification_uuid, {}, success);\r\n};\r\n/**\r\n *\r\n * @param {(string|Array)} fields\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.prototype.fetchEvent = function(fields, success) {\r\n\tvar self = this;\r\n\treturn this.constructor.fetchEvent(self.id, fields, function(data) {\r\n\t\tself.setData(data[0]);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data[0]);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {OneEventCreateEventData} data\r\n * @param {OneEventCreateEventCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.prototype.createEvent = function(data, success) {\r\n\tvar self = this;\r\n\treturn this.constructor.createEvent(data, function(response_data) {\r\n\t\tself.setData(data);\r\n\t\tself.id = response_data.event_id;\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {OneEventCreateEventData} data\r\n * @param {OneEventCreateEventCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.prototype.updateEvent = function(data, success) {\r\n\tvar self = this;\r\n\treturn this.constructor.updateEvent(self.id, data, function(response_data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(OneEvent.STATUS|Array<OneEvent.STATUS>)} status\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.prototype.changeEventStatus = function(status, success) {\r\n\tvar self = this;\r\n\treturn this.constructor.changeEventStatus(self.id, status, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {string} notification_type\r\n * @param {function} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.prototype.addNotification = function(notification_type, success) {\r\n\treturn this.constructor.addEventNotification(this.id, notification_type, success);\r\n};\r\n/**\r\n *\r\n * @param {string} notification_uuid\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneEvent.prototype.deleteNotification = function(notification_uuid, success) {\r\n\treturn this.constructor.deleteEventNotification(this.id, notification_uuid, success);\r\n};","/**\r\n * @requires ../Class.EntitiesCollection.js\r\n * @requires Class.OneEvent.js\r\n */\r\n/**\r\n * @typedef {AJAXData} EventsCollectionAJAXData\r\n * @property {string} [date]\r\n * @property {string} [query]\r\n * @property {boolean} [statistics]\r\n * @property {boolean} [canceled_shown]\r\n * @property {boolean} [future]\r\n * @property {boolean} [is_delayed]\r\n * @property {boolean} [is_canceled]\r\n * @property {string} [since]\r\n * @property {string} [till]\r\n * @property {string} [changed_since]\r\n * @property {string} [tags]\r\n * @property {string} [title]\r\n * @property {boolean} [strict]\r\n * @property {(string|number)} [organization_id]\r\n * @property {string} [bounds]\r\n * @property {string} [point]\r\n */\r\n/**\r\n * @typedef {function(Array<OneEvent>)} EventsCollectionAJAXCallback\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EntitiesCollection\r\n */\r\nfunction EventsCollection() {}\r\nEventsCollection.extend(EntitiesCollection);\r\nEventsCollection.prototype.collection_of = OneEvent;\r\n/**\r\n * @const\r\n * @enum {string}\r\n */\r\nEventsCollection.KIND = {\r\n\tMY: 'my',\r\n\tFAVORED: 'favored',\r\n\tRECOMMENDED: 'recommended'\r\n};\r\n/**\r\n *\r\n * @param {EventsCollectionAJAXData} data\r\n * @param {EventsCollectionAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nEventsCollection.fetchEvents = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/events/', data, success);\r\n};\r\n/**\r\n *\r\n * @param {EventsCollectionAJAXData} data\r\n * @param {EventsCollectionAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nEventsCollection.fetchMyEvents = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/events/my', data, success);\r\n};\r\n/**\r\n *\r\n * @param {EventsCollectionAJAXData} data\r\n * @param {EventsCollectionAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nEventsCollection.fetchFavoredEvents = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/events/favorites', data, success);\r\n};\r\n/**\r\n *\r\n * @param {EventsCollectionAJAXData} data\r\n * @param {EventsCollectionAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nEventsCollection.fetchRecommendedEvents = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/events/recommendations', data, success);\r\n};\r\n/**\r\n *\r\n * @param {(number|string)} organization_id\r\n * @param {EventsCollectionAJAXData} data\r\n * @param {EventsCollectionAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nEventsCollection.fetchOrganizationsEvents = function(organization_id, data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/events/', $.extend({}, data, {organization_id: organization_id}), success);\r\n};\r\n/**\r\n *\r\n * @param {EventsCollection.KIND} [kind]\r\n * @param {EventsCollectionAJAXData} [data]\r\n * @param {(number|string)} [length]\r\n * @param {EventsCollectionAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nEventsCollection.prototype.fetchEvents = function(kind, data, length, success) {\r\n\tvar self = this,\r\n\t\tmethod_name = 'fetchEvents',\r\n\t\tajax_data = $.extend({}, data, {\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t});\r\n\tswitch (kind) {\r\n\t\tdefault: {\r\n\t\t\tmethod_name = 'fetchEvents';\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase EventsCollection.KIND.MY: {\r\n\t\t\tmethod_name = 'fetchMyEvents';\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase EventsCollection.KIND.FAVORED: {\r\n\t\t\tmethod_name = 'fetchFavoredEvents';\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase EventsCollection.KIND.RECOMMENDED: {\r\n\t\t\tmethod_name = 'fetchRecommendedEvents';\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn this.constructor[method_name](ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(Array|string)} [fields]\r\n * @param {(number|string)} [length]\r\n * @param {EventsCollectionAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nEventsCollection.prototype.fetchFeed = function(fields, length, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: fields,\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t};\r\n\treturn this.constructor.fetchEvents(ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(number|string)} organization_id\r\n * @param {EventsCollectionAJAXData} [data]\r\n * @param {(number|string)} [length]\r\n * @param {EventsCollectionAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nEventsCollection.prototype.fetchOrganizationsEvents = function(organization_id, data, length, success) {\r\n\tvar self = this,\r\n\t\tajax_data = $.extend({}, data, {\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t});\r\n\treturn this.constructor.fetchOrganizationsEvents(organization_id, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(number|string)} organization_id\r\n * @param {(Array|string)} [fields]\r\n * @param {(number|string)} [length]\r\n * @param {EventsCollectionAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nEventsCollection.prototype.fetchOrganizationsFeed = function(organization_id, fields, length, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: fields,\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t};\r\n\treturn this.constructor.fetchOrganizationsEvents(organization_id, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n */\r\nfunction ActualEventsCollection() {}\r\nActualEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @override\r\n */\r\nActualEventsCollection.fetchEvents = function(data, success) {\r\n\tdata.fields = data.fields ? Array.isArray(data.fields) ? data.fields : data.fields.split(',') : [];\r\n\tdata.fields.push('actuality');\r\n\tdata.future = true;\r\n\tdata.order_by = '-actuality';\r\n\treturn EventsCollection.fetchMyEvents(data, success);\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n */\r\nfunction CanceledEventsCollection() {}\r\nCanceledEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @override\r\n */\r\nCanceledEventsCollection.fetchOrganizationsEvents = function(organization_id, data, success) {\r\n\tdata.fields = data.fields ? Array.isArray(data.fields) ? data.fields : data.fields.split(',') : [];\r\n\tdata.fields.push('updated_at');\r\n\tdata.is_canceled = true;\r\n\tdata.order_by = '-updated_at';\r\n\treturn EventsCollection.fetchOrganizationsEvents(organization_id, data, success);\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n * @param {string} date\r\n */\r\nfunction DayEventsCollection(date) {\r\n\tif (!date)\r\n\t\tthrow Error('DayEventsCollection must have date parameter');\r\n\tthis.date = date;\r\n}\r\nDayEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @param {string} date\r\n * @param {EventsCollectionAJAXData} data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nDayEventsCollection.fetchEvents = function(date, data, success) {\r\n\tdata.future = false;\r\n\tdata.date = date;\r\n\treturn EventsCollection.fetchMyEvents(data, success);\r\n};\r\n/**\r\n *\r\n * @override\r\n */\r\nDayEventsCollection.prototype.fetchFeed = function(fields, length, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: fields,\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t};\r\n\treturn this.constructor.fetchEvents(this.date, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n */\r\nfunction DelayedEventsCollection() {}\r\nDelayedEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @override\r\n */\r\nDelayedEventsCollection.fetchOrganizationsEvents = function(organization_id, data, success) {\r\n\tdata.fields = data.fields ? Array.isArray(data.fields) ? data.fields : data.fields.split(',') : [];\r\n\tdata.fields.push('public_at');\r\n\tdata.is_delayed = true;\r\n\tdata.is_canceled = false;\r\n\tdata.order_by = 'public_at';\r\n\treturn EventsCollection.fetchOrganizationsEvents(organization_id, data, success);\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n */\r\nfunction FavoredEventsCollection() {}\r\nFavoredEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @override\r\n */\r\nFavoredEventsCollection.fetchEvents = function(data, success) {\r\n\tdata.future = true;\r\n\treturn EventsCollection.fetchFavoredEvents(data, success);\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n */\r\nfunction FriendsEventsCollection() {}\r\nFriendsEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @override\r\n */\r\nFriendsEventsCollection.fetchEvents = function(data, success) {\r\n\tdata.fields = data.fields ? Array.isArray(data.fields) ? data.fields : data.fields.split(',') : [];\r\n\tdata.fields.push('favored_friends_count');\r\n\tdata.future = true;\r\n\tdata.order_by = '-favored_friends_count';\r\n\treturn EventsCollection.fetchMyEvents(data, success);\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n */\r\nfunction FutureEventsCollection() {}\r\nFutureEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @override\r\n */\r\nFutureEventsCollection.fetchOrganizationsEvents = function(organization_id, data, success) {\r\n\tdata.future = true;\r\n\tdata.order_by = 'nearest_event_date';\r\n\treturn EventsCollection.fetchOrganizationsEvents(organization_id, data, success);\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n */\r\nfunction PastEventsCollection() {}\r\nPastEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @override\r\n */\r\nPastEventsCollection.fetchOrganizationsEvents = function(organization_id, data, success) {\r\n\tdata.till = moment().format(__C.DATE_FORMAT);\r\n\tdata.order_by = '-last_event_date';\r\n\treturn EventsCollection.fetchOrganizationsEvents(organization_id, data, success);\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n */\r\nfunction RecommendedEventsCollection() {}\r\nRecommendedEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @override\r\n */\r\nRecommendedEventsCollection.fetchEvents = function(data, success) {\r\n\tdata.future = true;\r\n\tdata.order_by = '-rating';\r\n\treturn EventsCollection.fetchRecommendedEvents(data, success);\r\n};","/**\r\n * @requires Class.EventsCollection.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EventsCollection\r\n */\r\nfunction TimelineEventsCollection() {}\r\nTimelineEventsCollection.extend(EventsCollection);\r\n/**\r\n *\r\n * @override\r\n */\r\nTimelineEventsCollection.fetchEvents = function(data, success) {\r\n\tdata.future = true;\r\n\treturn EventsCollection.fetchMyEvents(data, success);\r\n};","/**\r\n * @requires ../Class.OneEntity.js\r\n */\r\n/**\r\n * @typedef {object} Privilege\r\n * @property {number} role_id\r\n * @property {OneUser.ROLE} name\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments OneEntity\r\n * @param {(string|number)} [organization_id]\r\n * @param {boolean} [is_loading_continuous]\r\n */\r\nfunction OneOrganization(organization_id, is_loading_continuous) {\r\n\tthis.id = organization_id || 0;\r\n\tthis.short_name = '';\r\n\tthis.description = '';\r\n\tthis.img_url = '';\r\n\tthis.img_small_url = '';\r\n\tthis.background_img_url = '';\r\n\tthis.background_medium_img_url = '';\r\n\tthis.type_id = 0;\r\n\tthis.type_name = '';\r\n\tthis.site_url = '';\r\n\tthis.default_address = '';\r\n\tthis.is_subscribed = false;\r\n\tthis.subscribed_count = 0;\r\n\tthis.subscribed = new UsersCollection();\r\n\t/**\r\n\t * @type {Array<Privilege>}\r\n\t */\r\n\tthis.privileges = [];\r\n\tthis.role = '';\r\n\tthis.staff = new UsersCollection();\r\n\t\r\n\tif (organization_id && is_loading_continuous) {\r\n\t\tthis.loading = true;\r\n\t\tthis.fetchOrganization([], function() {\r\n\t\t\tthis.loading = false;\r\n\t\t\t$(window).trigger('fetch.OneOrganization');\r\n\t\t});\r\n\t}\r\n}\r\nOneOrganization.extend(OneEntity);\r\n/**\r\n *\r\n * @param {(string|number)} org_id\r\n * @param {(string|Array)} fields\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.fetchOrganization = function(org_id, fields, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/organizations/' + org_id, {fields: fields}, success);\r\n};\r\n/**\r\n * @typedef {AJAXData} OneOrganizationCreateOrganizationData\r\n * @property {string} [name]\r\n * @property {string} [short_name]\r\n * @property {string} [description]\r\n * @property {string} [site_url]\r\n * @property {string} [default_address]\r\n * @property {string} [vk_url]\r\n * @property {string} [facebook_url]\r\n * @property {string} [type_id]\r\n * @property {string} [background]\r\n * @property {string} [logo]\r\n * @property {string} [detail_info_url]\r\n * @property {string} [email]\r\n */\r\n/**\r\n * @typedef {function({\r\n *   organization_id: number\r\n * })} OneOrganizationCreateOrganizationCallback\r\n */\r\n/**\r\n *\r\n * @param {OneOrganizationCreateOrganizationData} new_organization_data\r\n * @param {OneOrganizationCreateOrganizationCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.createOrganization = function(new_organization_data, success) {\r\n\treturn __APP.SERVER.addData('/api/v1/organizations/', JSON.stringify(new_organization_data), success);\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} organization_id\r\n * @param {OneOrganizationCreateOrganizationData} organization_data\r\n * @param {OneOrganizationCreateOrganizationCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.updateOrganization = function(organization_id, organization_data, success) {\r\n\treturn __APP.SERVER.updateData('/api/v1/organizations/' + organization_id, JSON.stringify(organization_data), success);\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} org_id\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.subscribeOrganization = function(org_id, success) {\r\n\treturn __APP.SERVER.addData('/api/v1/organizations/' + org_id + '/subscriptions', {}, success);\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} org_id\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.unsubscribeOrganization = function(org_id, success) {\r\n\treturn __APP.SERVER.deleteData('/api/v1/organizations/' + org_id + '/subscriptions', {}, success);\r\n};\r\n/**\r\n *\r\n * @param {(string|Array)} fields\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.prototype.fetchOrganization = function(fields, success) {\r\n\tvar self = this;\r\n\treturn this.constructor.fetchOrganization(self.id, fields, function(data) {\r\n\t\tself.role = data[0].privileges ? OneUser.recognizeRole(data[0].privileges) : '';\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, self);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {OneOrganizationCreateOrganizationData} new_organization_data\r\n * @param {OneOrganizationCreateOrganizationCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.prototype.createOrganization = function(new_organization_data, success) {\r\n\tvar self = this;\r\n\treturn OneOrganization.createOrganization(new_organization_data, function(response_data) {\r\n\t\tself.setData(new_organization_data);\r\n\t\tself.id = response_data.organization_id;\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, self);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {OneOrganizationCreateOrganizationData} organization_data\r\n * @param {OneOrganizationCreateOrganizationCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.prototype.updateOrganization = function(organization_data, success) {\r\n\tvar self = this;\r\n\treturn OneOrganization.updateOrganization(self.id, organization_data, function(response_data) {\r\n\t\tself.setData(organization_data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, self);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.prototype.subscribe = function(success) {\r\n\tvar self = this;\r\n\treturn this.constructor.subscribeOrganization(this.id, function(data) {\r\n\t\tthis.is_subscribed = true;\r\n\t\tthis.subscribed_count++;\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneOrganization.prototype.unsubscribe = function(success) {\r\n\tvar self = this;\r\n\treturn this.constructor.unsubscribeOrganization(this.id, function(data) {\r\n\t\tthis.is_subscribed = false;\r\n\t\tthis.subscribed_count = this.subscribed_count ? this.subscribed_count - 1 : this.subscribed_count;\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.EntitiesCollection.js\r\n * @requires Class.OneOrganization.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EntitiesCollection\r\n */\r\nfunction OrganizationsCollection() {}\r\nOrganizationsCollection.extend(EntitiesCollection);\r\nOrganizationsCollection.prototype.collection_of = OneOrganization;\r\n/**\r\n *\r\n * @param {AJAXData} data\r\n * @param {AJAXCallback} [success]\r\n */\r\nOrganizationsCollection.fetchSubscribedOrganizations = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/organizations/subscriptions', data, success);\r\n};\r\n/**\r\n *\r\n * @param {(string|Array)} [roles]\r\n * @param {AJAXData} [data]\r\n * @param {AJAXCallback} [success]\r\n */\r\nOrganizationsCollection.fetchMyOrganizations = function(roles, data, success) {\r\n\troles = Array.isArray(roles) ? roles.join(',') : roles;\r\n\treturn __APP.SERVER.getData('/api/v1/organizations/', $.extend({}, data, {roles: roles}), success);\r\n};\r\n/**\r\n *\r\n * @param {AJAXData} data\r\n * @param {AJAXCallback} [success]\r\n */\r\nOrganizationsCollection.fetchRecommendations = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/organizations/recommendations', data, success);\r\n};\r\n/**\r\n *\r\n * @param {(Array|string)} [fields]\r\n * @param {(number|string)} [length]\r\n * @param {string} [order_by]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOrganizationsCollection.prototype.fetchSubscribedOrganizations = function(fields, length, order_by, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: fields,\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length,\r\n\t\t\torder_by: order_by || undefined\r\n\t\t};\r\n\treturn this.constructor.fetchSubscribedOrganizations(ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(Array<string>|string)} roles\r\n * @param {(Array<string>|string)} [fields]\r\n * @param {(number|string)} [length]\r\n * @param {string} [order_by]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOrganizationsCollection.prototype.fetchMyOrganizations = function(roles, fields, length, order_by, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: fields,\r\n\t\t\tlength: length,\r\n\t\t\toffset: this.length,\r\n\t\t\torder_by: order_by || undefined\r\n\t\t};\r\n\treturn OrganizationsCollection.fetchMyOrganizations(roles, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.OneEntity.js\r\n */\r\n/**\r\n * @typedef {function({\r\n *   [events]: Array<OneEvent>,\r\n *   [organizations]: Array<OneOrganization>\r\n * })} SearchResultsAJAXCallback\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments OneEntity\r\n * @param {string} query_string\r\n */\r\nfunction SearchResults(query_string) {\r\n\tthis.query_string = query_string;\r\n\tthis.events = new EventsCollection();\r\n\tthis.organizations = new OrganizationsCollection();\r\n}\r\nSearchResults.extend(OneEntity);\r\n/**\r\n *\r\n * @param {string} query_string\r\n * @returns {{ [q]: {string}, [tags]: {string} }}\r\n */\r\nSearchResults.sanitizeQueryVar = function(query_string) {\r\n\tvar data = {};\r\n\tif (query_string.indexOf('#') === 0) {\r\n\t\tdata.tags = query_string.replace('#', '');\r\n\t} else {\r\n\t\tdata.q = query_string;\r\n\t}\r\n\treturn data;\r\n};\r\n/**\r\n *\r\n * @param {string} query_string\r\n * @param {AJAXData} [ajax_data]\r\n * @param {SearchResultsAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nSearchResults.fetchEventsAndOrganizations = function(query_string, ajax_data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/search/', $.extend({}, SearchResults.sanitizeQueryVar(query_string), ajax_data), success);\r\n};\r\n/**\r\n *\r\n * @param {AJAXData} [events_ajax_data]\r\n * @param {function(organizations: Array<OneEvent>)} [success]\r\n * @returns {jqXHR}\r\n */\r\nSearchResults.prototype.fetchEvents = function(events_ajax_data, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: 'events' + JSON.stringify($.extend({}, __APP.SERVER.validateData(events_ajax_data), {offset: this.events.length}))\r\n\t\t};\r\n\t\r\n\treturn SearchResults.fetchEventsAndOrganizations(self.query_string, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data.events);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {AJAXData} [organizations_ajax_data]\r\n * @param {function(organizations: Array<OneOrganization>)} [success]\r\n * @returns {jqXHR}\r\n */\r\nSearchResults.prototype.fetchOrganizations = function(organizations_ajax_data, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: 'organizations' + JSON.stringify($.extend({}, __APP.SERVER.validateData(organizations_ajax_data), {offset: this.organizations.length}))\r\n\t\t};\r\n\t\r\n\treturn SearchResults.fetchEventsAndOrganizations(self.query_string, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data.organizations);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {AJAXData} [events_ajax_data]\r\n * @param {AJAXData} [organizations_ajax_data]\r\n * @param {SearchResultsAJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nSearchResults.prototype.fetchEventsAndOrganizations = function(events_ajax_data, organizations_ajax_data, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {fields: []};\r\n\tif (events_ajax_data) {\r\n\t\tajax_data.fields.push('events' + JSON.stringify($.extend({}, __APP.SERVER.validateData(events_ajax_data), {offset: this.events.length})));\r\n\t}\r\n\tif (organizations_ajax_data && !SearchResults.sanitizeQueryVar(self.query_string).tags) {\r\n\t\tajax_data.fields.push('organizations' + JSON.stringify($.extend({}, __APP.SERVER.validateData(organizations_ajax_data), {offset: this.organizations.length})));\r\n\t}\r\n\treturn SearchResults.fetchEventsAndOrganizations(self.query_string, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @typedef {object} StatisticsUnit\r\n * @property {number} time_value\r\n * @property {number} value\r\n */\r\n/**\r\n * @typedef {StatisticsUnit} StatisticsConversionUnit\r\n * @property {number} to\r\n * @property {number} with\r\n */\r\n/**\r\n * @typedef {object} StatisticsAudience\r\n * @property {Array<{name: {string}, count: {number}}>} devices\r\n * @property {Array<{gender: {?string}, count: {number}}>} gender\r\n */\r\n/**\r\n * @typedef {object} StatisticsStdData\r\n * @property {Statistics.SCALES} scale\r\n * @property {string} since\r\n * @property {string} till\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @implements EntityInterface\r\n */\r\nfunction Statistics() {\r\n\tthis.id = 0;\r\n\t/**\r\n\t * @type {Array<StatisticsUnit>}\r\n\t */\r\n\tthis.view = [];\r\n\t/**\r\n\t * @type {Array<StatisticsUnit>}\r\n\t */\r\n\tthis.fave = [];\r\n\t/**\r\n\t * @type {Array<StatisticsUnit>}\r\n\t */\r\n\tthis.unfave = [];\r\n\t/**\r\n\t * @type {Array<StatisticsUnit>}\r\n\t */\r\n\tthis.notifications_sent = [];\r\n\t\r\n\tthis.dynamics = {\r\n\t\t/**\r\n\t\t * @type {Array<StatisticsUnit>}\r\n\t\t */\r\n\t\tview: [],\r\n\t\t/**\r\n\t\t * @type {Array<StatisticsUnit>}\r\n\t\t */\r\n\t\tfave: []\r\n\t};\r\n}\r\n/**\r\n *\r\n * @param {(Array|object)} data\r\n * @returns {Statistics}\r\n */\r\nStatistics.prototype.setData = function(data) {\r\n\treturn $.extend(true, this, (data instanceof Array) ? data[0] : data);\r\n};\r\n/**\r\n * @const\r\n * @enum {string}\r\n */\r\nStatistics.SCALES = {\r\n\tMINUTE: 'minute',\r\n\tHOUR: 'hour',\r\n\tDAY: 'day',\r\n\tWEEK: 'week',\r\n\tMONTH: 'month',\r\n\tYEAR: 'year',\r\n\tOVERALL: 'overall'\r\n};\r\n/**\r\n * @const\r\n * @enum {string}\r\n */\r\nStatistics.ENTITIES = {\r\n\tEVENT: 'events',\r\n\tORGANIZATION: 'organizations'\r\n};\r\n/**\r\n * @static\r\n * @param {Statistics.ENTITIES} entity\r\n * @param {(string|number)} id\r\n * @param {Statistics.SCALES} scale\r\n * @param {(string|object|boolean)} range\r\n * @param {string} range.since\r\n * @param {string} [range.till]\r\n * @param {(Array<string>|object<string, StatisticsStdData>)} statistics_fields\r\n * @param {?StatisticsStdData} [dynamics_ajax_data]\r\n * @param {(Array<string>|string)} [dynamics_ajax_data.fields]\r\n * @param {function} [success]\r\n * @return {jqXHR}\r\n */\r\nStatistics.fetchStatistics = function(entity, id, scale, range, statistics_fields, dynamics_ajax_data, success) {\r\n\tvar data = {\r\n\t\tscale: scale,\r\n\t\tfields: []\r\n\t};\r\n\tif (statistics_fields instanceof Array) {\r\n\t\tdata.fields = data.fields.concat(statistics_fields);\r\n\t} else {\r\n\t\t$.each(statistics_fields, function(field, options) {\r\n\t\t\tif (Object.getOwnPropertyNames(options).length) {\r\n\t\t\t\tdata.fields.push(field + JSON.stringify(options));\r\n\t\t\t} else {\r\n\t\t\t\tdata.fields.push(field);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tif (dynamics_ajax_data) {\r\n\t\tdata.fields.push('dynamics' + JSON.stringify(__APP.SERVER.validateData(dynamics_ajax_data)));\r\n\t}\r\n\t\r\n\tswitch (typeof range) {\r\n\t\tcase 'string': {\r\n\t\t\tif (range) data.since = range;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 'object': {\r\n\t\t\tif (range.since) data.since = range.since;\r\n\t\t\tif (range.till) data.till = range.till;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault:\r\n\t\tcase 'boolean': { break; }\r\n\t}\r\n\t\r\n\treturn __APP.SERVER.getData('/api/v1/statistics/' + entity + '/' + id, data, success);\r\n};\r\n/**\r\n *\r\n * @param {Statistics.SCALES} scale\r\n * @param {(string|object|boolean)} range\r\n * @param {string} range.since\r\n * @param {string} [range.till]\r\n * @param {object<string, StatisticsStdData>} statistics_fields\r\n * @param {?object} dynamics_ajax_data\r\n * @param {Statistics.SCALES} [dynamics_ajax_data.scale]\r\n * @param {string} [dynamics_ajax_data.since]\r\n * @param {string} [dynamics_ajax_data.till]\r\n * @param {function} [success]\r\n * @return {jqXHR}\r\n */\r\nStatistics.prototype.fetchStatistics = function(scale, range, statistics_fields, dynamics_ajax_data, success) {\r\n\tvar self = this;\r\n\treturn this.constructor.fetchStatistics(this.id, scale, range, statistics_fields, dynamics_ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires Class.Statistics.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Statistics\r\n * @param {(string|number)} event_id\r\n */\r\nfunction EventStatistics(event_id) {\r\n\tStatistics.apply(this);\r\n\tthis.id = event_id;\r\n\t/**\r\n\t * @type {Array<StatisticsUnit>}\r\n\t */\r\n\tthis.open_site = [];\r\n\t/**\r\n\t * @type {Array<StatisticsUnit>}\r\n\t */\r\n\tthis.view_detail = [];\r\n\t/**\r\n\t * @type {Array<StatisticsConversionUnit>}\r\n\t */\r\n\tthis.open_conversion = [];\r\n\t/**\r\n\t * @type {Array<StatisticsConversionUnit>}\r\n\t */\r\n\tthis.fave_conversion = [];\r\n\t/**\r\n\t * @type {Array<StatisticsConversionUnit>}\r\n\t */\r\n\tthis.dynamics.fave_conversion = [];\r\n\t/**\r\n\t * @type {Array<StatisticsConversionUnit>}\r\n\t */\r\n\tthis.dynamics.open_conversion = [];\r\n}\r\nEventStatistics.extend(Statistics);\r\n/**\r\n *\r\n * @param {(string|number)} id\r\n * @param {Statistics.SCALES} scale\r\n * @param {(string|object|boolean)} range\r\n * @param {string} range.since\r\n * @param {string} [range.till]\r\n * @param {object<string, StatisticsStdData>} statistics_fields\r\n * @param {?object} dynamics_ajax_data\r\n * @param {Statistics.SCALES} [dynamics_ajax_data.scale]\r\n * @param {string} [dynamics_ajax_data.since]\r\n * @param {string} [dynamics_ajax_data.till]\r\n * @param {function} [success]\r\n * @return {jqXHR}\r\n */\r\nEventStatistics.fetchStatistics = function(id, scale, range, statistics_fields, dynamics_ajax_data, success) {\r\n\treturn Statistics.fetchStatistics(Statistics.ENTITIES.EVENT, id, scale, range, statistics_fields, dynamics_ajax_data, success);\r\n};","/**\r\n * @requires Class.Statistics.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Statistics\r\n * @param {(string|number)} organization_id\r\n */\r\nfunction OrganizationsStatistics(organization_id) {\r\n\tStatistics.apply(this);\r\n\tthis.id = organization_id;\r\n\t/**\r\n\t * @type {Array<StatisticsUnit>}\r\n\t */\r\n\tthis.subscribe = [];\r\n\t/**\r\n\t * @type {Array<StatisticsUnit>}\r\n\t */\r\n\tthis.unsubscribe = [];\r\n\t/**\r\n\t * @type {Array<StatisticsConversionUnit>}\r\n\t */\r\n\tthis.conversion = [];\r\n\t/**\r\n\t * @type {StatisticsAudience}\r\n\t */\r\n\tthis.audience = {};\r\n\t/**\r\n\t * @type {Array<StatisticsUnit>}\r\n\t */\r\n\tthis.dynamics.subscribe = [];\r\n\t/**\r\n\t * @type {Array<StatisticsConversionUnit>}\r\n\t */\r\n\tthis.dynamics.conversion = [];\r\n}\r\nOrganizationsStatistics.extend(Statistics);\r\n/**\r\n *\r\n * @param {(string|number)} id\r\n * @param {Statistics.SCALES} scale\r\n * @param {(string|object|boolean)} range\r\n * @param {string} range.since\r\n * @param {string} [range.till]\r\n * @param {object<string, StatisticsStdData>} statistics_fields\r\n * @param {?object} dynamics_ajax_data\r\n * @param {Statistics.SCALES} [dynamics_ajax_data.scale]\r\n * @param {string} [dynamics_ajax_data.since]\r\n * @param {string} [dynamics_ajax_data.till]\r\n * @param {function} [success]\r\n * @return {jqXHR}\r\n */\r\nOrganizationsStatistics.fetchStatistics = function(id, scale, range, statistics_fields, dynamics_ajax_data, success) {\r\n\treturn Statistics.fetchStatistics(Statistics.ENTITIES.ORGANIZATION, id, scale, range, statistics_fields, dynamics_ajax_data, success);\r\n};","/**\r\n * @requires ../Class.OneEntity.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments OneEntity\r\n * @param {(string|number)} [tag_id]\r\n * @param {boolean} [is_loading_continuous]\r\n */\r\nfunction OneTag(tag_id, is_loading_continuous) {\r\n\tthis.id = tag_id ? tag_id : 0;\r\n\tthis.name = '';\r\n\t\r\n\tif (tag_id && is_loading_continuous) {\r\n\t\tthis.loading = true;\r\n\t\tthis.fetchTag(function() {\r\n\t\t\tthis.loading = false;\r\n\t\t\t$(window).trigger('fetch.OneTag');\r\n\t\t});\r\n\t}\r\n}\r\nOneTag.extend(OneEntity);\r\n/**\r\n *\r\n * @param {(string|number)} tag_id\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneTag.fetchTag = function(tag_id, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/tags/' + tag_id, {}, success);\r\n};\r\n/**\r\n *\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneTag.prototype.fetchTag = function(success) {\r\n\tvar self = this;\r\n\treturn this.constructor.fetchTag(self.id, function(data) {\r\n\t\tself.setData(data[0]);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data[0]);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.EntitiesCollection.js\r\n * @requires Class.OneTag.js\r\n */\r\n/**\r\n * @typedef {AJAXData} TagsCollectionAJAXData\r\n * @property {string} name\r\n * @property {(string|number)} event_id\r\n * @property {string} used_since\r\n * @property {string} used_till\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EntitiesCollection\r\n */\r\nfunction TagsCollection() {}\r\nTagsCollection.extend(EntitiesCollection);\r\nTagsCollection.prototype.collection_of = OneTag;\r\n/**\r\n *\r\n * @param {AJAXData} data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nTagsCollection.fetchTags = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/tags/', data, success);\r\n};\r\n/**\r\n *\r\n * @param {TagsCollectionAJAXData} data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nTagsCollection.prototype.fetchTags = function(data, success) {\r\n\tvar self = this;\r\n\treturn this.constructor.fetchTags(data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.OneEntity.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments OneEntity\r\n * @param {(string|number)} [user_id]\r\n * @param {boolean} [is_loading_continuous]\r\n */\r\nfunction OneUser(user_id, is_loading_continuous) {\r\n\tthis.id = user_id ? user_id : 0;\r\n\tthis.first_name = '';\r\n\tthis.last_name = '';\r\n\tthis.middle_name = '';\r\n\tthis.gender = '';\r\n\tthis.avatar_url = '';\r\n\tthis.type = '';\r\n\tthis.is_friend = false;\r\n\tthis.is_editor = false;\r\n\tthis.blurred_image_url = '';\r\n\tthis.link = '';\r\n\tthis.subscriptions = new OrganizationsCollection();\r\n\t/**\r\n\t * @type {Array<OneUser.ACCOUNTS>}\r\n\t */\r\n\tthis.accounts = [];\r\n\t\r\n\tif (user_id && is_loading_continuous) {\r\n\t\tthis.loading = true;\r\n\t\tthis.fetchUser([], function() {\r\n\t\t\tthis.loading = false;\r\n\t\t\t$(window).trigger('fetch.OneUser');\r\n\t\t});\r\n\t}\r\n}\r\nOneUser.extend(OneEntity);\r\n/**\r\n * @const\r\n * @enum {string}\r\n */\r\nOneUser.ACCOUNTS = {\r\n\tVK: 'vk',\r\n\tFACEBOOK: 'facebook',\r\n\tGOOGLE: 'google'\r\n};\r\n/**\r\n * @const\r\n * @enum {string}\r\n */\r\nOneUser.ROLE = {\r\n\tUSER: 'user',\r\n\tMODERATOR: 'moderator',\r\n\tADMIN: 'admin'\r\n};\r\n\r\nObject.defineProperty(OneUser.prototype, 'subscriptions_fields', {\r\n\tenumerable: false,\r\n\tvalue: ['img_small_url', 'subscribed_count', 'new_events_count', 'actual_events_count']\r\n});\r\n/**\r\n * Returns highest role in privileges set\r\n * @param {Array<Privilege>} privileges\r\n * @returns {OneUser.ROLE}\r\n */\r\nOneUser.recognizeRole = function(privileges) {\r\n\tvar role = OneUser.ROLE.USER;\r\n\tprivileges.forEach(function(privilege) {\r\n\t\tif (privilege.role_id == 1 || privilege.name == OneUser.ROLE.ADMIN)\r\n\t\t\trole = OneUser.ROLE.ADMIN;\r\n\t\tif ((privilege.role_id == 2 || privilege.name == OneUser.ROLE.MODERATOR) && role !== OneUser.ROLE.ADMIN)\r\n\t\t\trole = OneUser.ROLE.MODERATOR;\r\n\t});\r\n\treturn role;\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} user_id\r\n * @param {(Array|string)} [fields]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneUser.fetchUser = function(user_id, fields, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/users/' + user_id, fields || (Array.isArray(fields) && fields.length) ? {fields: fields} : {}, success);\r\n};\r\n/**\r\n *\r\n * @param {(Array|string)} [fields]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneUser.prototype.fetchUser = function(fields, success) {\r\n\tvar self = this;\r\n\treturn OneUser.fetchUser(self.id, fields, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data[0]);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(Array|string)} [fields]\r\n * @param {AJAXData} [subscriptions_ajax_data]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nOneUser.prototype.fetchUserWithSubscriptions = function(fields, subscriptions_ajax_data, success) {\r\n\tvar self = this;\r\n\tfields = typeof fields == 'string' ? fields.split(',') : fields ? fields : [];\r\n\tif (subscriptions_ajax_data) {\r\n\t\tsubscriptions_ajax_data.fields = subscriptions_ajax_data.fields.join(',');\r\n\t\tfields.push('subscriptions' + JSON.stringify($.extend({}, subscriptions_ajax_data, {offset: self.subscriptions.length})));\r\n\t} else {\r\n\t\tfields.push('subscriptions' + JSON.stringify({\r\n\t\t\t\tfields: self.subscriptions_fields.join(','),\r\n\t\t\t\toffset: self.subscriptions.length\r\n\t\t\t}));\r\n\t}\r\n\treturn OneUser.fetchUser(self.id, fields, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data[0]);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires Class.OneUser.js\r\n */\r\n/**\r\n *\r\n * @constructor - Implements singleton\r\n * @augments OneUser\r\n */\r\nfunction CurrentUser() {\r\n\tif (typeof CurrentUser.instance === 'object') {\r\n\t\treturn CurrentUser.instance;\r\n\t}\r\n\tOneUser.apply(this, ['me']);\r\n\tCurrentUser.instance = this;\r\n}\r\nCurrentUser.extend(OneUser);\r\n/**\r\n *\r\n * @returns {jqXHR}\r\n */\r\nCurrentUser.prototype.logout = function() {\r\n\treturn __APP.SERVER.AJAX(__APP.SERVER.AJAX_METHOD.GET, '/index.php', {logout: true}, function() {\r\n\t\twindow.location = '/';\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(number|string)} [organization_id]\r\n * @param {AJAXCallback} [success]\r\n * @returns {(jqXHR|null)}\r\n */\r\nCurrentUser.prototype.subscribeToOrganization = function(organization_id, success) {\r\n\tvar self = this;\r\n\tif (!self.subscriptions.has(organization_id)) {\r\n\t\tOneOrganization.fetchOrganization(organization_id, self.subscriptions_fields, function(organization) {\r\n\t\t\tself.subscriptions.push(organization[0]);\r\n\t\t\tif (success && typeof success == 'function') {\r\n\t\t\t\tsuccess.call(self, organization);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn OneOrganization.subscribeOrganization(organization_id);\r\n\t} else {\r\n\t\tconsole.warn('Current user is already subscribed to this organization');\r\n\t\treturn null;\r\n\t}\r\n};\r\n/**\r\n *\r\n * @param {(number|string)} [organization_id]\r\n * @param {AJAXCallback} [success]\r\n * @returns {(jqXHR|null)}\r\n */\r\nCurrentUser.prototype.unsubscribeFromOrganization = function(organization_id, success) {\r\n\tvar self = this;\r\n\tif (self.subscriptions.has(organization_id)) {\r\n\t\treturn OneOrganization.unsubscribeOrganization(organization_id, function() {\r\n\t\t\tself.subscriptions.remove(organization_id);\r\n\t\t\tif (success && typeof success == 'function') {\r\n\t\t\t\tsuccess.call(self, organization_id);\r\n\t\t\t}\r\n\t\t});\r\n\t} else {\r\n\t\tconsole.warn('Current user isn`t subscribed to this organization');\r\n\t\treturn null;\r\n\t}\r\n};\r\n/**\r\n *\r\n * @param {(Array|string)} [fields]\r\n * @param {AJAXData} [subscriptions_ajax_data]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nCurrentUser.prototype.fetchUserWithSubscriptions = function(fields, subscriptions_ajax_data, success) {\r\n\tvar self = this;\r\n\tsubscriptions_ajax_data = $.extend({fields: self.subscriptions_fields}, subscriptions_ajax_data, {\r\n\t\toffset: self.subscriptions.length\r\n\t});\r\n\treturn OneUser.fetchUser(self.id, fields, function(data) {\r\n\t\tdata = data[0];\r\n\t\tOrganizationsCollection.fetchSubscribedOrganizations(subscriptions_ajax_data, function(organizations) {\r\n\t\t\tdata.subscriptions = organizations;\r\n\t\t\tself.setData(data);\r\n\t\t\tif (success && typeof success == 'function') {\r\n\t\t\t\tsuccess.call(self, data);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n};","/**\r\n * @requires ../Class.EntitiesCollection.js\r\n * @requires Class.OneUser.js\r\n */\r\n/**\r\n * @typedef {AJAXData} UsersCollectionAJAXData\r\n * @property {string} [first_name]\r\n * @property {string} [last_name]\r\n * @property {string} [name]\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EntitiesCollection\r\n */\r\nfunction UsersCollection() {}\r\nUsersCollection.extend(EntitiesCollection);\r\nUsersCollection.prototype.collection_of = OneUser;\r\n/**\r\n * Returns specified staff by role. Mixing additional_fields if needed.\r\n * @param {OneUser.ROLE} role\r\n * @param {(Array<OneUser>|UsersCollection)} staff\r\n * @param {object} [additional_fields]\r\n * @return {(Array<OneUser>|UsersCollection|Array<object>)}\r\n */\r\nUsersCollection.getSpecificStaff = function(role, staff, additional_fields) {\r\n\tvar specific_staff = [];\r\n\tstaff.forEach(function(man) {\r\n\t\tif (man.role == role) {\r\n\t\t\tspecific_staff.push($.extend(true, {\r\n\t\t\t\tname: man.first_name + ' ' + man.last_name\r\n\t\t\t}, man, additional_fields))\r\n\t\t}\r\n\t});\r\n\treturn specific_staff;\r\n};\r\n/**\r\n *\r\n * @param {UsersCollectionAJAXData} data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.fetchUsers = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/users/', data, success);\r\n};\r\n/**\r\n *\r\n * @param {UsersCollectionAJAXData} data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.fetchFriends = function(data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/users/friends/', data, success);\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} event_id\r\n * @param {UsersCollectionAJAXData} ajax_data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.fetchEventFavorites = function(event_id, ajax_data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/events/' + event_id, {fields: 'favored'.appendAjaxData(__APP.SERVER.validateData(ajax_data))}, function(data) {\r\n\t\tif (ajax_data.length && ajax_data.offset) {\r\n\t\t\tajax_data.offset += ajax_data.length;\r\n\t\t}\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess(data[0].favored);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} org_id\r\n * @param {UsersCollectionAJAXData} ajax_data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.fetchOrganizationSubscribers = function(org_id, ajax_data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/organizations/' + org_id, {fields: 'subscribed'.appendAjaxData(__APP.SERVER.validateData(ajax_data))}, function(data) {\r\n\t\tif (ajax_data.length && ajax_data.offset) {\r\n\t\t\tajax_data.offset += ajax_data.length;\r\n\t\t}\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess(data[0].subscribed);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} org_id\r\n * @param {UsersCollectionAJAXData} ajax_data\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.fetchOrganizationStaff = function(org_id, ajax_data, success) {\r\n\treturn __APP.SERVER.getData('/api/v1/organizations/' + org_id + '/staff/', ajax_data, success);\r\n};\r\n/**\r\n * Returns specified staff by role. Mixing additional_fields if needed.\r\n * @param {OneUser.ROLE} role\r\n * @param {object} [additional_fields]\r\n * @return {(Array<OneUser>|UsersCollection|Array<object>)}\r\n */\r\nUsersCollection.prototype.getSpecificStaff = function(role, additional_fields) {\r\n\tvar specific_staff = [];\r\n\tthis.forEach(function(man) {\r\n\t\tif (man.role == role) {\r\n\t\t\tspecific_staff.push($.extend(true, {\r\n\t\t\t\tname: man.first_name + ' ' + man.last_name\r\n\t\t\t}, man, additional_fields))\r\n\t\t}\r\n\t});\r\n\treturn specific_staff;\r\n};\r\n/**\r\n *\r\n * @param {UsersCollectionAJAXData} [data]\r\n * @param {(number|string)} [length]\r\n * @param {AJAXCallback} [success]\r\n * @this Array<OneUser>\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.prototype.fetchUsers = function(data, length, success) {\r\n\tvar self = this,\r\n\t\tajax_data = $.extend(data, {\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t});\r\n\treturn UsersCollection.fetchUsers(ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(Array|string)} [fields]\r\n * @param {(number|string)} [length]\r\n * @param {string} [order_by]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.prototype.fetchFriends = function(fields, length, order_by, success) {\r\n\tvar self = this,\r\n\t\tajax_data = {\r\n\t\t\tfields: fields,\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t};\r\n\tif (order_by) {\r\n\t\tajax_data.order_by = order_by;\r\n\t}\r\n\treturn UsersCollection.fetchFriends(ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} event_id\r\n * @param {(number|string)} length\r\n * @param {UsersCollectionAJAXData} [data]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.prototype.fetchEventFavorites = function(event_id, length, data, success) {\r\n\tvar self = this,\r\n\t\tajax_data = $.extend({}, data, {\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t});\r\n\treturn UsersCollection.fetchEventFavorites(event_id, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} org_id\r\n * @param {(number|string)} length\r\n * @param {UsersCollectionAJAXData} [data]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.prototype.fetchOrganizationSubscribers = function(org_id, length, data, success) {\r\n\tvar self = this,\r\n\t\tajax_data = $.extend({}, data, {\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t});\r\n\treturn this.constructor.fetchOrganizationSubscribers(org_id, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {(string|number)} org_id\r\n * @param {(number|string)} length\r\n * @param {UsersCollectionAJAXData} [data]\r\n * @param {AJAXCallback} [success]\r\n * @returns {jqXHR}\r\n */\r\nUsersCollection.prototype.fetchOrganizationStaff = function(org_id, length, data, success) {\r\n\tvar self = this,\r\n\t\tajax_data = $.extend({}, data, {\r\n\t\t\toffset: this.length,\r\n\t\t\tlength: length\r\n\t\t});\r\n\treturn UsersCollection.fetchOrganizationStaff(org_id, ajax_data, function(data) {\r\n\t\tself.setData(data);\r\n\t\tif (success && typeof success == 'function') {\r\n\t\t\tsuccess.call(self, data);\r\n\t\t}\r\n\t});\r\n};","function Calendar($calendar, options){\r\n\tthis.options = {\r\n\t\tclasses: {\r\n\t\t\twrapper_class: 'calendar_wrapper',\r\n\t\t\theader_class: 'calendar_header',\r\n\t\t\tprev_btn_class: 'calendar_prev_btn',\r\n\t\t\tnext_btn_class: 'calendar_next_btn',\r\n\t\t\tmonth_name_class: 'calendar_month_name',\r\n\t\t\ttable_class: 'calendar_month',\r\n\t\t\tthead_class: 'calendar_thead',\r\n\t\t\ttbody_class: 'calendar_tbody',\r\n\t\t\ttr_class: 'calendar_week',\r\n\t\t\thead_tr_class: 'calendar_weekdays_row',\r\n\t\t\tth_class: 'calendar_weekday',\r\n\t\t\ttd_class: 'calendar_day',\r\n\t\t\ttd_additional_classes: [],\r\n\t\t\ttd_disabled_class: '-disabled',\r\n\t\t\ttable_cell_class: 'calendar_cell',\r\n\t\t\ttoday_class: 'today'\r\n\t\t},\r\n\t\tadditional_dataset: {},\r\n\t\tselection_type: Calendar.SELECTION_TYPES.SINGLE,\r\n\t\tweekday_selection: false,\r\n\t\tmonth_selection: false,\r\n\t\tdisable_selection: false,\r\n\t\tmin_date: false,\r\n\t\tmax_date: false,\r\n\t\tlocale: 'ru',\r\n\t\tlabels: {}\r\n\t};\r\n\tswitch(true){\r\n\t\tcase ($calendar instanceof Element):\r\n\t\tcase (typeof $calendar == \"string\"): {\r\n\t\t\t$calendar = $($calendar);\r\n\t\t\tif($calendar.length === 0)\r\n\t\t\t\tthrow new Error(\"Такого элемента не существует\");\r\n\t\t\telse if($calendar.length > 1)\r\n\t\t\t\tthrow new Error(\"Элементов с заданным аргументов найдено несколько\");\r\n\t\t}\r\n\t\tcase ($calendar instanceof jQuery): {\r\n\t\t\t$.extend(true, this.options, options, $calendar.data());\r\n\t\t\tif(this.options.min_date !== false && this.options.max_date !== false && moment(this.options.max_date).diff(this.options.min_date, 'days') <= 0){\r\n\t\t\t\tthis.options.max_date = false;\r\n\t\t\t}\r\n\t\t\tif(this.options.weekday_selection === true || this.options.month_selection === true ) {\r\n\t\t\t\tthis.options.selection_type = Calendar.SELECTION_TYPES.MULTI;\r\n\t\t\t}\r\n\t\t\tthis.selected_days = [];\r\n\t\t\tthis.selected_weeks = {};\r\n\t\t\tthis.selected_months = [];\r\n\t\t\tthis.last_action = '';\r\n\t\t\tthis.last_selected_days = '';\r\n\t\t\tthis.now_selected_day = '';\r\n\t\t\tthis.prev_selected_day = '';\r\n\t\t\tthis.formatted_days = {};\r\n\t\t\tthis.$calendar = $calendar;\r\n\t\t\tthis.current_month = moment(new Date());\r\n\t\t\tthis._today = moment(new Date());\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault: {\r\n\t\t\tthrow new TypeError(\"Аргумент должен быть экземпляром jQuery, элементом DOM, либо CSS селектором\")\r\n\t\t}\r\n\t}\r\n}\r\n\r\nCalendar.SELECTION_TYPES = {\r\n\tSINGLE: 'single',\r\n\tMULTI: 'multi'\r\n};\r\n\r\nCalendar.prototype.setMonth = function(month, year){\r\n\tswitch(month){\r\n\t\tcase 'prev':{\r\n\t\t\tthis.current_month = this.current_month.add(-1, 'months'); break;\r\n\t\t}\r\n\t\tcase 'next':{\r\n\t\t\tthis.current_month = this.current_month.add(1, 'months'); break;\r\n\t\t}\r\n\t\tcase 'current':{\r\n\t\t\tthis.current_month = moment(new Date()); break;\r\n\t\t}\r\n\t\tdefault: {\r\n\t\t\tthis.current_month = year ? this.current_month.set({'year': year, 'month': month-1}) : this.current_month.month(month-1);\r\n\t\t}\r\n\t}\r\n\tthis.renderTable();\r\n\tthis.$calendar.trigger('month-changed');\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.destroyTable = function(){\r\n\tthis.$calendar.find('.'+this.options.classes.th_class).removeClass(__C.CLASSES.NEW_ACTIVE).off('click');\r\n\tthis.$calendar.find('.MonthName').removeClass(__C.CLASSES.NEW_ACTIVE).off('click');\r\n\tthis.$calendar.find('.CalendarTableBody').remove();\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.setMonthName = function(){\r\n\tthis.$calendar.find('.MonthName')\r\n\t\t.data('month', this.current_month.month())\r\n\t\t.text(this.current_month.format(\"MMMM YYYY\").capitalize());\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.buildTable = function(){\r\n\tvar $calendar_table = this.$calendar.find('.CalendarTable'),\r\n\t\tdays_count = this.current_month.daysInMonth(),\r\n\t\tfirst_day_in_month = this.current_month.date(1).day(),\r\n\t\tlast_day_in_month = this.current_month.date(days_count).day(),\r\n\t\ttd_days = [],\r\n\t\ttd_classes = [],\r\n\t\tthis_day,\r\n\t\tthis_moment,\r\n\t\tdataset = [];\r\n\tfor(var name in this.options.additional_dataset){\r\n\t\tif(this.options.additional_dataset.hasOwnProperty(name)){\r\n\t\t\tdataset.push('data-'+name+'='+this.options.additional_dataset[name]);\r\n\t\t}\r\n\t}\r\n\tfor(var day = 1; day <= days_count; day++){\r\n\t\tthis.current_month.date(day);\r\n\t\tthis_day = this.current_month.format(__C.DATE_FORMAT);\r\n\t\tthis_moment = moment(this_day);\r\n\r\n\t\ttd_classes = [\r\n\t\t\tthis.options.classes.table_cell_class,\r\n\t\t\tthis.options.classes.td_class,\r\n\t\t\t'Day_'+this_day,\r\n\t\t\t'DayOfWeek_'+this.current_month.day(),\r\n\t\t\t'DayOfMonth_'+this.current_month.month()\r\n\t\t].concat(this.options.classes.td_additional_classes);\r\n\t\tif((this.options.min_date !== false && !(this_moment.diff(this.options.min_date, 'd') >= 0) ) || (this.options.max_date !== false && !(this_moment.diff(this.options.max_date, 'd') <= 0)))\r\n\t\t\ttd_classes.push(this.options.classes.td_disabled_class);\r\n\t\tif(this.current_month.format(__C.DATE_FORMAT) == this._today.format(__C.DATE_FORMAT))\r\n\t\t\ttd_classes.push(this.options.classes.today_class);\r\n\r\n\t\ttd_days.push(tmpl('calendar-div', {\r\n\t\t\ttd_classes: td_classes.join(' '),\r\n\t\t\tnumber: this.current_month.date(),\r\n\t\t\tday_number: this.current_month.day(),\r\n\t\t\tdate: this.current_month.format(__C.DATE_FORMAT),\r\n\t\t\tdate_text: this.current_month.format('DD MMMM YYYY'),\r\n\t\t\tdataset: dataset.join(' ')\r\n\t\t}));\r\n\t}\r\n\tvar curr_month_clone = this.current_month.clone();\r\n\tif (first_day_in_month != 1){\r\n\t\tcurr_month_clone.add(-1, 'months');\r\n\t\tcurr_month_clone.date(curr_month_clone.daysInMonth());\r\n\t\tdo {\r\n\t\t\tthis_day = curr_month_clone.format(__C.DATE_FORMAT);\r\n\t\t\tthis_moment = moment(this_day);\r\n\t\t\ttd_classes = [\r\n\t\t\t\tthis.options.classes.table_cell_class,\r\n\t\t\t\tthis.options.classes.td_class,\r\n\t\t\t\t'Day_'+this_day,\r\n\t\t\t\t'DayOfWeek_'+curr_month_clone.day(),\r\n\t\t\t\t'DayOfMonth_'+curr_month_clone.month(),\r\n\t\t\t\t'not_this_month'\r\n\t\t\t].concat(this.options.classes.td_additional_classes);\r\n\t\t\tif((this.options.min_date !== false && !(this_moment.diff(this.options.min_date, 'd') >= 0) ) || (this.options.max_date !== false && !(this_moment.diff(this.options.max_date, 'd') <= 0)))\r\n\t\t\t\ttd_classes.push(this.options.classes.td_disabled_class);\r\n\r\n\t\t\ttd_days.unshift(tmpl('calendar-div', {\r\n\t\t\t\ttd_classes: td_classes.join(' '),\r\n\t\t\t\tnumber: curr_month_clone.date(),\r\n\t\t\t\tday_number: curr_month_clone.day(),\r\n\t\t\t\tdate: curr_month_clone.format(__C.DATE_FORMAT),\r\n\t\t\t\tdate_text: curr_month_clone.format('DD MMMM YYYY'),\r\n\t\t\t\tdataset: dataset.join(' ')\r\n\t\t\t}));\r\n\t\t\tcurr_month_clone.add(-1, 'days');\r\n\t\t} while(curr_month_clone.day() != 0);\r\n\t}\r\n\r\n\tif (last_day_in_month != 0){\r\n\t\tcurr_month_clone = this.current_month.clone();\r\n\t\tdo {\r\n\t\t\tcurr_month_clone.add(1, 'days');\r\n\t\t\tthis_day = curr_month_clone.format(__C.DATE_FORMAT);\r\n\t\t\tthis_moment = moment(this_day);\r\n\t\t\ttd_classes = [\r\n\t\t\t\tthis.options.classes.table_cell_class,\r\n\t\t\t\tthis.options.classes.td_class,\r\n\t\t\t\t'Day_'+this_day,\r\n\t\t\t\t'DayOfWeek_'+curr_month_clone.day(),\r\n\t\t\t\t'DayOfMonth_'+curr_month_clone.month(),\r\n\t\t\t\t'not_this_month'\r\n\t\t\t].concat(this.options.classes.td_additional_classes);\r\n\t\t\tif((this.options.min_date !== false && !(this_moment.diff(this.options.min_date, 'd') >= 0) ) || (this.options.max_date !== false && !(this_moment.diff(this.options.max_date, 'd') <= 0)))\r\n\t\t\t\ttd_classes.push(this.options.classes.td_disabled_class);\r\n\r\n\t\t\ttd_days.push(tmpl('calendar-div', {\r\n\t\t\t\ttd_classes: td_classes.join(' '),\r\n\t\t\t\tnumber: curr_month_clone.date(),\r\n\t\t\t\tday_number: curr_month_clone.day(),\r\n\t\t\t\tdate: curr_month_clone.format(__C.DATE_FORMAT),\r\n\t\t\t\tdate_text: curr_month_clone.format('DD MMMM YYYY'),\r\n\t\t\t\tdataset: dataset.join(' ')\r\n\t\t\t}));\r\n\t\t} while(curr_month_clone.day() != 0);\r\n\t}\r\n\tvar $tbody = $('<tbody>').addClass('CalendarTableBody'),\r\n\t\ttds_in_tr = 0,\r\n\t\ttrs_count = 0,\r\n\t\t$trs = [tmpl('calendar-row', {tr_class: this.options.classes.tr_class})];\r\n\tfor(var i = 0; i < td_days.length; i++){\r\n\t\tif (tds_in_tr == 7 ){\r\n\t\t\t$trs.push(tmpl('calendar-row', {tr_class: this.options.classes.tr_class}));\r\n\t\t\ttds_in_tr = 0;\r\n\t\t\ttrs_count++;\r\n\t\t}\r\n\t\t$trs[trs_count].append(td_days[i]);\r\n\t\ttds_in_tr++;\r\n\t}\r\n\t$trs.forEach(function(item){\r\n\t\t$tbody.append(item);\r\n\t});\r\n\t$calendar_table.append($tbody);\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.renderTable = function(){\r\n\tthis\r\n\t\t.destroyTable()\r\n\t\t.buildTable()\r\n\t\t.activateSelectedDays()\r\n\t\t.setMonthName();\r\n\t\r\n\tif(!this.options.disable_selection){\r\n\t\tswitch(this.options.selection_type){\r\n\t\t\tcase Calendar.SELECTION_TYPES.MULTI: {\r\n\t\t\t\tthis.bindDragSelection();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase Calendar.SELECTION_TYPES.SINGLE: {\r\n\t\t\t\tthis.bindDaySelection();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault: {break;}\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options.weekday_selection === true){\r\n\t\t\tthis.bindWeekdaySelection();\r\n\t\t}\r\n\t\tif(this.options.month_selection === true){\r\n\t\t\tthis.bindMonthSelection();\r\n\t\t}\r\n\t}\r\n\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.selectToday = function(){\r\n\tthis.$calendar.find('.'+this.options.classes.td_class+'.'+this.options.classes.today_class).addClass(__C.CLASSES.NEW_ACTIVE);\r\n\treturn this;\r\n};\r\n\r\n//TODO: Make formated days\r\n//TODO: Make range selection\r\nCalendar.prototype.formatDays = function(){\r\n\tvar genitive_month_names = {\r\n\t\t\t'январь': 'января',\r\n\t\t\t'февраль': 'февраля',\r\n\t\t\t'март': 'марта',\r\n\t\t\t'апрель': 'апреля',\r\n\t\t\t'май': 'мая',\r\n\t\t\t'июнь': 'июня',\r\n\t\t\t'июль': 'июля',\r\n\t\t\t'август': 'августа',\r\n\t\t\t'сентябрь': 'сентября',\r\n\t\t\t'октябрь': 'октября',\r\n\t\t\t'ноябрь': 'ноября',\r\n\t\t\t'декабрь': 'декабря'\r\n\t\t},\r\n\t\t_date = moment(this.now_selected_day),\r\n\t\tmonth_num = _date.month(),\r\n\t\tmonth = _date.month(month_num),\r\n\t\tdays_in_month = month.daysInMonth(),\r\n\t\t_day = month.date(1);\r\n\r\n\tif(typeof this.formatted_days[month_num] === 'undefined'){\r\n\t\tthis.formatted_days[month_num] = {};\r\n\t\tthis.formatted_days[month_num].selected_days = [];\r\n\t\tthis.formatted_days[month_num].month_name = genitive_month_names[_date.format('MMMM')];\r\n\t}\r\n\r\n\tthis.formatted_days[month_num].selected_days.push(_date.format(__C.DATE_FORMAT));\r\n\tthis.formatted_days[month_num].text = '';\r\n\r\n\twhile(days_in_month){\r\n\t\tconsole.log(this.formatted_days[month_num].selected_days);\r\n\t\tif(this.formatted_days[month_num].selected_days.indexOf(_day.format(__C.DATE_FORMAT)) !== -1){\r\n\t\t\tthis.formatted_days[month_num].text += ''+_day.format('D');\r\n\t\t}\r\n\t\t_day = _day.add(1, 'd');\r\n\t\tdays_in_month--;\r\n\t}\r\n\tconsole.log(this.formatted_days[month_num].text);\r\n\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.selectDays = function(days){\r\n\tvar self = this;\r\n\r\n\tfunction select(day){\r\n\t\t//var $this_day = self.$calendar.find('.Day_'+day);\r\n\t\t\r\n\t\t\r\n\t\tswitch(self.options.selection_type){\r\n\t\t\tcase Calendar.SELECTION_TYPES.MULTI: {\r\n\t\t\t\tif(self.selected_days.indexOf(day) === -1){\r\n\t\t\t\t\tself.selected_days.push(day);\r\n\t\t\t\t\tself.selected_days.sort();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\tcase Calendar.SELECTION_TYPES.SINGLE: {\r\n\t\t\t\tself.$calendar.find('.'+self.options.classes.td_class+'.'+__C.CLASSES.NEW_ACTIVE).removeClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\t\tself.selected_days = [day];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//self.prev_selected_day = self.now_selected_day;\r\n\t\t//self.now_selected_day = $this_day.data('date');\r\n\t\t//this.formatDays();\r\n\r\n\t\tself.$calendar.find('.Day_'+day).addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t}\r\n\r\n\r\n\tif(Array.isArray(days)){\r\n\t\tvar removing_days = [];\r\n\t\tdays.forEach(function(day){\r\n\t\t\tif((self.options.min_date !== false && !(moment(day).diff(self.options.min_date) >= 0) ) || (self.options.max_date !== false && !(moment(day).diff(self.options.max_date) <= 0))){\r\n\t\t\t\tremoving_days.push(day);\r\n\t\t\t} else {\r\n\t\t\t\tselect(day);\r\n\t\t\t}\r\n\t\t});\r\n\t\tremoving_days.forEach(function(day) {\r\n\t\t\tdays.splice(days.indexOf(day), 1)\r\n\t\t})\r\n\t} else {\r\n\t\tif((self.options.min_date !== false && !(moment(days).diff(self.options.min_date) >= 0) ) || (self.options.max_date !== false && !(moment(days).diff(self.options.max_date) <=0))){\r\n\t\t\tdays = [];\r\n\t\t} else {\r\n\t\t\tselect(days);\r\n\t\t\tdays = [days];\r\n\t\t}\r\n\t}\r\n\tif(days.length){\r\n\t\tself.last_action = 'select';\r\n\t\tself.last_selected_days = days;\r\n\t\tself.$calendar.trigger('days-changed');\r\n\t}\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.deselectDays = function(days){ // 2012-12-21\r\n\tvar self = this;\r\n\r\n\tfunction deselect(day){\r\n\t\tvar $this_day = self.$calendar.find('.Day_'+day),\r\n\t\t\t$this_weekday = self.$calendar.find('.Week_'+$this_day.data('weekday')),\r\n\t\t\t$this_month_name = self.$calendar.find('.MonthName'),\r\n\t\t\tthis_year = self.current_month.format('YYYY'),\r\n\t\t\tthis_month_num = self.current_month.format('MM'),\r\n\t\t\tthis_month = self.current_month.format('YYYY.MM'),\r\n\t\t\tthis_weekday_pos;\r\n\r\n\t\tself.selected_days.splice(self.selected_days.indexOf(day), 1);\r\n\t\tself.selected_days.sort();\r\n\r\n\t\tif(self.selected_months.indexOf(this_month) !== -1){\r\n\t\t\t$this_month_name.removeClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\tself.selected_months.splice(self.selected_months.indexOf(this_month), 1);\r\n\t\t}\r\n\r\n\t\tif(typeof self.selected_weeks[this_year] !== 'undefined'){\r\n\t\t\tif(typeof self.selected_weeks[this_year][this_month_num] !== 'undefined'){\r\n\t\t\t\tthis_weekday_pos = self.selected_weeks[this_year][this_month_num].indexOf($this_day.data('weekday'));\r\n\t\t\t\tif(this_weekday_pos !== -1){\r\n\t\t\t\t\t$this_weekday.removeClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\t\t\tself.selected_weeks[this_year][this_month_num].splice(this_weekday_pos, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tself.$calendar.find('.Day_'+day).removeClass(__C.CLASSES.NEW_ACTIVE);\r\n\t}\r\n\r\n\tif(this.options.selection_type === Calendar.SELECTION_TYPES.MULTI){\r\n\t\tif(Array.isArray(days)){\r\n\t\t\tdays.forEach(function(day){\r\n\t\t\t\tdeselect(day);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tdeselect(days);\r\n\t\t}\r\n\t\tself.last_action = 'deselect';\r\n\t\tself.last_selected_days = days;\r\n\t\tself.$calendar.trigger('days-changed');\r\n\t}\r\n\r\n\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.selectWeek = function(week){ // 0..6\r\n\tvar self = this,\r\n\t\t$this_weekday = self.$calendar.find('.Week_'+week),\r\n\t\t$this_weekday_days = self.$calendar.find('.DayOfWeek_'+week).not('.not_this_month'),\r\n\t\tthis_year = self.current_month.format('YYYY'),\r\n\t\tthis_month = self.current_month.format('MM'),\r\n\t\tthis_weekday_pos,\r\n\t\tdays = [];\r\n\r\n\t$this_weekday_days.each(function(i){\r\n\t\tdays.push($this_weekday_days.eq(i).data('date'));\r\n\t});\r\n\r\n\tif(typeof self.selected_weeks[this_year] === 'undefined')\r\n\t\tself.selected_weeks[this_year] = {};\r\n\tif(typeof self.selected_weeks[this_year][this_month] === 'undefined')\r\n\t\tself.selected_weeks[this_year][this_month] = [];\r\n\r\n\tthis_weekday_pos = self.selected_weeks[this_year][this_month].indexOf(week);\r\n\r\n\tif(this_weekday_pos === -1){\r\n\t\t$this_weekday.addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\tself.selectDays(days);\r\n\t\tself.selected_weeks[this_year][this_month].push(week)\r\n\t} else {\r\n\t\t$this_weekday.removeClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\tself.deselectDays(days);\r\n\t\tself.selected_weeks[this_year][this_month].splice(this_weekday_pos, 1);\r\n\t}\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.selectMonth = function(month){ // 0..11\r\n\tvar self = this,\r\n\t\t$this_month_name = self.$calendar.find('.MonthName'),\r\n\t\t$this_month_days = self.$calendar.find('.DayOfMonth_'+month),\r\n\t\tthis_month = self.current_month.format('YYYY.MM'),\r\n\t\tthis_month_pos = self.selected_months.indexOf(this_month),\r\n\t\tdays = [];\r\n\r\n\t$this_month_days.each(function(i){\r\n\t\tdays.push($this_month_days.eq(i).data('date'));\r\n\t});\r\n\r\n\tif(this_month_pos === -1){\r\n\t\t$this_month_name.addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\tself.selectDays(days);\r\n\t\tself.selected_months.push(this_month);\r\n\t} else {\r\n\t\t$this_month_name.removeClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\tself.deselectDays(days);\r\n\t\tself.selected_months.splice(this_month_pos, 1);\r\n\t}\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.bindMonthArrows = function(){\r\n\tvar self = this;\r\n\tthis.$calendar.find('.NextMonth').on('click', function(){\r\n\t\tself.setMonth('next');\r\n\t});\r\n\tthis.$calendar.find('.PrevMonth').on('click', function(){\r\n\t\tself.setMonth('prev');\r\n\t});\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.bindDaySelection = function(){\r\n\tvar self = this,\r\n\t\t$days_in_month = self.$calendar.find('.'+this.options.classes.td_class),\r\n\t\t$active_days = $days_in_month.not('.'+this.options.classes.td_disabled_class);\r\n\t$days_in_month.off('click.bindDaySelection');\r\n\t$active_days.on('click.bindDaySelection', function(){\r\n\t\tif(self.options.selection_type === Calendar.SELECTION_TYPES.MULTI && $(this).hasClass(__C.CLASSES.NEW_ACTIVE)){\r\n\t\t\tself.deselectDays($(this).data('date'));\r\n\t\t} else {\r\n\t\t\tself.selectDays($(this).data('date'));\r\n\t\t}\r\n\t});\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.bindWeekdaySelection = function(){\r\n\tvar self = this,\r\n\t\t$weekdays = self.$calendar.find('.'+this.options.classes.th_class);\r\n\t$weekdays.on('click', function(){\r\n\t\tself.selectWeek($(this).data('weekday'));\r\n\t});\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.bindMonthSelection = function(){\r\n\tvar self = this,\r\n\t\t$this_month_name = self.$calendar.find('.MonthName');\r\n\t$this_month_name.on('click', function(){\r\n\t\tself.selectMonth($(this).data('month'));\r\n\t});\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.bindDragSelection = function(){\r\n\tvar self = this;\r\n\r\n\tfunction selectDate($target){\r\n\t\t$target = $target.is('.'+self.options.classes.td_class) ? $target : $target.closest('.'+self.options.classes.td_class);\r\n\t\tif($target.not('.'+self.options.classes.td_disabled_class).length){\r\n\t\t\tif($target.hasClass(__C.CLASSES.NEW_ACTIVE)){\r\n\t\t\t\tself.deselectDays($target.data('date'));\r\n\t\t\t} else {\r\n\t\t\t\tself.selectDays($target.data('date'));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction disableDragSelection(){\r\n\t\tself.$calendar.find('.'+self.options.classes.td_class).off('mouseenter.DragSelection');\r\n\t}\r\n\r\n\tself.$calendar\r\n\t\t.off('mousedown.RangeSelection')\r\n\t\t.on('mousedown.RangeSelection', function(e){\r\n\t\t\tselectDate($(e.target));\r\n\t\t\tself.$calendar.find('.'+self.options.classes.td_class).not('.'+self.options.classes.td_disabled_class).on('mouseenter.DragSelection', function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tselectDate($(e.target));\r\n\t\t\t});\r\n\t\t})\r\n\t\t.on('mouseup', disableDragSelection)\r\n\t\t.on('mouseleave', disableDragSelection);\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.activateSelectedDays = function(){\r\n\tvar self = this,\r\n\t\tthis_year = self.current_month.format('YYYY'),\r\n\t\tthis_month_num = self.current_month.format('MM');\r\n\r\n\tself.selected_days.forEach(function(day){\r\n\t\tself.$calendar.find('.Day_'+day).addClass(__C.CLASSES.NEW_ACTIVE)\r\n\t});\r\n\r\n\tif(self.selected_months.indexOf(this_year + '.' + this_month_num) !== -1){\r\n\t\tself.$calendar.find('.MonthName').addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t}\r\n\tif(typeof self.selected_weeks[this_year] !== 'undefined'){\r\n\t\tif(typeof self.selected_weeks[this_year][this_month_num] !== 'undefined'){\r\n\t\t\tself.selected_weeks[this_year][this_month_num].forEach(function(weekday) {\r\n\t\t\t\tself.$calendar.find('.Week_'+weekday).addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.setDaysWithEvents = function(){\r\n\tvar calendar = this,\r\n\t\tajax_data = {\r\n\t\t\tsince: calendar.current_month.startOf('month').format(__C.DATE_FORMAT),\r\n\t\t\ttill: calendar.current_month.endOf('month').format(__C.DATE_FORMAT),\r\n\t\t\tlength: 500,\r\n\t\t\tmy: true,\r\n\t\t\tunique: true\r\n\t\t};\r\n\tcalendar.$calendar.find('.feed_calendar_td').removeClass('Controller has_favorites').addClass(__C.CLASSES.NEW_DISABLED);\r\n\tDatesCollection.fetchDates(ajax_data, function(data) {\r\n\t\tdata.forEach(function(day){\r\n\t\t\tvar $tr = calendar.$calendar.find('.Day_' + moment.unix(day.event_date).format(__C.DATE_FORMAT));\r\n\t\t\t$tr\r\n\t\t\t\t.html(tmpl('link', {\r\n\t\t\t\t\ttitle: $tr.children().text(),\r\n\t\t\t\t\tclasses: $tr.children().get(0).classList,\r\n\t\t\t\t\tpage: '/feed/day/'+$tr.data('date')\r\n\t\t\t\t}))\r\n\t\t\t\t.addClass(day.favorites_count > 0 ? 'has_favorites' : '')\r\n\t\t\t\t.removeClass(__C.CLASSES.NEW_DISABLED);\r\n\t\t});\r\n\t\tcalendar.bindDaySelection();\r\n\t\tbindPageLinks(calendar.$calendar);\r\n\t});\r\n\treturn this;\r\n};\r\n\r\nCalendar.prototype.init = function(){\r\n\tthis.$calendar.empty().append(tmpl('calendar', this.options.classes));\r\n\tif(this.options.weekday_selection){\r\n\t\tthis.$calendar.addClass('-weekday_selection');\r\n\t}\r\n\tif(this.options.month_selection){\r\n\t\tthis.$calendar.addClass('-month_selection');\r\n\t}\r\n\tthis.$calendar.data('calendar', this);\r\n\tthis.$calendar.data('days', this.selected_days);\r\n\tthis.$calendar.data('options', this.options);\r\n\tthis\r\n\t\t.bindMonthArrows()\r\n\t\t.renderTable();\r\n\treturn this;\r\n};\r\n","function DatePicker($datepicker, options){\r\n\tthis.options = {\r\n\t\tclasses: {\r\n\t\t},\r\n\t\tclose_on_pick: true,\r\n\t\tmin_date: false,\r\n\t\tmax_date: false,\r\n\t\tlabels: {}\r\n\t};\r\n\r\n\tswitch(true){\r\n\t\tcase ($datepicker instanceof Element):\r\n\t\tcase (typeof $datepicker == 'string'): {\r\n\t\t\t$datepicker = $($datepicker);\r\n\t\t\tif($datepicker.length === 0)\r\n\t\t\t\tthrow new Error('Такого элемента не существует');\r\n\t\t\telse if($datepicker.length > 1)\r\n\t\t\t\tthrow new Error('Элементов с заданным аргументов найдено несколько');\r\n\t\t}\r\n\t\tcase ($datepicker instanceof jQuery): {\r\n\t\t\t$.extend(true, this.options, options, $datepicker.data());\r\n\t\t\tthis.$datepicker = $datepicker;\r\n\t\t\tthis.$datepicker_modal = {};\r\n\t\t\tthis.$input = $datepicker.is('input') ? $datepicker : $datepicker.find('input');\r\n\t\t\tthis.calendar = {};\r\n\t\t\tthis.prev_selected_day = (typeof this.options.selected_day !== 'undefined') ? this.options.selected_day : '';\r\n\t\t\tthis.selected_day = (typeof this.options.selected_day !== 'undefined') ? this.options.selected_day : '';\r\n\t\t\tthis.formated_selected_day = this.selected_day.toString().split('-').reverse().join('.');\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault: {\r\n\t\t\tthrow new TypeError('Аргумент должен быть экземпляром jQuery, элементом DOM, либо CSS селектором')\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nDatePicker.prototype.init = function(){\r\n\tthis\r\n\t\t.bindOpener()\r\n\t\t.$datepicker.data('datepicker', this);\r\n\tthis.$datepicker.addClass('-unselectable -Handled_DatePicker');\r\n\treturn this;\r\n};\r\n\r\n\r\nDatePicker.prototype.bindOpener = function(){\r\n\tvar self = this;\r\n\tfunction open(){\r\n\t\tif(self.$input.is(':disabled')){\r\n\t\t\tself.$datepicker.one('click', open);\r\n\t\t} else {\r\n\t\t\tself.openDialog();\r\n\t\t}\r\n\t}\r\n\tthis.$datepicker.one('click', open);\r\n\treturn this;\r\n};\r\n\r\n\r\nDatePicker.prototype.openDialog = function(){\r\n\tvar self = this;\r\n\r\n\tthis.$datepicker.after(tmpl('datepicker', {}));\r\n\tthis.$datepicker_modal = this.$datepicker.siblings('.date_picker');\r\n\tthis.calendar = new Calendar(this.$datepicker_modal.children('.DatePickerCalendar'), {\r\n\t\tmin_date: this.options.min_date,\r\n\t\tmax_date: this.options.max_date\r\n\t});\r\n\tthis.calendar.init();\r\n\tthis.calendar.$calendar.on('days-changed', function(){\r\n\t\tself.prev_selected_day = self.selected_day;\r\n\t\tself.selected_day = self.calendar.selected_days.toString();\r\n\t\tself.formated_selected_day = self.calendar.selected_days.toString().split('-').reverse().join('.');\r\n\t\tif(!self.$datepicker.is('input')){\r\n\t\t\tself.$datepicker.find('label').text(self.formated_selected_day);\r\n\t\t}\r\n\t\tself.$input.val(self.selected_day).trigger('change');\r\n\r\n\t\tif(self.options.close_on_pick){\r\n\t\t\tself.destroy();\r\n\t\t}\r\n\t\tself.$datepicker.trigger('date-picked');\r\n\t});\r\n\tthis.bindCloseDialog();\r\n\treturn this;\r\n};\r\n\r\n\r\nDatePicker.prototype.bindCloseDialog = function(){\r\n\tvar self = this;\r\n\r\n\t$(document)\r\n\t\t.off('click.checkOnClick')\r\n\t\t.on('click.checkOnClick', function(e){self.checkOnClick(e)})\r\n\t\t.off('keydown.checkOnKeyDown')\r\n\t\t.on('keydown.checkOnKeyDown', function(e){self.checkOnKeyDown(e)});\r\n\r\n\t//TODO: Click on another datepicker doesn't close current\r\n\treturn this;\r\n};\r\n\r\nDatePicker.prototype.checkOnClick = function(e){\r\n\tvar $this = $(e.target);\r\n\tif(($this.closest(this.$datepicker_modal).length === 0 && $this.closest(this.$datepicker).length === 0) || $this.closest('.SubmitDatePicker').length){\r\n\t\tthis.destroy();\r\n\t}\r\n};\r\n\r\nDatePicker.prototype.checkOnKeyDown = function(e){\r\n\tvar self = this;\r\n\tif(e.keyCode === 9 || e.keyCode === 13 || e.keyCode === 27){\r\n\t\tself.destroy();\r\n\t}\r\n};\r\n\r\n\r\nDatePicker.prototype.destroy = function(){\r\n\t$(document).off('click.checkOnClick').off('keydown.checkOnKeyDown');\r\n\tthis.$datepicker_modal.remove();\r\n\tdelete this.calendar;\r\n\tthis.bindOpener().$datepicker.data('datepicker', '');\r\n\treturn this;\r\n};\r\n","/**\r\n *\r\n * @constructor\r\n * @augments jQuery\r\n * @param {(number|string)} id\r\n * @param {boolean} is_subscribed\r\n * @param {object} options\r\n */\r\nfunction ActionButton(id, is_subscribed, options) {\r\n\tvar self = this;\r\n\tthis.classes = $.extend(true, {subscribed_state: ''}, this.classes);\r\n\tthis.options = $.extend(true, this.options, options);\r\n\tthis.options.classes = this.options.classes ? this.options.classes : [];\r\n\tthis.states.forEach(function(state) {\r\n\t\tself.classes[state] = [];\r\n\t\tself.options.icons ? self.classes[state].push(self.options.icons[state]) : false;\r\n\t\tself.options.colors ? self.classes[state].push(self.options.colors[state]) : false;\r\n\t\tself.classes[state] = self.classes[state].join(' ');\r\n\t});\r\n\tthis.is_subscribed = is_subscribed;\r\n\tthis.id = id;\r\n\tjQuery.fn.init.call(this, __APP.BUILD.button({\r\n\t\tclasses: (\r\n\t\t\tself.is_subscribed ?\r\n\t\t\t\tself.options.classes.concat(self.classes.subscribed).concat(self.classes.subscribed_state) :\r\n\t\t\t\tself.options.classes.concat(self.classes.subscribe)\r\n\t\t).concat('fa_icon'),\r\n\t\ttitle: self.is_subscribed ? self.options.labels.subscribed : self.options.labels.subscribe\r\n\t}));\r\n\tthis.initiate();\r\n}\r\nActionButton.extend(jQuery);\r\nActionButton.prototype.states = ['subscribe', 'unsubscribe', 'subscribed'];\r\nActionButton.prototype.pushStack = function(elems) {\r\n\tvar ret = jQuery.merge(this.get(0) == elems ? new this.constructor(this.id, this.is_subscribed, this.options) : $(), elems);\r\n\tret.prevObject = this;\r\n\tret.context = this.context;\r\n\treturn ret;\r\n};\r\nActionButton.prototype.bindHoverEffects = function() {\r\n\tvar self = this;\r\n\tthis\r\n\t\t.off('mouseenter.hoverSubscribed mouseleave.hoverSubscribed')\r\n\t\t.on('mouseenter.hoverSubscribed', function() {\r\n\t\t\tself.removeClass(self.classes.subscribed).addClass(self.classes.unsubscribe);\r\n\t\t\tself.children('.Text').text(self.options.labels.unsubscribe);\r\n\t\t})\r\n\t\t.on('mouseleave.hoverSubscribed', function() {\r\n\t\t\tself.removeClass(self.classes.unsubscribe).addClass(self.classes.subscribed);\r\n\t\t\tself.children('.Text').text(self.options.labels.subscribed);\r\n\t\t});\r\n};\r\n/**\r\n * @interface\r\n */\r\nActionButton.prototype.bindClick = function() {};\r\nActionButton.prototype.afterSubscribe = function() {\r\n\tthis.removeClass([this.classes.subscribe, this.classes.subscribed].join(' '));\r\n\tthis.addClass([this.classes.subscribed_state, this.classes.unsubscribe].join(' '));\r\n\tthis.children('.Text').text(this.options.labels.unsubscribe);\r\n\tthis.is_subscribed = true;\r\n\tthis.bindHoverEffects();\r\n};\r\nActionButton.prototype.afterUnsubscribe = function() {\r\n\tthis.removeClass([this.classes.subscribed_state, this.classes.unsubscribe, this.classes.subscribed].join(' '));\r\n\tthis.addClass(this.classes.subscribe);\r\n\tthis.children('.Text').text(this.options.labels.subscribe);\r\n\tthis.is_subscribed = false;\r\n\tthis.off('mouseenter.hoverSubscribed mouseleave.hoverSubscribed');\r\n};\r\nActionButton.prototype.initiate = function() {\r\n\tif (this.is_subscribed) {\r\n\t\tthis.bindHoverEffects();\r\n\t}\r\n\tthis.bindClick();\r\n};","/**\r\n * @requires Class.ActionButton.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments ActionButton\r\n * @param {(number|string)} id\r\n * @param {boolean} is_subscribed\r\n * @param {object} options\r\n */\r\nfunction AddToFavoriteButton(id, is_subscribed, options) {\r\n\tthis.classes = {\r\n\t\tsubscribed_state: '-Favored'\r\n\t};\r\n\tthis.options = {\r\n\t\tlabels: {\r\n\t\t\tsubscribe: __LOCALES.ru_RU.TEXTS.BUTTON.ADD_FAVORITE,\r\n\t\t\tunsubscribe: __LOCALES.ru_RU.TEXTS.BUTTON.REMOVE_FAVORITE,\r\n\t\t\tsubscribed: __LOCALES.ru_RU.TEXTS.BUTTON.FAVORED\r\n\t\t},\r\n\t\tcolors: {\r\n\t\t\tsubscribe: '-color_neutral_accent',\r\n\t\t\tunsubscribe: '-color_accent',\r\n\t\t\tsubscribed: '-color_accent'\r\n\t\t},\r\n\t\ticons: {\r\n\t\t\tsubscribe: 'fa-star-o',\r\n\t\t\tunsubscribe: 'fa-times',\r\n\t\t\tsubscribed: 'fa-star'\r\n\t\t}\r\n\t};\r\n\tActionButton.apply(this, [id, is_subscribed, options]);\r\n}\r\nAddToFavoriteButton.extend(ActionButton);\r\nAddToFavoriteButton.prototype.bindClick = function() {\r\n\tvar self = this;\r\n\tthis.on('click.subscribe', function() {\r\n\t\tif (self.is_subscribed) {\r\n\t\t\tOneEvent.deleteFavored(self.id, function() {\r\n\t\t\t\tself.afterUnsubscribe();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tOneEvent.addFavored(self.id, function() {\r\n\t\t\t\tself.afterSubscribe();\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (window.askToSubscribe instanceof Function) {\r\n\t\t\twindow.askToSubscribe();\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires Class.ActionButton.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments ActionButton\r\n * @param {(number|string)} id\r\n * @param {boolean} is_subscribed\r\n * @param {object} options\r\n */\r\nfunction SubscribeButton(id, is_subscribed, options) {\r\n\tthis.classes = {\r\n\t\tsubscribed_state: '-Subscribed'\r\n\t};\r\n\tthis.options = {\r\n\t\tlabels: {\r\n\t\t\tsubscribe: __LOCALES.ru_RU.TEXTS.BUTTON.ADD_SUBSCRIPTION,\r\n\t\t\tunsubscribe: __LOCALES.ru_RU.TEXTS.BUTTON.REMOVE_SUBSCRIPTION,\r\n\t\t\tsubscribed: __LOCALES.ru_RU.TEXTS.BUTTON.SUBSCRIBED\r\n\t\t},\r\n\t\tcolors: {\r\n\t\t\tsubscribe: '-color_neutral_accent',\r\n\t\t\tunsubscribe: '-color_accent',\r\n\t\t\tsubscribed: '-color_accent'\r\n\t\t},\r\n\t\ticons: {\r\n\t\t\tsubscribe: 'fa-plus',\r\n\t\t\tunsubscribe: 'fa-times',\r\n\t\t\tsubscribed: 'fa-check'\r\n\t\t}\r\n\t};\r\n\tActionButton.apply(this, [id, is_subscribed, options]);\r\n}\r\nSubscribeButton.extend(ActionButton);\r\nSubscribeButton.prototype.bindClick = function() {\r\n\tvar self = this;\r\n\tthis.on('click.subscribe', function() {\r\n\t\tif (self.is_subscribed) {\r\n\t\t\t__APP.USER.unsubscribeFromOrganization(self.id, function() {\r\n\t\t\t\tself.afterUnsubscribe();\r\n\t\t\t\t$(window).trigger('unsubscribe', [self.id]);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t__APP.USER.subscribeToOrganization(self.id, function() {\r\n\t\t\t\tself.afterSubscribe();\r\n\t\t\t\t$(window).trigger('subscribe', [self.id]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (window.askToSubscribe instanceof Function) {\r\n\t\t\twindow.askToSubscribe();\r\n\t\t}\r\n\t});\r\n};","function Modal(title, content) {\r\n\tthis.title = title;\r\n\tthis.content = content;\r\n\tthis.modal = tmpl('modal', {\r\n\t\tmodal_title: this.title ? tmpl('modal-title', {title: this.title}) : '',\r\n\t\tmodal_content: content,\r\n\t\tmodal_footer: tmpl('modal-footer', {\r\n\t\t\tfooter_buttons: tmpl('button', {\r\n\t\t\t\tclasses: '-color_primary CloseModal RippleEffect',\r\n\t\t\t\ttitle: 'OK'\r\n\t\t\t})\r\n\t\t})\r\n\t});\r\n\t\r\n\tModal.pushModal(this);\r\n}\r\nModal.last_id = 0;\r\nModal.modals = {};\r\nModal.active_modal = undefined;\r\nModal.modal_destroyer = $('.modal_destroyer');\r\nModal.modal_wrapper = $('.modal_wrapper');\r\n\r\nModal.pushModal = function(modal) {\r\n\tmodal.id = ++Modal.last_id;\r\n\tModal.modals[modal.id] = modal;\r\n\tvar keys = Object.keys(Modal.modals);\r\n\tif (keys.length > 5) {\r\n\t\tModal.modals[keys[0]].destroy();\r\n\t}\r\n\tModal.modal_wrapper.append(modal.modal);\r\n};\r\n\r\nModal.hide = function() {\r\n\tif (Modal.active_modal !== undefined) {\r\n\t\tModal.active_modal.hide();\r\n\t}\r\n\t$('body').removeClass('-open_modal');\r\n};\r\n\r\nModal.bindCallModal = function($parent) {\r\n\t$parent = $parent ? $parent : $('body');\r\n\t$parent.find('.CallModal').not('.-Handled_CallModal').each(function() {\r\n\t\tvar $this = $(this),\r\n\t\t\ttitle = $this.data('modal_title'),\r\n\t\t\tmodal,\r\n\t\t\tmodal_id,\r\n\t\t\tmodal_type = $this.data('modal_type');\r\n\t\t\r\n\t\t$this.on('click.CallModal', function() {\r\n\t\t\tmodal_id = $this.data('modal_id');\r\n\t\t\tif (Modal.modals.hasOwnProperty(modal_id)) {\r\n\t\t\t\tModal.modals[modal_id].show();\r\n\t\t\t} else {\r\n\t\t\t\tswitch (modal_type) {\r\n\t\t\t\t\tcase 'favors': {\r\n\t\t\t\t\t\tmodal = new FavoredModal($this.data('modal_event_id'), title);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'subscribers': {\r\n\t\t\t\t\t\tmodal = new SubscribersModal($this.data('modal_organization_id'), title);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'editors': {\r\n\t\t\t\t\t\tmodal = new EditorsModal($this.data('modal_organization_id'), title, $this.data('modal_specific_role'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'map': {\r\n\t\t\t\t\t\tmodal = new MapModal($this.data('modal_map_location'), title);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'media': {\r\n\t\t\t\t\t\tvar type = $this.data('modal_media_type'),\r\n\t\t\t\t\t\t\turl = $this.data('modal_media_url');\r\n\t\t\t\t\t\tif (!url) {\r\n\t\t\t\t\t\t\tif ($this.is('img')) {\r\n\t\t\t\t\t\t\t\turl = $this.attr('src');\r\n\t\t\t\t\t\t\t\ttype = 'image';\r\n\t\t\t\t\t\t\t} else if ($this.is('video')) {\r\n\t\t\t\t\t\t\t\t//url = $this.attr('url');\r\n\t\t\t\t\t\t\t\ttype = 'video';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar str = $this.css('background-image');\r\n\t\t\t\t\t\t\t\tif (str !== 'none') {\r\n\t\t\t\t\t\t\t\t\tif (str.indexOf('\"') != -1) {\r\n\t\t\t\t\t\t\t\t\t\turl = str.slice(str.indexOf('\"') + 1, str.indexOf('\"', str.indexOf('\"') + 1));\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\turl = str.slice(str.indexOf('(') + 1, str.indexOf(')'));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttype = 'image';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmodal = new MediaModal(url, type);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'cropper': {\r\n\t\t\t\t\t\tmodal = new CropperModal($this.data('source_img'), {\r\n\t\t\t\t\t\t\t'aspectRatio': eval($this.data('aspect_ratio'))\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmodal.modal.one('modal.close', function() {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$this.removeClass('-hidden').off('click.CallModal').on('click.CallModal', function() {\r\n\t\t\t\t\t\t\t\tmodal_id = $this.data('modal_id');\r\n\t\t\t\t\t\t\t\tif (Modal.modals.hasOwnProperty(modal_id)) {\r\n\t\t\t\t\t\t\t\t\tif (Modal.modals[modal_id].image_src == $this.data('source_img')) {\r\n\t\t\t\t\t\t\t\t\t\tModal.modals[modal_id].show();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tModal.modals[modal_id].destroy();\r\n\t\t\t\t\t\t\t\t\t\tmodal = new CropperModal($this.data('source_img'), {\r\n\t\t\t\t\t\t\t\t\t\t\t'aspectRatio': eval($this.data('aspect_ratio'))\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t$this.data('modal_id', modal.id);\r\n\t\t\t\t\t\t\t\t\t\tmodal.initer = $this;\r\n\t\t\t\t\t\t\t\t\t\tmodal.show();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmodal = new CropperModal($this.data('source_img'), {\r\n\t\t\t\t\t\t\t\t\t\t'data': $this.data('crop_data'),\r\n\t\t\t\t\t\t\t\t\t\t'aspectRatio': eval($this.data('aspect_ratio'))\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t$this.data('modal_id', modal.id);\r\n\t\t\t\t\t\t\t\t\tmodal.initer = $this;\r\n\t\t\t\t\t\t\t\t\tmodal.show();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\tmodal = new Modal(title, $this.data('modal_content'));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$this.data('modal_id', modal.id);\r\n\t\t\t\tmodal.initer = $this;\r\n\t\t\t\tmodal.show();\r\n\t\t\t}\r\n\t\t});\r\n\t}).addClass('-Handled_CallModal');\r\n};\r\n\r\nModal.prototype.show = function() {\r\n\tthis.appear();\r\n};\r\n\r\nModal.prototype.appear = function() {\r\n\tvar self = this;\r\n\t\r\n\tModal.modal_wrapper.append(this.modal);\r\n\t$('body').addClass('-open_modal');\r\n\t\r\n\tif (Modal.active_modal !== undefined) {\r\n\t\tModal.active_modal.hide();\r\n\t}\r\n\tModal.active_modal = this;\r\n\t\r\n\tself.modal.addClass('-faded').removeClass(__C.CLASSES.NEW_HIDDEN);\r\n\tself.adjustDestroyer();\r\n\tself.modal.trigger('modal.show');\r\n\tsetTimeout(function() {\r\n\t\tself.modal.removeClass('-faded');\r\n\t}, 200);\r\n\t\r\n\tModal.modal_destroyer.off('click.CloseModal').on('click.CloseModal', function() {\r\n\t\t$(this).off('click.CloseModal');\r\n\t\tModal.hide();\r\n\t});\r\n\tself.modal.find('.CloseModal').off('click.CloseModal').on('click.CloseModal', function() {\r\n\t\tModal.hide();\r\n\t});\r\n\t$(document).on('keyup.CloseModal', function(event) {\r\n\t\tif (event.keyCode == 27) {\r\n\t\t\t$(this).off('keyup.CloseModal');\r\n\t\t\tModal.hide();\r\n\t\t}\r\n\t});\r\n};\r\n\r\nModal.prototype.hide = function() {\r\n\tthis.disappear();\r\n};\r\n\r\nModal.prototype.disappear = function() {\r\n\tvar self = this;\r\n\tModal.active_modal = undefined;\r\n\tself.modal.addClass('-faded');\r\n\tsetTimeout(function() {\r\n\t\tself.modal.addClass(__C.CLASSES.NEW_HIDDEN);\r\n\t\tself.modal.trigger('modal.close');\r\n\t}, 200);\r\n};\r\n\r\nModal.prototype.destroy = function() {\r\n\tthis.hide();\r\n\tModal.modal_wrapper.trigger('modal.beforeDestroy');\r\n\tthis.modal.remove();\r\n\tfor (var key in Modal.modals) {\r\n\t\tif (Modal.modals[key] == this) {\r\n\t\t\tdelete Modal.modals[key];\r\n\t\t}\r\n\t}\r\n\tModal.modal_wrapper.trigger('modal.afterDestroy');\r\n};\r\n\r\nModal.prototype.adjustDestroyer = function() {\r\n\tvar html_height = $('html').height(),\r\n\t\tmodal_height = this.modal.height() + 200;\r\n\tModal.modal_destroyer.height((modal_height > html_height) ? modal_height : html_height);\r\n};","/**\r\n * @requires Class.Modal.js\r\n */\r\n/**\r\n * @abstract\r\n * @augments Modal\r\n * @param {(string|number)} entity_id\r\n * @param {string} title\r\n */\r\nfunction AbstractUsersModal(entity_id, title) {\r\n\tthis.title = title;\r\n\tthis.entity_id = entity_id;\r\n\tthis.entities_length = 30;\r\n\tthis.disable_upload = false;\r\n\tthis.users = new UsersCollection();\r\n\tthis.is_first = true;\r\n\t\r\n\tthis.modal = tmpl('modal', {\r\n\t\tmodal_type: this.constructor.name,\r\n\t\tmodal_content_classes: 'ModalContent',\r\n\t\tmodal_title: tmpl('modal-title', {title: this.title})\r\n\t});\r\n\tthis.content = this.modal.find('.ModalContent');\r\n\t\r\n\tif (this.constructor === AbstractUsersModal) {\r\n\t\tthrow new Error(\"Can't instantiate abstract class!\");\r\n\t}\r\n}\r\nAbstractUsersModal.extend(Modal);\r\n\r\nAbstractUsersModal.prototype.show = function() {\r\n\tvar self = this;\r\n\t\r\n\tModal.modal_wrapper.data('block_scroll', false);\r\n\tModal.modal_wrapper.on('scroll.uploadUsers', function() {\r\n\t\tif (!self.disable_upload) {\r\n\t\t\tif (Modal.modal_wrapper.height() + Modal.modal_wrapper.scrollTop() >= self.modal.height()) {\r\n\t\t\t\tif (!Modal.modal_wrapper.data('block_scroll')) {\r\n\t\t\t\t\tModal.modal_wrapper.data('block_scroll', true);\r\n\t\t\t\t\tself.uploadUsers(function() {\r\n\t\t\t\t\t\tModal.modal_wrapper.data('block_scroll', false);\r\n\t\t\t\t\t\tself.adjustDestroyer();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tif (!this.users.length) {\r\n\t\tself.uploadUsers(function() {\r\n\t\t\tself.appear();\r\n\t\t});\r\n\t\t\r\n\t} else {\r\n\t\tself.appear();\r\n\t}\r\n};\r\n\r\nAbstractUsersModal.prototype.hide = function() {\r\n\tModal.modal_wrapper.data('block_scroll', false).off('scroll.uploadUsers');\r\n\tthis.disappear();\r\n\tModal.hide();\r\n};\r\n\r\nAbstractUsersModal.prototype.uploadUsers = function(callback) {};\r\n\r\nAbstractUsersModal.prototype.buildUsers = function(users, $wrapper) {\r\n\tvar $users = $(),\r\n\t\tlast_is_fiends = false,\r\n\t\tself = this;\r\n\t\r\n\tif (typeof $wrapper != 'undefined') {\r\n\t\tlast_is_fiends = $wrapper.find('.UserTombstone').eq(-1).data('is_friend') == 'true';\r\n\t}\r\n\t\r\n\tusers.forEach(function(user, i) {\r\n\t\tif ((self.is_first && !i) || last_is_fiends != user.is_friend) {\r\n\t\t\t$users = $users.add(tmpl('modal-users-divider', {label: user.is_friend ? 'Друзья' : 'Все'}));\r\n\t\t\tlast_is_fiends = user.is_friend;\r\n\t\t}\r\n\t\t\r\n\t\t$users = $users.add(__APP.BUILD.userTombstones(user, {\r\n\t\t\ttombstone_classes: ['UserTombstone'],\r\n\t\t\tis_link: true,\r\n\t\t\tdataset: {is_friend: user.is_friend}\r\n\t\t}));\r\n\t});\r\n\t$wrapper.append($users);\r\n\treturn $users;\r\n};\r\n\r\nAbstractUsersModal.prototype.afterUpload = function(users) {\r\n\tvar self = this,\r\n\t\t$new_users;\r\n\tif (users.length) {\r\n\t\t$new_users = this.buildUsers(users, this.content);\r\n\t\tthis.content.append($new_users);\r\n\t\tthis.is_first = false;\r\n\t\tthis.entities_length = 10;\r\n\t\tthis.adjustDestroyer();\r\n\t\tbindPageLinks(this.modal);\r\n\t\t$new_users.on('click.hideModal', function() {\r\n\t\t\tself.hide();\r\n\t\t});\r\n\t} else {\r\n\t\tthis.disable_upload = true;\r\n\t}\r\n};","/**\r\n * @requires Class.Modal.js\r\n */\r\nfunction CropperModal(image_src, cropper_options) {\r\n\tif (image_src) {\r\n\t\tthis.image_src = image_src;\r\n\t\tthis.title = 'Кадрирование';\r\n\t\tthis.content = tmpl('modal-cropper-content', {image_src: this.image_src});\r\n\t\t\r\n\t\tthis.modal = tmpl('modal', {\r\n\t\t\tmodal_type: 'CropperModal',\r\n\t\t\tmodal_title: tmpl('modal-title', {title: this.title}),\r\n\t\t\tmodal_content: this.content,\r\n\t\t\tmodal_footer: tmpl('modal-footer', {\r\n\t\t\t\tfooter_buttons: $()\r\n\t\t\t\t\t.add(tmpl('button', {classes: '-color_primary CropButton RippleEffect', title: 'Кадрировать'}))\r\n\t\t\t\t\t.add(tmpl('button', {classes: '-color_default DestroyCropButton RippleEffect', title: 'Отмена'}))\r\n\t\t\t})\r\n\t\t});\r\n\t\tthis.cropper = this.modal.find('.Cropper');\r\n\t\tthis.crop_button = this.modal.find('.CropButton');\r\n\t\tthis.destroy_crop_button = this.modal.find('.DestroyCropButton');\r\n\t\tcropper_options = typeof cropper_options == 'object' ? cropper_options : {};\r\n\t\tthis.options = $.extend({\r\n\t\t\tviewMode: 1,\r\n\t\t\tzoomable: false,\r\n\t\t\tzoomOnWheel: false\r\n\t\t}, cropper_options);\r\n\t\tModal.pushModal(this);\r\n\t} else {\r\n\t\tthrow Error('To initiate cropper you need to pass image source (image_src)')\r\n\t}\r\n}\r\nCropperModal.extend(Modal);\r\n\r\n\r\nCropperModal.prototype.show = function() {\r\n\tvar self = this;\r\n\t\r\n\tself.cropper.on('load', function() {\r\n\t\tself.cropper.cropper(self.options)\r\n\t}).attr('src', self.image_src);\r\n\t\r\n\tself.__superCall('show');\r\n\t\r\n\tself.modal.on('modal.beforeDestroy', function() {\r\n\t\tself.cropper.cropper('destroy');\r\n\t\tself.crop_button.off('click.Crop');\r\n\t\tself.destroy_crop_button.off('click.DestroyCrop');\r\n\t});\r\n\t\r\n\tself.crop_button.off('click.Crop').on('click.Crop', function() {\r\n\t\tself.crop();\r\n\t\tModal.hide();\r\n\t});\r\n\tself.destroy_crop_button.off('click.DestroyCrop').on('click.DestroyCrop', function() {\r\n\t\tModal.hide();\r\n\t});\r\n};\r\n\r\nCropperModal.prototype.crop = function() {\r\n\tvar self = this;\r\n\tself.initer.trigger('crop', [self.cropper.cropper('getCroppedCanvas').toDataURL(), self.cropper.cropper('getData')]);\r\n};","/**\r\n * @requires Class.AbstractUsersModal.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments AbstractUsersModal\r\n * @param {(string|number)} organization_id\r\n * @param {string} [title='Редаторы']\r\n * @param {OneUser.ROLE} [specific_role]\r\n */\r\nfunction EditorsModal(organization_id, title, specific_role) {\r\n\tAbstractUsersModal.apply(this, [organization_id, title ? title : 'Редакторы']);\r\n\tthis.ajax_data = {\r\n\t\torder_by: 'role,first_name'\r\n\t};\r\n\t\r\n\tif (specific_role) {\r\n\t\tthis.ajax_data.roles = specific_role;\r\n\t}\r\n\t\r\n\t\r\n\tModal.pushModal(this);\r\n}\r\nEditorsModal.extend(AbstractUsersModal);\r\n\r\nEditorsModal.prototype.uploadUsers = function(callback) {\r\n\tvar self = this;\r\n\t\r\n\tthis.users.fetchOrganizationStaff(this.entity_id, this.entities_length, this.ajax_data, function(users) {\r\n\t\tself.afterUpload(users);\r\n\t\tif (callback && typeof callback == 'function') {\r\n\t\t\tcallback(users);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nEditorsModal.prototype.buildUsers = function(users, $wrapper) {\r\n\tvar $users = $(),\r\n\t\tlast_role = false,\r\n\t\tlabels = {\r\n\t\t\tadmin: 'Администраторы',\r\n\t\t\tmoderator: 'Модераторы'\r\n\t\t},\r\n\t\tself = this;\r\n\t\r\n\tif (typeof $wrapper != 'undefined') {\r\n\t\tlast_role = $wrapper.find('.UserTombstone').last().data('role');\r\n\t}\r\n\t\r\n\tusers.forEach(function(user, i) {\r\n\t\tif ((self.is_first && !i) || last_role != user.role) {\r\n\t\t\t$users = $users.add(tmpl('modal-users-divider', {label: labels[user.role]}));\r\n\t\t\tlast_role = user.role;\r\n\t\t}\r\n\t\t\r\n\t\t$users = $users.add(__APP.BUILD.userTombstones(user, {\r\n\t\t\ttombstone_classes: ['UserTombstone'],\r\n\t\t\tis_link: true,\r\n\t\t\tdataset: {role: user.role}\r\n\t\t}));\r\n\t});\r\n\t$wrapper.append($users);\r\n\treturn $users;\r\n};","/**\r\n * @requires Class.AbstractUsersModal.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments AbstractUsersModal\r\n * @param {(number|string)} event_id\r\n * @param {string} [title='Добавили в избранное']\r\n */\r\nfunction FavoredModal(event_id, title) {\r\n\tif (event_id) {\r\n\t\tAbstractUsersModal.apply(this, [event_id, title ? title : 'Добавили в избранное']);\r\n\t\tthis.ajax_data = {\r\n\t\t\tfields: ['is_friend'],\r\n\t\t\torder_by: '-is_friend,first_name'\r\n\t\t};\r\n\t\t\r\n\t\tModal.pushModal(this);\r\n\t} else {\r\n\t\tthrow Error('To open favored modal you need to pass event_id');\r\n\t}\r\n}\r\nFavoredModal.extend(AbstractUsersModal);\r\n\r\nFavoredModal.prototype.uploadUsers = function(callback) {\r\n\tvar self = this;\r\n\t\r\n\tthis.users.fetchEventFavorites(this.entity_id, this.entities_length, this.ajax_data, function(users) {\r\n\t\tself.afterUpload(users);\r\n\t\tif (callback && typeof callback == 'function') {\r\n\t\t\tcallback(users);\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires Class.Modal.js\r\n */\r\nfunction MapModal(location, title) {\r\n\tif (location) {\r\n\t\tthis.location = location;\r\n\t\tthis.title = title ? title : 'Место проведения события';\r\n\t\tthis.content = tmpl('modal-map-content', {location: this.location});\r\n\t\t\r\n\t\tthis.modal = tmpl('modal', {\r\n\t\t\tmodal_type: 'MapModal',\r\n\t\t\tmodal_content_classes: '-no_padding',\r\n\t\t\tmodal_title: tmpl('modal-title', {title: this.title}),\r\n\t\t\tmodal_content: this.content\r\n\t\t});\r\n\t\tModal.pushModal(this);\r\n\t} else {\r\n\t\tthrow Error('To initiate map you need to pass location (location)')\r\n\t}\r\n}\r\nMapModal.extend(Modal);","/**\r\n * @requires Class.Modal.js\r\n */\r\nfunction MediaModal(src, format) {\r\n\tif (src) {\r\n\t\tthis.src = src;\r\n\t\tthis.format = format ? format : 'image';\r\n\t\tthis.title = '';\r\n\t\tif (format == 'image') {\r\n\t\t\tthis.content = tmpl('modal-image-media-content', {src: this.src});\r\n\t\t} else {\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.modal = tmpl('modal', {\r\n\t\t\tmodal_type: 'MediaModal',\r\n\t\t\tmodal_content_classes: '-no_padding ModalContent',\r\n\t\t\tmodal_content: this.content\r\n\t\t});\r\n\t\tthis.modal.on('modal.show', function() {\r\n\t\t\tModal.modal_wrapper.addClass('-blackened');\r\n\t\t});\r\n\t\tthis.modal.on('modal.close', function() {\r\n\t\t\tModal.modal_wrapper.removeClass('-blackened');\r\n\t\t});\r\n\t\tModal.pushModal(this);\r\n\t} else {\r\n\t\tthrow Error('To open media you need to pass media source (src)')\r\n\t}\r\n}\r\nMediaModal.extend(Modal);\r\n\r\nMediaModal.prototype.show = function() {\r\n\tvar self = this,\r\n\t\t$window = $(window),\r\n\t\twindow_max_w = $window.width() * 0.8,\r\n\t\t$media, real_w, real_h;\r\n\t\r\n\tself.modal.on('modal.show', function() {\r\n\t\tswitch (this.format) {\r\n\t\t\tdefault:\r\n\t\t\tcase 'image': {\r\n\t\t\t\tfunction onLoad() {\r\n\t\t\t\t\treal_w = $media.width();\r\n\t\t\t\t\treal_h = $media.height();\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.modal.width((real_w > window_max_w) ? window_max_w : real_w);\r\n\t\t\t\t\tself.modal.height((real_w > window_max_w) ? (window_max_w * real_h / real_w) : real_h);\r\n\t\t\t\t\t$media.wrap($('<div>').addClass('img_holder'));\r\n\t\t\t\t\tself.adjustDestroyer();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$media = self.modal.find('img');\r\n\t\t\t\tif ($media.width()) {\r\n\t\t\t\t\tonLoad();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$media.on('load', onLoad)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tself.__superCall('show');\r\n};","/**\r\n * @requires Class.AbstractUsersModal.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments AbstractUsersModal\r\n * @param {(string|number)} organization_id\r\n * @param {string} [title='Подписались']\r\n */\r\nfunction SubscribersModal(organization_id, title) {\r\n\tif (organization_id) {\r\n\t\tAbstractUsersModal.apply(this, [organization_id, title ? title : 'Подписались']);\r\n\t\tthis.entity_id = organization_id;\r\n\t\tthis.ajax_data = {\r\n\t\t\tfields: ['is_friend'],\r\n\t\t\torder_by: '-is_friend,first_name'\r\n\t\t};\r\n\t\t\r\n\t\tModal.pushModal(this);\r\n\t} else {\r\n\t\tthrow Error('To open favored modal you need to pass organization_id');\r\n\t}\r\n}\r\n\r\nSubscribersModal.prototype.uploadUsers = function(callback) {\r\n\tvar self = this;\r\n\t\r\n\tthis.users.fetchOrganizationSubscribers(this.entity_id, this.entities_length, this.ajax_data, function(users) {\r\n\t\tself.afterUpload(users);\r\n\t\tif (callback && typeof callback == 'function') {\r\n\t\t\tcallback(users);\r\n\t\t}\r\n\t});\r\n};","/**\r\n *\r\n * @abstract\r\n */\r\nfunction Page() {\r\n\tthis.name = this.constructor.name;\r\n\tthis.state_name = this.name;\r\n\tthis.page_title = '';\r\n\t/**\r\n\t * @name Page#$view\r\n\t * @type jQuery\r\n\t */\r\n\tthis.$view = $('.PageView');\r\n\t/**\r\n\t * @name Page#$wrapper\r\n\t * @type jQuery\r\n\t */\r\n\tthis.$wrapper = $();\r\n\tthis.wrapper_tmpl = 'std';\r\n\tthis.is_loading = false;\r\n\tthis.can_render = false;\r\n\tthis.with_header_tabs = false;\r\n}\r\nObject.defineProperty(Page, 'PAGES', {\r\n\tvalue: {\r\n\t\t'event': {\r\n\t\t\t'add_to': {\r\n\t\t\t\t'^([0-9]+)': AddEventPage,\r\n\t\t\t\t'': AddEventPage\r\n\t\t\t},\r\n\t\t\t'add': AddEventPage,\r\n\t\t\t'^([0-9]+)': {\r\n\t\t\t\t'edit': RedactEventPage,\r\n\t\t\t\t'': OneEventPage\r\n\t\t\t},\r\n\t\t\t'': FeedPage\r\n\t\t},\r\n\t\t'feed': {\r\n\t\t\t'actual': ActualEventsPage,\r\n\t\t\t'timeline': TimelineEventsPage,\r\n\t\t\t'favored': FavoredEventsPage,\r\n\t\t\t'recommendations': RecommendedEventsPage,\r\n\t\t\t'friends': FriendsEventsPage,\r\n\t\t\t'day': {\r\n\t\t\t\t'^([0-9]{4}-[0-9]{2}-[0-9]{2})': DayEventsPage //Very shitty way to detect date\r\n\t\t\t},\r\n\t\t\t'': FeedPage\r\n\t\t},\r\n\t\t'organizations': {\r\n\t\t\t'^([0-9]+)': CatalogPage,\r\n\t\t\t'': CatalogPage\r\n\t\t},\r\n\t\t'organization': {\r\n\t\t\t'add': AddOrganizationPage,\r\n\t\t\t'^([0-9]+)': {\r\n\t\t\t\t'edit': EditOrganizationPage,\r\n\t\t\t\t'': OrganizationPage\r\n\t\t\t},\r\n\t\t\t'': CatalogPage\r\n\t\t},\r\n\t\t'onboarding': OnboardingPage,\r\n\t\t'search': {\r\n\t\t\t'^([^/]+)': SearchPage\r\n\t\t},\r\n\t\t'friends': FriendsPage,\r\n\t\t'friend': {\r\n\t\t\t'^([0-9]+)': OneFriendPage,\r\n\t\t\t'': FriendsPage\r\n\t\t},\r\n\t\t'statistics': {\r\n\t\t\t'organization': {\r\n\t\t\t\t'^([0-9]+)': StatisticsOrganizationOverviewPage\r\n\t\t\t},\r\n\t\t\t'event': {\r\n\t\t\t\t'^([0-9]+)': StatisticsEventOverviewPage\r\n\t\t\t},\r\n\t\t\t'': StatisticsOverviewPage\r\n\t\t}\r\n\t}\r\n});\r\n/**\r\n * Routing\r\n * @param {string} path\r\n * @return {Page}\r\n */\r\nPage.routeNewPage = function(path) {\r\n\tvar path_split = decodeURIComponent(path).split('/').splice(1),\r\n\t\tpages_child = Page.PAGES,\r\n\t\targs = [], i, key, PageClass;\r\n\t\r\n\tfor (i = 0; i < path_split.length; i++) {\r\n\t\tif (pages_child.hasOwnProperty(path_split[i])) {\r\n\t\t\tif (i < path_split.length - 1) {\r\n\t\t\t\tpages_child = pages_child[path_split[i]];\r\n\t\t\t} else {\r\n\t\t\t\tPageClass = pages_child[path_split[i]];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (key in pages_child) {\r\n\t\t\t\tif (key.indexOf('^') === 0 && (new RegExp(key)).test(path_split[i])) {\r\n\t\t\t\t\targs.push(path_split[i]);\r\n\t\t\t\t\tif (i < path_split.length - 1) {\r\n\t\t\t\t\t\tpages_child = pages_child[key];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tPageClass = pages_child[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tPageClass = PageClass ? PageClass : pages_child; // In case of trailing slash in url\r\n\tPageClass = PageClass.prototype instanceof Page ? PageClass : PageClass['']; // Open default page\r\n\treturn new (Function.prototype.bind.apply(PageClass, [null].concat(args)))(); // new Page(...args)\r\n};\r\n\r\nPage.triggerRender = function() {\r\n\t$(window).trigger('page_load');\r\n};\r\n\r\nPage.prototype.show = function() {\r\n\tvar PAGE = this,\r\n\t\t$main_header = $('#main_header'),\r\n\t\tis_other_page = __APP.PREVIOUS_PAGE.wrapper_tmpl !== PAGE.wrapper_tmpl,\r\n\t\twrapper_field = is_other_page ? '$view' : '$wrapper',\r\n\t\t$prev = __APP.PREVIOUS_PAGE[wrapper_field].length ? __APP.PREVIOUS_PAGE[wrapper_field] : is_other_page ? $('.PageView') : $('.PageView').find('.Content'),\r\n\t\t$window = $(window);\r\n\t\r\n\tif (PAGE.page_title) {\r\n\t\t__APP.changeTitle(PAGE.page_title);\r\n\t}\r\n\t$prev.addClass('-faded');\r\n\t\r\n\tif (__APP.CURRENT_JQXHR && __APP.CURRENT_JQXHR.status == 1) {\r\n\t\t__APP.CURRENT_JQXHR.abort();\r\n\t}\r\n\t\r\n\t$window.on('page_render', function() {\r\n\t\tif (PAGE.can_render && !PAGE.is_loading) {\r\n\t\t\t$window.off('page_render');\r\n\t\t\t$(window).scrollTop(0);\r\n\t\t\tPAGE.render();\r\n\t\t\tbindPageLinks();\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tPAGE[wrapper_field].removeClass('-faded');\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\t$window.one('page_load', function() {\r\n\t\tPAGE.is_loading = false;\r\n\t\tif (PAGE.can_render) {\r\n\t\t\t$window.trigger('page_render');\r\n\t\t}\r\n\t});\r\n\tsetTimeout(function() {\r\n\t\t$prev.addClass(__C.CLASSES.NEW_HIDDEN);\r\n\t\t\r\n\t\tif (PAGE.with_header_tabs) {\r\n\t\t\t$main_header.addClass('-with_tabs');\r\n\t\t} else {\r\n\t\t\t$main_header.removeClass('-with_tabs');\r\n\t\t}\r\n\t\t\r\n\t\t$('body').removeClass(function(index, css) {\r\n\t\t\treturn (css.match(/(^|\\s)-state_\\S+/g) || []).join(' ');\r\n\t\t}).addClass('-state_' + PAGE.state_name.toUnderscore());\r\n\t\t\r\n\t\tif (is_other_page) {\r\n\t\t\tPAGE.$view.html(tmpl(PAGE.wrapper_tmpl + '-wrapper', {}));\r\n\t\t}\r\n\t\tPAGE.$wrapper = PAGE.$view.find('.Content');\r\n\t\tPAGE.$wrapper.empty();\r\n\t\t\r\n\t\tPAGE.$view.removeClass(__C.CLASSES.NEW_HIDDEN);\r\n\t\tPAGE.$wrapper.removeClass(__C.CLASSES.NEW_HIDDEN);\r\n\t\tPAGE[wrapper_field].addClass('-faded');\r\n\t\t\r\n\t\tPAGE.can_render = true;\r\n\t\tif (!PAGE.is_loading) {\r\n\t\t\t$window.trigger('page_render');\r\n\t\t}\r\n\t}, 200);\r\n};\r\n/**\r\n * @interface\r\n */\r\nPage.prototype.render = function() {};\r\n/**\r\n * @interface\r\n */\r\nPage.prototype.destroy = function() {};","/**\r\n * @requires ../../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @abstract\r\n * @augments Page\r\n */\r\nfunction FeedPage() {\r\n\tPage.apply(this);\r\n\tthis.fields = [\r\n\t\t'organization_name',\r\n\t\t'organization_short_name',\r\n\t\t'organization_logo_small_url',\r\n\t\t'dates',\r\n\t\t'is_same_time',\r\n\t\t'favored_users_count',\r\n\t\t'is_favorite',\r\n\t\t'favored{fields:\"is_friend\",order_by:\"-is_friend\",length:10}',\r\n\t\t'registration_required',\r\n\t\t'registration_till',\r\n\t\t'is_free',\r\n\t\t'min_price'\r\n\t];\r\n\tthis.events = new EventsCollection();\r\n\tthis.next_events_length = 20;\r\n\tthis.wrapper_tmpl = 'feed';\r\n\tthis.with_header_tabs = true;\r\n}\r\nFeedPage.extend(Page);\r\n\r\nFeedPage.prototype.bindFeedEvents = function($parent) {\r\n\tbindAddAvatar($parent);\r\n\ttrimAvatarsCollection($parent);\r\n\tbindRippleEffect($parent);\r\n\tbindDropdown($parent);\r\n\tModal.bindCallModal($parent);\r\n\tbindPageLinks($parent);\r\n\t\r\n\t$parent.find('.HideEvent').not('.-Handled_HideEvent').each(function() {\r\n\t\tvar $this = $(this),\r\n\t\t\t$event = $this.parents('.FeedEvent'),\r\n\t\t\tevent_id = $this.data(\"event-id\");\r\n\t\t\r\n\t\t$this.on('click', function() {\r\n\t\t\t$event.addClass('-cancel');\r\n\t\t\tOneEvent.changeEventStatus(event_id, OneEvent.STATUS.HIDE, function() {\r\n\t\t\t\t$event.after(tmpl('button', {\r\n\t\t\t\t\tclasses: '-color_neutral ReturnEvent',\r\n\t\t\t\t\ttitle: 'Вернуть событие',\r\n\t\t\t\t\tdataset: 'data-event-id=\"' + event_id + '\"'\r\n\t\t\t\t}));\r\n\t\t\t\t$event.siblings('.ReturnEvent').not('.-Handled_ReturnEvent').on('click', function() {\r\n\t\t\t\t\tvar $remove_button = $(this);\r\n\t\t\t\t\tOneEvent.changeEventStatus(event_id, OneEvent.STATUS.SHOW, function() {\r\n\t\t\t\t\t\t$remove_button.remove();\r\n\t\t\t\t\t\t$event.removeClass('-cancel');\r\n\t\t\t\t\t});\r\n\t\t\t\t}).addClass('-Handled_ReturnEvent');\r\n\t\t\t});\r\n\t\t});\r\n\t}).addClass('-Handled_HideEvent');\r\n};\r\n\r\nFeedPage.prototype.addNoEventsBlock = function() {\r\n\tvar $no_events_block = tmpl('feed-no-event', {\r\n\t\ttext: 'Как насчет того, чтобы подписаться на организации?',\r\n\t\tbutton: __APP.BUILD.link({\r\n\t\t\ttitle: 'Перейти к каталогу',\r\n\t\t\tclasses: ['button', '-color_neutral_accent', 'RippleEffect'],\r\n\t\t\tpage: '/organizations'\r\n\t\t})\r\n\t}, this.$wrapper);\r\n\tbindPageLinks($no_events_block);\r\n\tbindRippleEffect($no_events_block);\r\n};\r\n/**\r\n *\r\n * @param {function(jQuery)} [success]\r\n * @returns {jqXHR}\r\n */\r\nFeedPage.prototype.appendEvents = function(success) {\r\n\tvar PAGE = this;\r\n\t\r\n\tPAGE.block_scroll = true;\r\n\treturn PAGE.events.fetchFeed(this.fields, this.next_events_length, function(events) {\r\n\t\tvar $events = __APP.BUILD.feedEventCards(events);\r\n\t\tPAGE.block_scroll = false;\r\n\t\tif ($events.length) {\r\n\t\t\tPAGE.$wrapper.append($events);\r\n\t\t\tPAGE.bindFeedEvents($events);\r\n\t\t\tif (success && typeof success == 'function') {\r\n\t\t\t\tsuccess($events);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tPAGE.addNoEventsBlock();\r\n\t\t\t$(window).off('scroll.upload' + PAGE.constructor.name);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nFeedPage.prototype.initFeedCalendar = function() {\r\n\tvar PAGE = this,\r\n\t\tselected_date = PAGE.events.date,\r\n\t\tMainCalendar = new Calendar(PAGE.$view.find('.FeedCalendar'), {\r\n\t\t\tclasses: {\r\n\t\t\t\twrapper_class: 'feed_calendar_wrapper',\r\n\t\t\t\ttable_class: 'feed_calendar_table',\r\n\t\t\t\tthead_class: 'feed_calendar_thead',\r\n\t\t\t\ttbody_class: 'feed_calendar_tbody',\r\n\t\t\t\tth_class: 'feed_calendar_th',\r\n\t\t\t\ttd_class: 'feed_calendar_td',\r\n\t\t\t\ttd_disabled: __C.CLASSES.NEW_DISABLED\r\n\t\t\t}\r\n\t\t});\r\n\t\r\n\tMainCalendar.init();\r\n\tif (selected_date) {\r\n\t\tMainCalendar.setMonth(selected_date.split('-')[1], selected_date.split('-')[0]).selectDays(selected_date);\r\n\t}\r\n\tMainCalendar.setDaysWithEvents();\r\n\tMainCalendar.$calendar.on('month-changed', function() {\r\n\t\tbindPageLinks(MainCalendar.$calendar);\r\n\t\tMainCalendar.setDaysWithEvents();\r\n\t});\r\n};\r\n\r\nFeedPage.prototype.render = function() {\r\n\tvar PAGE = this,\r\n\t\t$window = $(window);\r\n\t\r\n\t__APP.renderHeaderTabs([\r\n\t\t{title: 'Актуальные', page: '/feed/actual'},\r\n\t\t{title: 'По времени', page: '/feed/timeline'},\r\n\t\t{title: 'Избранные', page: '/feed/favored'},\r\n\t\t{title: 'Рекомендованные', page: '/feed/recommendations'}/*,\r\n\t\t {title: 'Друзья', page: '/feed/friends/'},*/\r\n\t]);\r\n\t\r\n\tif (!(__APP.PREVIOUS_PAGE instanceof FeedPage)) {\r\n\t\tPAGE.initFeedCalendar();\r\n\t}\r\n\tif (window.location.pathname == '/feed/' || window.location.pathname == '/feed' || !window.location.pathname.contains('feed')) {\r\n\t\t__APP.changeState('/feed/actual', true, true);\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t$window.off('scroll');\r\n\t__APP.CURRENT_JQXHR = PAGE.appendEvents(function() {\r\n\t\t$window.on('scroll.upload' + PAGE.constructor.name, function() {\r\n\t\t\tif ($window.height() + $window.scrollTop() + 200 >= $(document).height() && !PAGE.block_scroll) {\r\n\t\t\t\t__APP.CURRENT_JQXHR = PAGE.appendEvents();\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n};","/**\r\n * @requires Class.FeedPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments FeedPage\r\n */\r\nfunction ActualEventsPage() {\r\n\tFeedPage.apply(this);\r\n\tthis.events = new ActualEventsCollection();\r\n\tthis.page_title = 'Актуальные события';\r\n}\r\nActualEventsPage.extend(FeedPage);","/**\r\n * @requires Class.FeedPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Events\r\n * @param {string} date\r\n */\r\nfunction DayEventsPage(date) {\r\n\tif (!date)\r\n\t\tthrow Error('DayEventsCollection must have date parameter');\r\n\tFeedPage.apply(this);\r\n\tthis.date = date;\r\n\tthis.events = new DayEventsCollection(this.date);\r\n\tthis.page_title = 'События на ' + moment(this.date).format('D MMMM YYYY');\r\n}\r\nDayEventsPage.extend(FeedPage);","/**\r\n * @requires Class.FeedPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Events\r\n */\r\nfunction FavoredEventsPage() {\r\n\tFeedPage.apply(this);\r\n\tthis.events = new FavoredEventsCollection();\r\n\tthis.page_title = 'Избранные события';\r\n}\r\nFavoredEventsPage.extend(FeedPage);","/**\r\n * @requires Class.FeedPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Events\r\n */\r\nfunction FriendsEventsPage() {\r\n\tFeedPage.apply(this);\r\n\tthis.events = new FriendsEventsCollection();\r\n\tthis.page_title = 'События друзей';\r\n}\r\nFriendsEventsPage.extend(FeedPage);","/**\r\n * @requires Class.FeedPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Events\r\n */\r\nfunction RecommendedEventsPage() {\r\n\tFeedPage.apply(this);\r\n\tthis.events = new RecommendedEventsCollection();\r\n\tthis.page_title = 'Рекомендованные события';\r\n}\r\nRecommendedEventsPage.extend(FeedPage);","/**\r\n * @requires Class.FeedPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments FeedPage\r\n */\r\nfunction TimelineEventsPage() {\r\n\tFeedPage.apply(this);\r\n\tthis.events = new TimelineEventsCollection();\r\n\tthis.page_title = 'События по времени';\r\n}\r\nTimelineEventsPage.extend(FeedPage);","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @abstract\r\n * @augments Page\r\n */\r\nfunction StatisticsPage() {\r\n\tPage.apply(this);\r\n\tthis.state_name = 'statistics';\r\n\tthis.SCALES = {\r\n\t\tMINUTE: 'minute',\r\n\t\tHOUR: 'hour',\r\n\t\tDAY: 'day',\r\n\t\tWEEK: 'week',\r\n\t\tMONTH: 'month',\r\n\t\tYEAR: 'year',\r\n\t\tOVERALL: 'overall'\r\n\t};\r\n\tthis.highchart_defaults = {\r\n\t\tchart: {\r\n\t\t\tbackgroundColor: null,\r\n\t\t\tplotBorderWidth: null,\r\n\t\t\tplotShadow: false,\r\n\t\t\tstyle: {\r\n\t\t\t\tfontFamily: 'inherit',\r\n\t\t\t\tfontSize: 'inherit'\r\n\t\t\t}\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\ttext: false\r\n\t\t},\r\n\t\tcredits: {\r\n\t\t\tenabled: false\r\n\t\t}\r\n\t};\r\n}\r\nStatisticsPage.extend(Page);\r\n/**\r\n *\r\n * @param {object} raw_data\r\n * @returns {object}\r\n */\r\nStatisticsPage.prototype.areaChartSeriesNormalize = function(raw_data) {\r\n\tvar CONVERSATIONS = {\r\n\t\t\topen_conversion: {\r\n\t\t\t\twith: 'open_site',\r\n\t\t\t\tto: 'view'\r\n\t\t\t},\r\n\t\t\tfave_conversion: {\r\n\t\t\t\twith: 'fave',\r\n\t\t\t\tto: 'open_site'\r\n\t\t\t},\r\n\t\t\tconversion: {\r\n\t\t\t\twith: 'subscribe',\r\n\t\t\t\tto: 'view'\r\n\t\t\t}\r\n\t\t},\r\n\t\tCOMPARISONS = {\r\n\t\t\tsubscribe_unsubscribe: {\r\n\t\t\t\tsubscribe: 'subscribe',\r\n\t\t\t\tunsubscribe: 'unsubscribe'\r\n\t\t\t}\r\n\t\t},\r\n\t\tSTD_NAMES = {\r\n\t\t\t'view': 'Просмотры',\r\n\t\t\t'conversion': 'Конверсия',\r\n\t\t\t'subscribe': 'Подписалось',\r\n\t\t\t'unsubscribe': 'Отписалось',\r\n\t\t\t'open_site': 'Открытий страницы события из ленты Evendate',\r\n\t\t\t'open_conversion': 'Конверсия просмотра события в ленте к открытию страницы события',\r\n\t\t\t'fave': 'Кол-во пользователей, которые добавили событие в избранное',\r\n\t\t\t'fave_conversion': 'Конверсия открытия страницы события к добавлениям в избранное'\r\n\t\t},\r\n\t\tHIDDEN_SERIES_OPTIONS = {\r\n\t\t\tshowInLegend: false,\r\n\t\t\tlineWidth: 0,\r\n\t\t\tfillOpacity: 0,\r\n\t\t\tstates: {\r\n\t\t\t\thover: {\r\n\t\t\t\t\tenabled: false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\toutput = {};\r\n\t\r\n\tfunction dataNormalize(raw_data, field, value_field_name) {\r\n\t\treturn {\r\n\t\t\tname: STD_NAMES[field],\r\n\t\t\tdata: raw_data.map(function(line, i) {\r\n\t\t\t\treturn [moment.unix(line.time_value).valueOf(), line[value_field_name]];\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t$.each(raw_data, function(key, data){\r\n\t\toutput[key] = [];\r\n\t\tif(CONVERSATIONS.hasOwnProperty(key)){\r\n\t\t\toutput[key].push($.extend(true, { tooltip: {valueSuffix: ' %'} }, dataNormalize(data, key, 'value')));\r\n\t\t\t$.each(CONVERSATIONS[key], function(field_key, field) {\r\n\t\t\t\toutput[key].push($.extend(true, {}, HIDDEN_SERIES_OPTIONS, dataNormalize(data, field, field_key)));\r\n\t\t\t})\r\n\t\t}\r\n\t\telse if(COMPARISONS.hasOwnProperty(key)) {\r\n\t\t\t$.each(COMPARISONS[key], function(field_key, field) {\r\n\t\t\t\toutput[key].push(dataNormalize(data, field, field_key));\r\n\t\t\t})\r\n\t\t}\r\n\t\telse {\r\n\t\t\toutput[key].push(dataNormalize(data, key, 'value'));\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn output;\r\n};\r\n/**\r\n *\r\n * @param {object} data\r\n * @param {object} [additional_options]\r\n */\r\nStatisticsPage.prototype.buildAreaCharts = function(data, additional_options) {\r\n\tvar self = this,\r\n\t\tnormalized_series = self.areaChartSeriesNormalize(data),\r\n\t\tFIELDS = {\r\n\t\t\tview: {\r\n\t\t\t\ttitle: 'Просмотры',\r\n\t\t\t\twrapper_class: 'ViewAreaChart'\r\n\t\t\t},\r\n\t\t\topen_site: {\r\n\t\t\t\ttitle: 'Открытий страницы события',\r\n\t\t\t\twrapper_class: 'OpenSiteAreaChart'\r\n\t\t\t},\r\n\t\t\topen_conversion: {\r\n\t\t\t\ttitle: 'Конверсия просмотров/открытий',\r\n\t\t\t\twrapper_class: 'OpenConversionsAreaChart'\r\n\t\t\t},\r\n\t\t\tfave: {\r\n\t\t\t\ttitle: 'Добавлений в избранное',\r\n\t\t\t\twrapper_class: 'FaveAreaChart'\r\n\t\t\t},\r\n\t\t\tfave_conversion: {\r\n\t\t\t\ttitle: 'Конверсия открытий/добавлений в избранное',\r\n\t\t\t\twrapper_class: 'FaveConversionsAreaChart'\r\n\t\t\t},\r\n\t\t\tsubscribe_unsubscribe: {\r\n\t\t\t\ttitle: 'Подписчики',\r\n\t\t\t\twrapper_class: 'SubscriberAreaChart'\r\n\t\t\t},\r\n\t\t\tconversion: {\r\n\t\t\t\ttitle: 'Конверсия просмотров/подписок',\r\n\t\t\t\twrapper_class: 'ConversionAreaChart'\r\n\t\t\t}\r\n\t\t},\r\n\t\tFILL_COLORS = [\r\n\t\t\t['rgba(35, 215, 146, 0.18)', 'rgba(101, 101, 101, 0.6)', 'rgba(101, 101, 101, 0.6)'],\r\n\t\t\t['rgba(35, 215, 146, 0.09)', 'rgba(101, 101, 101, 0.6)', 'rgba(101, 101, 101, 0.6)']\r\n\t\t],\r\n\t\tarea_chart_options = $.extend(true, {}, self.highchart_defaults, {\r\n\t\t\tchart: {\r\n\t\t\t\ttype: 'areaspline',\r\n\t\t\t\tplotBackgroundColor: '#fcfcfc',\r\n\t\t\t\tplotBorderColor: '#ebebeb',\r\n\t\t\t\tplotBorderWidth: 1\r\n\t\t\t},\r\n\t\t\tcolors: [__C.COLORS.FRANKLIN, __C.COLORS.MUTED_80, __C.COLORS.ACCENT, __C.COLORS.MUTED, __C.COLORS.MUTED_50, __C.COLORS.MUTED_30],\r\n\t\t\ttitle: {\r\n\t\t\t\talign: 'left',\r\n\t\t\t\tmargin: 20\r\n\t\t\t},\r\n\t\t\tlegend: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\talign: 'left',\r\n\t\t\t\titemStyle: {color: __C.COLORS.TEXT, cursor: 'pointer', fontSize: '14px', fontWeight: '500', y: 0},\r\n\t\t\t\titemMarginTop: 24,\r\n\t\t\t\titemMarginBottom: 5,\r\n\t\t\t\tsymbolHeight: 18,\r\n\t\t\t\tsymbolWidth: 18,\r\n\t\t\t\tsymbolRadius: 9,\r\n\t\t\t\titemDistance: 42,\r\n\t\t\t\tx: 30\r\n\t\t\t},\r\n\t\t\tplotOptions: {\r\n\t\t\t\tseries: {\r\n\t\t\t\t\tstates: {\r\n\t\t\t\t\t\thover: {\r\n\t\t\t\t\t\t\tlineWidth: 2\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tareaspline: {\r\n\t\t\t\t\tfillOpacity: 0.5,\r\n\t\t\t\t\tmarker: {\r\n\t\t\t\t\t\tenabled: false,\r\n\t\t\t\t\t\tsymbol: 'circle',\r\n\t\t\t\t\t\tradius: 2,\r\n\t\t\t\t\t\tstates: {\r\n\t\t\t\t\t\t\thover: {\r\n\t\t\t\t\t\t\t\tenabled: true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataGrouping: {\r\n\t\t\t\t\t\tdateTimeLabelFormats: {\r\n\t\t\t\t\t\t\tmillisecond: ['%b %e, %H:%M:%S.%L', '%b %e, %H:%M:%S.%L', '-%H:%M:%S.%L'],\r\n\t\t\t\t\t\t\tsecond: ['%b %e, %H:%M:%S', '%b %e, %H:%M:%S', '-%H:%M:%S'],\r\n\t\t\t\t\t\t\tminute: ['%b %e, %H:%M', '%b %e, %H:%M', '-%H:%M'],\r\n\t\t\t\t\t\t\thour: ['%b %e, %H:%M', '%b %e, %H:%M', '-%H:%M'],\r\n\t\t\t\t\t\t\tday: ['%b %e, %Y', '%b %e', '-%b %e, %Y'],\r\n\t\t\t\t\t\t\tweek: ['%b %e, %Y', '%b %e', '-%b %e, %Y'],\r\n\t\t\t\t\t\t\tmonth: ['%B %Y', '%B', '-%B %Y'],\r\n\t\t\t\t\t\t\tyear: ['%Y', '%Y', '-%Y']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttooltip: {\r\n\t\t\t\theaderFormat: '<b>{point.key}</b><br/>',\r\n\t\t\t\tpositioner: function(labelWidth, labelHeight) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tx: this.chart.plotLeft,\r\n\t\t\t\t\t\ty: this.chart.plotTop\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tshadow: false,\r\n\t\t\t\tshape: 'square',\r\n\t\t\t\tvalueDecimals: 0,\r\n\t\t\t\txDateFormat: '%e %b %Y',\r\n\t\t\t\tshared: true\r\n\t\t\t},\r\n\t\t\tscrollbar: {enabled: false},\r\n\t\t\tnavigator: {\r\n\t\t\t\toutlineColor: '#ebebeb',\r\n\t\t\t\toutlineWidth: 1,\r\n\t\t\t\tmaskInside: false,\r\n\t\t\t\tmaskFill: 'rgba(245, 245, 245, 0.66)',\r\n\t\t\t\thandles: {\r\n\t\t\t\t\tbackgroundColor: '#9fa7b6',\r\n\t\t\t\t\tborderColor: '#fff'\r\n\t\t\t\t},\r\n\t\t\t\txAxis: {\r\n\t\t\t\t\tgridLineWidth: 0,\r\n\t\t\t\t\tlabels: {\r\n\t\t\t\t\t\talign: 'left',\r\n\t\t\t\t\t\treserveSpace: true,\r\n\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\tcolor: '#888'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\ty: null\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trangeSelector: {\r\n\t\t\t\tbuttonTheme: {\r\n\t\t\t\t\twidth: null,\r\n\t\t\t\t\theight: 22,\r\n\t\t\t\t\tfill: 'none',\r\n\t\t\t\t\tstroke: 'none',\r\n\t\t\t\t\tr: 14,\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tcolor: __C.COLORS.MUTED_80,\r\n\t\t\t\t\t\tfontSize: '13px',\r\n\t\t\t\t\t\tfontWeight: '400',\r\n\t\t\t\t\t\ttextTransform: 'uppercase',\r\n\t\t\t\t\t\tdominantBaseline: 'middle'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tstates: {\r\n\t\t\t\t\t\thover: {\r\n\t\t\t\t\t\t\tfill: __C.COLORS.MUTED_50,\r\n\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\tcolor: '#fff'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tselect: {\r\n\t\t\t\t\t\t\tfill: __C.COLORS.MUTED_80,\r\n\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\tcolor: '#fff',\r\n\t\t\t\t\t\t\t\tfontWeight: '400'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: [{\r\n\t\t\t\t\ttype: 'day',\r\n\t\t\t\t\tcount: 7,\r\n\t\t\t\t\ttext: \"\\xa0\\xa0\\xa0Неделя\\xa0\\xa0\\xa0\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttype: 'month',\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\ttext: \"\\xa0\\xa0\\xa0Месяц\\xa0\\xa0\\xa0\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttype: 'year',\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\ttext: \"\\xa0\\xa0\\xa0Год\\xa0\\xa0\\xa0\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttype: 'all',\r\n\t\t\t\t\ttext: \"\\xa0\\xa0\\xa0Все\\xa0время\\xa0\\xa0\\xa0\"\r\n\t\t\t\t}],\r\n\t\t\t\tallButtonsEnabled: true,\r\n\t\t\t\tselected: 2,\r\n\t\t\t\tlabelStyle: {\r\n\t\t\t\t\tdisplay: 'none'\r\n\t\t\t\t},\r\n\t\t\t\tinputEnabled: false\r\n\t\t\t},\r\n\t\t\txAxis: {\r\n\t\t\t\tgridLineWidth: 1,\r\n\t\t\t\tgridLineDashStyle: 'dash',\r\n\t\t\t\ttype: 'datetime',\r\n\t\t\t\tshowEmpty: false,\r\n\t\t\t\ttickPosition: 'inside',\r\n\t\t\t\tdateTimeLabelFormats: {\r\n\t\t\t\t\tminute: '%H:%M',\r\n\t\t\t\t\thour: '%H:%M',\r\n\t\t\t\t\tday: '%e %b',\r\n\t\t\t\t\tweek: '%e %b',\r\n\t\t\t\t\tmonth: '%b %y',\r\n\t\t\t\t\tyear: '%Y'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tyAxis: {\r\n\t\t\t\tallowDecimals: false,\r\n\t\t\t\tfloor: 0,\r\n\t\t\t\tmin: 0,\r\n\t\t\t\tgridLineDashStyle: 'dash',\r\n\t\t\t\topposite: false,\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\ttext: false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, additional_options);\r\n\t\r\n\t$.each(normalized_series, function(key) {\r\n\t\tvar field_data = {\r\n\t\t\ttitle: {text: FIELDS[key].title}\r\n\t\t};\r\n\t\t\r\n\t\tfield_data.series = normalized_series[key].map(function(series_unit, i) {\r\n\t\t\tif (series_unit.fillOpacity !== 0) {\r\n\t\t\t\treturn $.extend(true, {}, series_unit, {\r\n\t\t\t\t\tfillColor: {\r\n\t\t\t\t\t\tlinearGradient: {x1: 0, x2: 0, y1: 0, y2: 1},\r\n\t\t\t\t\t\tstops: FILL_COLORS.map(function(colors_set, j) {\r\n\t\t\t\t\t\t\treturn [j, colors_set[i]];\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn series_unit;\r\n\t\t});\r\n\t\t\r\n\t\tif (key == 'conversion' || key == 'open_conversion' || key == 'fave_conversion') {\r\n\t\t\tfield_data.yAxis = {\r\n\t\t\t\tmax: 100,\r\n\t\t\t\tlabels: {\r\n\t\t\t\t\tformat: '{value}%'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t\tself.$wrapper.find('.' + FIELDS[key].wrapper_class).highcharts('StockChart', $.extend(true, {}, area_chart_options, field_data));\r\n\t});\r\n};\r\n/**\r\n *\r\n * @param {jQuery} $scoreboards_wrapper\r\n * @param {object} data\r\n * @param {object} data.numbers\r\n * @param {object} [data.dynamics]\r\n * @param {object} [titles]\r\n * @param {Array} [order]\r\n * @param {string} [size=\"normal\"]\r\n */\r\nStatisticsPage.prototype.updateScoreboards = function($scoreboards_wrapper, data, titles, order, size) {\r\n\tvar with_dynamics = data.dynamics ? true : false;\r\n\tif (!order)\r\n\t\torder = Object.keys(titles);\r\n\t\r\n\torder.forEach(function(field) {\r\n\t\tvar scoreboard_type = 'Scoreboard' + field.toCamelCase('_'),\r\n\t\t\t$scoreboard = $scoreboards_wrapper.find('.' + scoreboard_type),\r\n\t\t\tmeasure;\r\n\t\t\r\n\t\tswitch (field) {\r\n\t\t\tcase 'conversion':\r\n\t\t\tcase 'open_conversion':\r\n\t\t\tcase 'fave_conversion': {\r\n\t\t\t\tmeasure = '%';\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (!$scoreboard.length) {\r\n\t\t\t$scoreboard = tmpl(with_dynamics ? 'scoreboard-with-dynamics' : 'scoreboard', {\r\n\t\t\t\ttype: scoreboard_type,\r\n\t\t\t\ttitle: titles[field],\r\n\t\t\t\tsize: size ? '-size_' + size : '-size_normal',\r\n\t\t\t\tnumber: 0 + measure,\r\n\t\t\t\tdynamic_by_week: 0 + measure\r\n\t\t\t}, $scoreboards_wrapper)\r\n\t\t}\r\n\t\t\r\n\t\tif (data.numbers[field] !== undefined) {\r\n\t\t\t$scoreboard.find('.ScoreboardNumber').animateNumber({\r\n\t\t\t\tnumber: Math.round(data.numbers[field]),\r\n\t\t\t\tsuffix: measure\r\n\t\t\t}, 2000, 'easeOutSine');\r\n\t\t}\r\n\t\t\r\n\t\tif (with_dynamics) {\r\n\t\t\tif (data.dynamics[field] !== undefined) {\r\n\t\t\t\t$scoreboard\r\n\t\t\t\t\t.find('.ScoreboardDynamic')\r\n\t\t\t\t\t.animateNumber({\r\n\t\t\t\t\t\tnumber: Math.round(data.dynamics[field]),\r\n\t\t\t\t\t\tprefix: data.dynamics[field] == 0 ? undefined : (data.dynamics[field] > 0 ? '+' : '-'),\r\n\t\t\t\t\t\tsuffix: measure\r\n\t\t\t\t\t}, 2000, 'easeOutSine')\r\n\t\t\t\t\t.siblings('label')\r\n\t\t\t\t\t.removeClass('fa-caret-up -color_franklin fa-caret-down -color_bubblegum')\r\n\t\t\t\t\t.addClass(data.dynamics[field] == 0 ? '' : (data.dynamics[field] > 0 ? 'fa-caret-up -color_franklin' : 'fa-caret-down -color_bubblegum'));\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.StatisticsPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @abstract\r\n * @augments StatisticsPage\r\n * @param {(string|number)} org_id\r\n */\r\nfunction StatisticsOrganizationPage(org_id) {\r\n\tStatisticsPage.apply(this);\r\n\tthis.id = org_id;\r\n\tthis.organization = new OneOrganization(this.id);\r\n\t//this.with_header_tabs = true;\r\n}\r\nStatisticsOrganizationPage.extend(StatisticsPage);","/**\r\n * @requires Class.StatisticsOrganizationPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsOrganizationPage\r\n * @param {(string|number)} org_id\r\n */\r\nfunction StatisticsOrganizationAuditoryPage(org_id) {\r\n\tStatisticsOrganizationPage.apply(this, arguments);\r\n}\r\nStatisticsOrganizationAuditoryPage.extend(StatisticsOrganizationPage);\r\n\r\nStatisticsOrganizationAuditoryPage.prototype.render = function() {};","/**\r\n * @requires Class.StatisticsOrganizationPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsOrganizationPage\r\n * @param {(string|number)} org_id\r\n */\r\nfunction StatisticsOrganizationEventsPage(org_id) {\r\n\tStatisticsOrganizationPage.apply(this, arguments);\r\n}\r\nStatisticsOrganizationEventsPage.extend(StatisticsOrganizationPage);\r\n\r\nStatisticsOrganizationEventsPage.prototype.render = function() {};","/**\r\n * @requires Class.StatisticsOrganizationPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsOrganizationPage\r\n * @param {(string|number)} org_id\r\n */\r\nfunction StatisticsOrganizationOverviewPage(org_id) {\r\n\tStatisticsOrganizationPage.apply(this, arguments);\r\n\tthis.graphics_stats = new OrganizationsStatistics(this.id);\r\n\tthis.other_stats = new OrganizationsStatistics(this.id);\r\n\tthis.is_loading = true;\r\n\tthis.organization.fetchOrganization([\r\n\t\t'description',\r\n\t\t'img_medium_url',\r\n\t\t'default_address',\r\n\t\t'staff',\r\n\t\t'privileges',\r\n\t\t'events'.appendAjaxData({\r\n\t\t\tlength: 3,\r\n\t\t\tfuture: true,\r\n\t\t\tis_canceled: true,\r\n\t\t\tis_delayed: true,\r\n\t\t\tfields: [\r\n\t\t\t\t'organization_short_name',\r\n\t\t\t\t'public_at'\r\n\t\t\t],\r\n\t\t\torder_by: 'nearest_event_date'\r\n\t\t})\r\n\t], Page.triggerRender);\r\n}\r\nStatisticsOrganizationOverviewPage.extend(StatisticsOrganizationPage);\r\n/**\r\n *\r\n * @param {string} title\r\n * @param staff\r\n * @return {jQuery}\r\n */\r\nStatisticsOrganizationOverviewPage.buildStaffBlock = function(title, staff) {\r\n\tif (staff.length) {\r\n\t\treturn tmpl('orgstat-staff-block', {\r\n\t\t\ttitle: title,\r\n\t\t\tavatars: __APP.BUILD.avatarBlocks(staff)\r\n\t\t});\r\n\t} else {\r\n\t\treturn tmpl('orgstat-staff-block', {hidden: __C.CLASSES.NEW_HIDDEN});\r\n\t}\r\n};\r\n\r\nStatisticsOrganizationOverviewPage.prototype.buildAreaCharts = function() {\r\n\tvar self = this;\r\n\tStatisticsPage.prototype.buildAreaCharts.call(self, {\r\n\t\tsubscribe_unsubscribe: self.graphics_stats.subscribe.map(function(el, i) {\r\n\t\t\treturn {\r\n\t\t\t\ttime_value: el.time_value,\r\n\t\t\t\tsubscribe: el.value,\r\n\t\t\t\tunsubscribe: self.graphics_stats.unsubscribe[i].value\r\n\t\t\t}\r\n\t\t}),\r\n\t\tview: self.graphics_stats.view,\r\n\t\tconversion: self.graphics_stats.conversion\r\n\t});\r\n};\r\n\r\nStatisticsOrganizationOverviewPage.prototype.buildPieChart = function($container, data) {\r\n\tvar pie_chart_options = {\r\n\t\tchart: {\r\n\t\t\ttype: 'pie',\r\n\t\t\theight: 200,\r\n\t\t\tstyle: {\r\n\t\t\t\tfontFamily: 'inherit',\r\n\t\t\t\tfontSize: 'inherit'\r\n\t\t\t}\r\n\t\t},\r\n\t\tcolors: [__C.COLORS.FRANKLIN, __C.COLORS.ACCENT, __C.COLORS.MUTED, __C.COLORS.MUTED_80, __C.COLORS.MUTED_50, __C.COLORS.MUTED_30],\r\n\t\ttooltip: {\r\n\t\t\tpointFormat: '<b>{point.percentage:.1f}%</b>'\r\n\t\t},\r\n\t\tplotOptions: {\r\n\t\t\tpie: {\r\n\t\t\t\tcenter: [45, '50%'],\r\n\t\t\t\tallowPointSelect: true,\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t\tsize: 120,\r\n\t\t\t\tdataLabels: {\r\n\t\t\t\t\tdistance: -35,\r\n\t\t\t\t\tdefer: false,\r\n\t\t\t\t\tformatter: function() {\r\n\t\t\t\t\t\treturn this.percentage > 15 ? Math.round(this.percentage) + '%' : null;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tstyle: {\"color\": \"#fff\", \"fontSize\": \"20px\", \"fontWeight\": \"300\", \"textShadow\": \"none\"},\r\n\t\t\t\t\ty: -6\r\n\t\t\t\t},\r\n\t\t\t\tshowInLegend: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tlegend: {\r\n\t\t\talign: 'right',\r\n\t\t\tverticalAlign: 'top',\r\n\t\t\tlayout: 'vertical',\r\n\t\t\twidth: 100,\r\n\t\t\tsymbolHeight: 0,\r\n\t\t\tsymbolWidth: 0,\r\n\t\t\titemMarginBottom: 5,\r\n\t\t\tlabelFormatter: function() {\r\n\t\t\t\treturn '<span style=\"color: ' + this.color + '\">' + this.name + '</span>'\r\n\t\t\t},\r\n\t\t\titemStyle: {cursor: 'pointer', fontSize: '14px', fontWeight: '500'},\r\n\t\t\ty: 12\r\n\t\t}\r\n\t};\r\n\t\r\n\tfunction pieChartSeriesNormalize(raw_data) {\r\n\t\tvar STD_NAMES = {\r\n\t\t\t\"browser\": \"Браузер\",\r\n\t\t\t\"android\": \"Аndroid\",\r\n\t\t\t\"ios\": \"iOS\",\r\n\t\t\t\"female\": \"Женщины\",\r\n\t\t\t\"male\": \"Мужчины\",\r\n\t\t\t\"other\": \"Остальные\",\r\n\t\t\tnull: \"Не указано\"\r\n\t\t};\r\n\t\treturn [{\r\n\t\t\tdata: raw_data.map(function(line, i) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: line.name ? STD_NAMES[line.name] : STD_NAMES[line.gender],\r\n\t\t\t\t\ty: line.count\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}];\r\n\t}\r\n\t\r\n\t$container.highcharts($.extend(true, {}, this.highchart_defaults, pie_chart_options, {series: pieChartSeriesNormalize(data)}));\r\n};\r\n\r\nStatisticsOrganizationOverviewPage.prototype.render = function() {\r\n\tvar PAGE = this,\r\n\t\tstat_dynamics = {\r\n\t\t\tscale: Statistics.SCALES.WEEK,\r\n\t\t\tfields: [\r\n\t\t\t\t'subscribe',\r\n\t\t\t\t'view',\r\n\t\t\t\t'fave',\r\n\t\t\t\t'conversion'\r\n\t\t\t]\r\n\t\t},\r\n\t\tstaffs_additional_fields = {\r\n\t\t\tis_link: true,\r\n\t\t\tavatar_classes: ['-size_40x40', '-rounded']\r\n\t\t},\r\n\t\tstorage_data_name = 'org_stats_' + this.id + '_data',\r\n\t\tstorage_until_name = 'org_stats_' + this.id + '_until',\r\n\t\tis_cached_data_actual = moment.unix(window.sessionStorage.getItem(storage_until_name)).isAfter(moment());\r\n\t\r\n\t__APP.changeTitle([{\r\n\t\ttitle: 'Организации',\r\n\t\tpage: '/statistics'\r\n\t}, this.organization.short_name]);\r\n\t\r\n\tthis.$wrapper.html(tmpl('orgstat-overview', $.extend(true, {}, this.organization, {\r\n\t\tstaff_block: StatisticsOrganizationOverviewPage.buildStaffBlock('Администраторы', this.organization.staff.getSpecificStaff(OneUser.ROLE.ADMIN, staffs_additional_fields))\r\n\t\t\t.add(StatisticsOrganizationOverviewPage.buildStaffBlock('Модераторы', this.organization.staff.getSpecificStaff(OneUser.ROLE.MODERATOR, staffs_additional_fields))),\r\n\t\tevent_blocks: tmpl('orgstat-event-block', this.organization.events.map(function(event) {\r\n\t\t\tvar badges = [];\r\n\t\t\tif (event.canceled)\r\n\t\t\t\tbadges.push({title: 'Отменено'});\r\n\t\t\tif (event.public_at && moment.unix(event.public_at).isBefore())\r\n\t\t\t\tbadges.push({title: 'Не опубликовано'});\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tid: event.id,\r\n\t\t\t\ttitle: event.title,\r\n\t\t\t\torganization_short_name: event.organization_short_name,\r\n\t\t\t\tday: moment.unix(event.first_event_date).format(\"D\"),\r\n\t\t\t\tmonth: moment.unix(event.first_event_date).format(\"MMM\"),\r\n\t\t\t\tbadges: tmpl('orgstat-event-block-badge', badges)\r\n\t\t\t};\r\n\t\t}))\r\n\t})));\r\n\t\r\n\tif (is_cached_data_actual) {\r\n\t\tthis.graphics_stats.setData(JSON.parse(window.sessionStorage.getItem(storage_data_name)));\r\n\t\tthis.buildAreaCharts();\r\n\t} else {\r\n\t\tthis.$wrapper.find('.OrgStatAreaCharts').children('.AreaChart').append(tmpl('loader'));\r\n\t\tthis.graphics_stats.fetchStatistics(Statistics.SCALES.DAY, moment(__APP.EVENDATE_BEGIN, 'DD-MM-YYYY').format(), ['view', 'subscribe', 'unsubscribe', 'conversion'], null, function() {\r\n\t\t\twindow.sessionStorage.setItem(storage_data_name, JSON.stringify(PAGE.graphics_stats));\r\n\t\t\twindow.sessionStorage.setItem(storage_until_name, moment().add(15, 'm').unix());\r\n\t\t\tPAGE.buildAreaCharts();\r\n\t\t});\r\n\t}\r\n\t\r\n\tthis.other_stats.fetchStatistics(Statistics.SCALES.OVERALL, false, ['subscribe', 'view', 'fave', 'conversion', 'audience'], stat_dynamics, function(stat_data) {\r\n\t\tvar scoreboards_data = {numbers: {}, dynamics: {}};\r\n\t\t\r\n\t\t$.each(stat_data.dynamics, function(field, dynamics) {\r\n\t\t\tscoreboards_data.dynamics[field] = dynamics[0].value;\r\n\t\t\tscoreboards_data.numbers[field] = stat_data[field][0].value;\r\n\t\t});\r\n\t\tPAGE.buildPieChart(PAGE.$wrapper.find('.GenderPieChart'), this.audience.gender);\r\n\t\tPAGE.buildPieChart(PAGE.$wrapper.find('.DevicePieChart'), this.audience.devices);\r\n\t\t\r\n\t\tPAGE.updateScoreboards(PAGE.$wrapper.find('.Scoreboards'), scoreboards_data, {\r\n\t\t\t'subscribe': 'Подписчиков организатора',\r\n\t\t\t'fave': 'Добавлений в избранное',\r\n\t\t\t'view': 'Просмотров организатора',\r\n\t\t\t'conversion': 'Конверсия открытий/подписок'\r\n\t\t}, ['subscribe', 'fave', 'view', 'conversion']);\r\n\t\t\r\n\t});\r\n\t\r\n\tbindRippleEffect(this.$wrapper);\r\n\tbindPageLinks(this.$wrapper);\r\n};","/**\r\n * @requires Class.StatisticsOrganizationPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsOrganizationPage\r\n * @param {(string|number)} org_id\r\n */\r\nfunction StatisticsOrganizationPromotionPage(org_id) {\r\n\tStatisticsOrganizationPage.apply(this, arguments);\r\n}\r\nStatisticsOrganizationPromotionPage.extend(StatisticsOrganizationPage);\r\n\r\nStatisticsOrganizationPromotionPage.prototype.render = function() {};","/**\r\n * @requires Class.StatisticsOrganizationPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsOrganizationPage\r\n * @param {(string|number)} org_id\r\n */\r\nfunction StatisticsOrganizationSettingsPage(org_id) {\r\n\tStatisticsOrganizationPage.apply(this, arguments);\r\n}\r\nStatisticsOrganizationSettingsPage.extend(StatisticsOrganizationPage);\r\n\r\nStatisticsOrganizationSettingsPage.prototype.render = function() {};","/**\r\n * @requires Class.StatisticsOrganizationPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsOrganizationPage\r\n * @param {(string|number)} org_id\r\n */\r\nfunction StatisticsOrganizationSupportPage(org_id) {\r\n\tStatisticsOrganizationPage.apply(this, arguments);\r\n}\r\nStatisticsOrganizationSupportPage.extend(StatisticsOrganizationPage);\r\n\r\nStatisticsOrganizationSupportPage.prototype.render = function() {};","/**\r\n * @requires ../Class.StatisticsPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsPage\r\n * @param {(string|number)} event_id\r\n */\r\nfunction StatisticsEventPage(event_id) {\r\n\tStatisticsPage.apply(this, arguments);\r\n\tthis.id = event_id;\r\n\tthis.event = new OneEvent(this.id);\r\n}\r\nStatisticsEventPage.extend(StatisticsPage);","/**\r\n * @requires Class.StatisticsEventPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsEventPage\r\n * @param {(string|number)} event_id\r\n */\r\nfunction StatisticsEventAuditoryPage(event_id) {\r\n\tStatisticsEventPage.apply(this, arguments);\r\n}\r\nStatisticsEventAuditoryPage.extend(StatisticsEventPage);\r\n\r\nStatisticsEventAuditoryPage.prototype.render = function() {};","/**\r\n * @requires Class.StatisticsEventPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsEventPage\r\n * @param {(string|number)} event_id\r\n */\r\nfunction StatisticsEventEditPage(event_id) {\r\n\tStatisticsEventPage.apply(this, arguments);\r\n}\r\nStatisticsEventEditPage.extend(StatisticsEventPage);\r\n\r\nStatisticsEventEditPage.prototype.render = function() {};","/**\r\n * @requires Class.StatisticsEventPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsEventPage\r\n * @param {(string|number)} event_id\r\n */\r\nfunction StatisticsEventOverviewPage(event_id) {\r\n\tStatisticsEventPage.apply(this, arguments);\r\n\t\r\n\tthis.graphics_stats = new EventStatistics(this.id);\r\n\tthis.scoreboards_stats = new EventStatistics(this.id);\r\n\tthis.is_loading = true;\r\n\tthis.event.fetchEvent([\r\n\t\t'image_horizontal_medium_url',\r\n\t\t'organization_short_name',\r\n\t\t'favored_users_count',\r\n\t\t'is_same_time',\r\n\t\t'dates'\r\n\t], Page.triggerRender);\r\n}\r\nStatisticsEventOverviewPage.extend(StatisticsEventPage);\r\n\r\nStatisticsEventOverviewPage.prototype.render = function() {\r\n\tvar PAGE = this;\r\n\t\r\n\t__APP.changeTitle([{\r\n\t\ttitle: 'Организации',\r\n\t\tpage: '/statistics'\r\n\t}, {\r\n\t\ttitle: this.event.organization_short_name,\r\n\t\tpage: '/statistics/organization/' + this.event.organization_id\r\n\t}, this.event.title]);\r\n\t\r\n\tthis.$wrapper.html(tmpl('eventstat-overview', $.extend(true, {}, this.event, {\r\n\t\tdates_block: tmpl('eventstat-overview-datetime', {\r\n\t\t\tdate: displayDateRange(this.event.first_event_date, this.event.last_event_date),\r\n\t\t\ttime: this.event.is_same_time ? displayTimeRange(this.event.dates[0].start_time, this.event.dates[0].end_time) : 'Разное время'\r\n\t\t})\r\n\t})));\r\n\tthis.$wrapper.find('.EventStatAreaCharts').children('.AreaChart').html(tmpl('loader'));\r\n\t\r\n\tthis.scoreboards_stats.fetchStatistics(Statistics.SCALES.OVERALL, false, ['view', 'fave', 'open_site', 'fave_conversion', 'open_conversion'], null, function(data) {\r\n\t\tvar scoreboards_data = {numbers: {}};\r\n\t\t$.each(data, function(field, stats) {\r\n\t\t\tscoreboards_data.numbers[field] = stats[0].value\r\n\t\t});\r\n\t\tPAGE.updateScoreboards(PAGE.$wrapper.find('.EventstatsScoreboards'), scoreboards_data, {\r\n\t\t\t'fave': 'Добавлений в избранное',\r\n\t\t\t'view': 'Просмотров события'\r\n\t\t}, ['fave', 'view']);\r\n\t\tPAGE.updateScoreboards(PAGE.$wrapper.find('.EventstatsBigScoreboards'), scoreboards_data, {\r\n\t\t\t'view': 'Просмотров',\r\n\t\t\t'open_site': 'Открытий',\r\n\t\t\t'open_conversion': 'Конверсия открытий',\r\n\t\t\t'fave': 'Добавлений',\r\n\t\t\t'fave_conversion': 'Конверсия добавлений'\r\n\t\t}, ['view', 'open_site', 'open_conversion', 'fave', 'fave_conversion'], 'big');\r\n\t});\r\n\t\r\n\tthis.graphics_stats.fetchStatistics(Statistics.SCALES.DAY, moment(__APP.EVENDATE_BEGIN, 'DD-MM-YYYY').format(), ['view', 'fave', 'open_site', 'fave_conversion', 'open_conversion'], null, function(data) {\r\n\t\tPAGE.buildAreaCharts(data, {\r\n\t\t\trangeSelector: {\r\n\t\t\t\tselected: 1\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t\r\n\tModal.bindCallModal(PAGE.$wrapper);\r\n\tbindPageLinks(PAGE.$wrapper);\r\n};","/**\r\n * @requires Class.StatisticsEventPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsEventPage\r\n * @param {(string|number)} event_id\r\n */\r\nfunction StatisticsEventPromotionPage(event_id) {\r\n\tStatisticsEventPage.apply(this, arguments);\r\n}\r\nStatisticsEventPromotionPage.extend(StatisticsEventPage);\r\n\r\nStatisticsEventPromotionPage.prototype.render = function() {};","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Page\r\n * @param {(string|number)} [event_id]\r\n */\r\nfunction RedactEventPage(event_id) {\r\n\tPage.apply(this);\r\n\tthis.page_title = 'Редактирование события';\r\n\tthis.is_loading = false;\r\n\t\r\n\tthis.fields = [\r\n\t\t'image_horizontal_large_url',\r\n\t\t'favored{fields:\"is_friend\",order_by:\"-is_friend\",length:10}',\r\n\t\t'favored_users_count',\r\n\t\t'is_favorite',\r\n\t\t'notifications{fields:\"notification_type,done\"}',\r\n\t\t'description',\r\n\t\t'location',\r\n\t\t'can_edit',\r\n\t\t'registration_required',\r\n\t\t'registration_till',\r\n\t\t'is_free',\r\n\t\t'min_price',\r\n\t\t'organization_logo_small_url',\r\n\t\t'organization_short_name',\r\n\t\t'is_same_time',\r\n\t\t'dates{length:0,fields:\"start_time,end_time\"}',\r\n\t\t'tags',\r\n\t\t'detail_info_url',\r\n\t\t'canceled'\r\n\t];\r\n\tthis.event = new OneEvent(event_id);\r\n\tif (event_id) {\r\n\t\tthis.is_loading = true;\r\n\t\tthis.event.fetchEvent(this.fields, Page.triggerRender);\r\n\t}\r\n}\r\nRedactEventPage.extend(Page);\r\n\r\n/**\r\n *\r\n * @param {jQuery} $context\r\n * @param {string} source\r\n * @param {string} filename\r\n */\r\nRedactEventPage.handleImgUpload = function($context, source, filename) {\r\n\tvar $parent = $context.closest('.EditEventImgLoadWrap'),\r\n\t\t$preview = $parent.find('.EditEventImgPreview'),\r\n\t\t$file_name_text = $parent.find('.FileNameText'),\r\n\t\t$file_name = $parent.find('.FileName'),\r\n\t\t$data_url = $parent.find('.DataUrl'),\r\n\t\t$button = $parent.find('.CallModal');\r\n\t\r\n\t$preview.attr('src', source);\r\n\t$file_name_text.html('Загружен файл:<br>' + filename);\r\n\t$file_name.val(filename);\r\n\t$button\r\n\t\t.data('source_img', source)\r\n\t\t.on('crop', function(event, cropped_src, crop_data) {\r\n\t\t\t$preview.attr('src', cropped_src);\r\n\t\t\t$button.data('crop_data', crop_data);\r\n\t\t\t$data_url.val('data.source').data('source', $preview.attr('src')).trigger('change');\r\n\t\t})\r\n\t\t.trigger('click.CallModal');\r\n};\r\n\r\nRedactEventPage.prototype.formatVKPost = function() {\r\n\tvar PAGE = this,\r\n\t\t$post = PAGE.$wrapper.find('#edit_event_vk_post'),\r\n\t\t$title = PAGE.$wrapper.find('#edit_event_title'),\r\n\t\t$calendar = PAGE.$wrapper.find('.EventDatesCalendar').data('calendar'),\r\n\t\t$place = PAGE.$wrapper.find('#edit_event_placepicker'),\r\n\t\t$description = PAGE.$wrapper.find('#edit_event_description'),\r\n\t\t$is_free = PAGE.$wrapper.find('#edit_event_free'),\r\n\t\t$min_price = PAGE.$wrapper.find('#edit_event_min_price'),\r\n\t\t$is_required = PAGE.$wrapper.find('#edit_event_registration_required'),\r\n\t\t$registration_till = PAGE.$wrapper.find('.RegistrationTill'),\r\n\t\t$tags = PAGE.$wrapper.find('.EventTags'),\r\n\t\ttags = [],\r\n\t\t$link = PAGE.$wrapper.find('#edit_event_url'),\r\n\t\tpost_text = '';\r\n\t\r\n\tpost_text += $title.val() ? $title.val() + '\\n\\n' : '';\r\n\t\r\n\tif ($calendar.selected_days) {\r\n\t\tpost_text += ($calendar.selected_days.length > 1) ? 'Дата начала: ' : 'Начало: ';\r\n\t\tpost_text += moment($calendar.selected_days[0]).format('D MMMM YYYY');\r\n\t\tif ($calendar.selected_days.length == 1) {\r\n\t\t\tvar $main_time_inputs = PAGE.$wrapper.find('.MainTime').find('input');\r\n\t\t\tpost_text += $main_time_inputs.eq(0).val() ? ' в ' + parseInt($main_time_inputs.eq(0).val()) : '';\r\n\t\t\tpost_text += $main_time_inputs.eq(1).val() ? ':' + $main_time_inputs.eq(1).val() : '';\r\n\t\t}\r\n\t}\r\n\tif ($is_required.prop('checked')) {\r\n\t\tvar $inputs = $registration_till.find('input');\r\n\t\tif ($inputs.eq(0).val()) {\r\n\t\t\tpost_text += ' (регистрация заканчивается: ' + moment($inputs.eq(0).val()).format('D MMMM YYYY');\r\n\t\t\tpost_text += $inputs.eq(1).val() ? ' в ' + parseInt($inputs.eq(1).val()) : '';\r\n\t\t\tpost_text += $inputs.eq(2).val() ? ':' + $inputs.eq(2).val() : '';\r\n\t\t\tpost_text += ')\\n';\r\n\t\t} else {\r\n\t\t\tpost_text += '\\n';\r\n\t\t}\r\n\t} else {\r\n\t\tpost_text += '\\n';\r\n\t}\r\n\tpost_text += $place.val() ? $place.val() + '\\n\\n' : '';\r\n\tpost_text += $description.val() ? $description.val() + '\\n\\n' : '';\r\n\t\r\n\tif (!$is_free.prop('checked')) {\r\n\t\tpost_text += $min_price.val() ? 'Цена от ' + $min_price.val() + '\\n\\n' : '';\r\n\t}\r\n\t\r\n\t$tags.find('.select2-search-choice').each(function(i, tag) {\r\n\t\ttags.push('#' + $(tag).text().trim());\r\n\t});\r\n\tpost_text += tags ? tags.join(' ') + '\\n\\n' : '';\r\n\t\r\n\tif ($link.val()) {\r\n\t\tpost_text += $link.val()\r\n\t} else if (PAGE.event.id) {\r\n\t\tpost_text += 'https://evendate.ru/event/' + PAGE.event.id;\r\n\t}\r\n\t\r\n\t$post.val(post_text);\r\n};\r\n\r\nRedactEventPage.prototype.toggleVkImg = function() {\r\n\tvar PAGE = this,\r\n\t\t$wrap = PAGE.$wrapper.find('#edit_event_vk_publication').find('.EditEventImgLoadWrap'),\r\n\t\t$left_block = $wrap.children().eq(0),\r\n\t\t$right_block = $wrap.children().eq(1);\r\n\t\r\n\tif (!$left_block.hasClass('-hidden')) {\r\n\t\t$right_block.find('.LoadImg').off('change.ToggleVkImg').one('change.ToggleVkImg', function() {\r\n\t\t\tPAGE.toggleVkImg();\r\n\t\t});\r\n\t\t$right_block.find('.Text').text('Добавить картинку');\r\n\t} else {\r\n\t\t$right_block.find('.LoadImg').off('change.ToggleVkImg');\r\n\t\t$right_block.find('.Text').text('Изменить');\r\n\t}\r\n\t$left_block.toggleClass('-hidden');\r\n\t$right_block.toggleClass('-align_center');\r\n};\r\n\r\nRedactEventPage.prototype.init = function() {\r\n\tvar PAGE = this;\r\n\t\r\n\tfunction submitEditEvent() {\r\n\t\tvar $form = PAGE.$wrapper.find(\"#edit-event-form\"),\r\n\t\t\tdata = {\r\n\t\t\t\tevent_id: null,\r\n\t\t\t\ttitle: null,\r\n\t\t\t\timage_horizontal: null,\r\n\t\t\t\torganization_id: null,\r\n\t\t\t\tlocation: null,\r\n\t\t\t\tdescription: null,\r\n\t\t\t\tdetail_info_url: null,\r\n\t\t\t\tdifferent_time: null,\r\n\t\t\t\tdates: null,\r\n\t\t\t\ttags: null,\r\n\t\t\t\tregistration_required: null,\r\n\t\t\t\tregistration_till: null,\r\n\t\t\t\tis_free: null,\r\n\t\t\t\tmin_price: null,\r\n\t\t\t\tdelayed_publication: null,\r\n\t\t\t\tpublic_at: null,\r\n\t\t\t\tfilenames: {\r\n\t\t\t\t\thorizontal: null\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tform_data = $form.serializeForm(),\r\n\t\t\ttags = form_data.tags ? form_data.tags.split(',') : null,\r\n\t\t\tis_edit = !!(PAGE.event.id),\r\n\t\t\tis_form_valid = true,\r\n\t\t\t$times = $form.find('#edit_event_different_time').prop('checked') ? $form.find('[class^=\"TableDay_\"]') : $form.find('.MainTime');\r\n\t\t\r\n\t\tfunction afterSubmit() {\r\n\t\t\tif ($form.find('#edit_event_to_public_vk').prop('checked')) {\r\n\t\t\t\tsocket.emit('vk.post', {\r\n\t\t\t\t\tguid: data.vk_group,\r\n\t\t\t\t\tevent_id: PAGE.event.id,\r\n\t\t\t\t\tmessage: data.vk_post,\r\n\t\t\t\t\timage: {\r\n\t\t\t\t\t\tbase64: data.vk_image_src,\r\n\t\t\t\t\t\tfilename: data.vk_image_filename\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlink: data.detail_info_url\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t__APP.changeState('/event/' + PAGE.event.id);\r\n\t\t}\r\n\t\t\r\n\t\t$form.find(':required').not(':disabled').each(function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tmax_length = $this.data('maxlength');\r\n\t\t\tif ($this.val() === \"\" || (max_length && $this.val().length > max_length)) {\r\n\t\t\t\tif (is_form_valid) {\r\n\t\t\t\t\t$('body').stop().animate({scrollTop: Math.ceil($this.offset().top - 150)}, 1000, 'swing');\r\n\t\t\t\t}\r\n\t\t\t\thandleErrorField($this);\r\n\t\t\t\tis_form_valid = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t$times.each(function() {\r\n\t\t\tvar $row = $(this),\r\n\t\t\t\tstart = $row.find('.StartHours').val() + $row.find('.StartMinutes').val(),\r\n\t\t\t\tend = $row.find('.EndHours').val() + $row.find('.EndMinutes').val();\r\n\t\t\tif (start > end) {\r\n\t\t\t\tif (is_form_valid) {\r\n\t\t\t\t\t$('body').stop().animate({scrollTop: Math.ceil($row.offset().top - 150)}, 1000, 'swing');\r\n\t\t\t\t}\r\n\t\t\t\tshowNotifier({text: 'Начальное время не может быть меньше конечного', status: false});\r\n\t\t\t\tis_form_valid = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif (!is_edit) {\r\n\t\t\t$form.find('.DataUrl').each(function() {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tif ($this.val() === \"\") {\r\n\t\t\t\t\tif (is_form_valid) {\r\n\t\t\t\t\t\t$('body').stop().animate({scrollTop: Math.ceil($this.closest('.EditEventImgLoadWrap').offset().top - 150)}, 1000, 'swing', function() {\r\n\t\t\t\t\t\t\tshowNotifier({text: 'Пожалуйста, добавьте к событию обложку', status: false})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tis_form_valid = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tif (is_form_valid) {\r\n\t\t\t$.extend(true, data, form_data);\r\n\t\t\t\r\n\t\t\tdata.tags = tags;\r\n\t\t\tdata.filenames = {\r\n\t\t\t\thorizontal: data.filename_horizontal\r\n\t\t\t};\r\n\t\t\tif (data.registration_required) {\r\n\t\t\t\tdata.registration_till = \"\" + data.registration_till_date + 'T' + data.registration_till_time_hours + ':' + data.registration_till_time_minutes + ':00'\r\n\t\t\t}\r\n\t\t\tif (data.delayed_publication) {\r\n\t\t\t\tdata.public_at = \"\" + data.public_at_date + 'T' + data.public_at_time_hours + ':' + data.public_at_time_minutes + ':00'\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdata.dates = [];\r\n\t\t\tif (data.different_time) {\r\n\t\t\t\tvar selected_days_rows = $('.SelectedDaysRows').children();\r\n\t\t\t\t\r\n\t\t\t\tselected_days_rows.each(function() {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tdata.dates.push({\r\n\t\t\t\t\t\tevent_date: $this.find('.DatePicker').data('selected_day'),\r\n\t\t\t\t\t\tstart_time: $this.find('.StartHours').val() + ':' + $this.find('.StartMinutes').val(),\r\n\t\t\t\t\t\tend_time: $this.find('.EndHours').val() + ':' + $this.find('.EndMinutes').val()\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvar MainCalendar = $('.EventDatesCalendar').data('calendar'),\r\n\t\t\t\t\t$main_time = $('.MainTime'),\r\n\t\t\t\t\tstart_time = $main_time.find('.StartHours').val() + ':' + $main_time.find('.StartMinutes').val(),\r\n\t\t\t\t\tend_time = $main_time.find('.EndHours').val() + ':' + $main_time.find('.EndMinutes').val();\r\n\t\t\t\t\r\n\t\t\t\tMainCalendar.selected_days.forEach(function(day) {\r\n\t\t\t\t\tdata.dates.push({\r\n\t\t\t\t\t\tevent_date: day,\r\n\t\t\t\t\t\tstart_time: start_time,\r\n\t\t\t\t\t\tend_time: end_time\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tPAGE.$wrapper.addClass('-faded');\r\n\t\t\ttry {\r\n\t\t\t\tif (is_edit) {\r\n\t\t\t\t\tPAGE.event.updateEvent(data, afterSubmit);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tPAGE.event.createEvent(data, afterSubmit);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tPAGE.$wrapper.removeClass('-faded');\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tbindDatePickers(PAGE.$wrapper);\r\n\tbindTimeInput(PAGE.$wrapper);\r\n\tbindSelect2(PAGE.$wrapper);\r\n\tbindTabs(PAGE.$wrapper);\r\n\tModal.bindCallModal(PAGE.$wrapper);\r\n\tbindLimitInputSize(PAGE.$wrapper);\r\n\tbindRippleEffect(PAGE.$wrapper);\r\n\tbindFileLoadButton(PAGE.$wrapper);\r\n\t(function bindLoadByURLButton() {\r\n\t\t$('.LoadByURLButton').not('-Handled_LoadByURLButton').on('click', function() {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\t$input = $('#' + $this.data('load_input'));\r\n\t\t\t$this.data('url', $input.val());\r\n\t\t\twindow.current_load_button = $this;\r\n\t\t\tsocket.emit('image.getFromURL', $input.val());\r\n\t\t\twindow.paceOptions = {\r\n\t\t\t\tcatchupTime: 10000,\r\n\t\t\t\tmaxProgressPerFrame: 1,\r\n\t\t\t\tghostTime: Number.MAX_SAFE_INTEGER,\r\n\t\t\t\tcheckInterval: {\r\n\t\t\t\t\tcheckInterval: 10000\r\n\t\t\t\t},\r\n\t\t\t\teventLag: {\r\n\t\t\t\t\tminSamples: 1,\r\n\t\t\t\t\tsampleCount: 30000000,\r\n\t\t\t\t\tlagThreshold: 0.1\r\n\t\t\t\t}\r\n\t\t\t}; //хз зачем, все равно не работает\r\n\t\t\tPace.restart();\r\n\t\t}).addClass('-Handled_LoadByURLButton');\r\n\t})();\r\n\t(function initEditEventMainCalendar() {\r\n\t\t//TODO: Refactor this!! Make it more readable\r\n\t\tvar $selected_days_text = PAGE.$wrapper.find('.EventSelectedDaysText'),\r\n\t\t\t$selected_days_table_rows = PAGE.$wrapper.find('.SelectedDaysRows'),\r\n\t\t\tMainCalendar = new Calendar('.EventDatesCalendar', {\r\n\t\t\t\tweekday_selection: true,\r\n\t\t\t\tmonth_selection: true,\r\n\t\t\t\tmin_date: moment().format(__C.DATE_FORMAT)\r\n\t\t\t}),\r\n\t\t\tdates = {},\r\n\t\t\tgenitive_month_names = {\r\n\t\t\t\t'январь': 'января',\r\n\t\t\t\t'февраль': 'февраля',\r\n\t\t\t\t'март': 'марта',\r\n\t\t\t\t'апрель': 'апреля',\r\n\t\t\t\t'май': 'мая',\r\n\t\t\t\t'июнь': 'июня',\r\n\t\t\t\t'июль': 'июля',\r\n\t\t\t\t'август': 'августа',\r\n\t\t\t\t'сентябрь': 'сентября',\r\n\t\t\t\t'октябрь': 'октября',\r\n\t\t\t\t'ноябрь': 'ноября',\r\n\t\t\t\t'декабрь': 'декабря'\r\n\t\t\t},\r\n\t\t\t$fucking_table = $();\r\n\t\tMainCalendar.init();\r\n\t\tMainCalendar.$calendar.on('days-changed.displayFormattedText', displayFormattedText);\r\n\t\t\r\n\t\tfunction bindRemoveRow($parent) {\r\n\t\t\t$parent.find('.RemoveRow').not('.-Handled_RemoveRow').each(function(i, elem) {\r\n\t\t\t\t$(elem).on('click', function() {\r\n\t\t\t\t\tMainCalendar.deselectDays($(this).closest('tr').data('date'));\r\n\t\t\t\t}).addClass('-Handled_RemoveRow');\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction displayFormattedText() {\r\n\t\t\tdates = {};\r\n\t\t\tMainCalendar.selected_days.forEach(function(date, i, days) {\r\n\t\t\t\tvar _date = moment(date);\r\n\t\t\t\t\r\n\t\t\t\tif (typeof dates[_date.month()] === 'undefined') {\r\n\t\t\t\t\tdates[_date.month()] = {};\r\n\t\t\t\t\tdates[_date.month()].selected_days = [];\r\n\t\t\t\t\tdates[_date.month()].month_name = genitive_month_names[_date.format('MMMM')];\r\n\t\t\t\t}\r\n\t\t\t\tdates[_date.month()].selected_days.push(_date.date());\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$selected_days_text.empty().removeClass('hidden');\r\n\t\t\tif (Object.keys(dates).length) {\r\n\t\t\t\t$.each(dates, function(i, elem) {\r\n\t\t\t\t\t$selected_days_text.append($('<p>').text(elem.selected_days.join(', ') + ' ' + elem.month_name))\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t$selected_days_text.html('<p>Даты не выбраны</p>');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction doTheFuckingSort($rows, $parent) {\r\n\t\t\t$rows.sort(function(a, b) {\r\n\t\t\t\tvar an = $(a).data('date'),\r\n\t\t\t\t\tbn = $(b).data('date');\r\n\t\t\t\t\r\n\t\t\t\tif (an > bn) return 1;\r\n\t\t\t\telse if (an < bn) return -1;\r\n\t\t\t\telse return 0;\r\n\t\t\t});\r\n\t\t\t$rows.detach().appendTo($parent);\r\n\t\t}\r\n\t\t\r\n\t\tfunction buildTable(selected_days) {\r\n\t\t\t//TODO: BUG. On multiple selection (month or weekday) duplicates appearing in table.\r\n\t\t\t//TODO: Bind time on building table\r\n\t\t\tvar $output = $();\r\n\t\t\tif (Array.isArray(selected_days)) {\r\n\t\t\t\tselected_days.forEach(function(day) {\r\n\t\t\t\t\t$output = $output.add(tmpl('selected-table-day', {\r\n\t\t\t\t\t\tdate: day,\r\n\t\t\t\t\t\tformatted_date: day.split('-').reverse().join('.')\r\n\t\t\t\t\t}));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$output = tmpl('selected-table-day', {\r\n\t\t\t\t\tdate: selected_days,\r\n\t\t\t\t\tformatted_date: selected_days.split('-').reverse().join('.')\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tbindDatePickers($output);\r\n\t\t\tbindTimeInput($output);\r\n\t\t\tbindRemoveRow($output);\r\n\t\t\t\r\n\t\t\t$fucking_table = $fucking_table.add($output);\r\n\t\t\t$output.find('.DatePicker').each(function() {\r\n\t\t\t\tvar DP = $(this).data('datepicker');\r\n\t\t\t\tDP.$datepicker.on('date-picked', function() {\r\n\t\t\t\t\tMainCalendar.deselectDays(DP.prev_selected_day).selectDays(DP.selected_day);\r\n\t\t\t\t\tdoTheFuckingSort($fucking_table, $selected_days_table_rows)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tdoTheFuckingSort($fucking_table, $selected_days_table_rows);\r\n\t\t}\r\n\t\t\r\n\t\tfunction BuildSelectedDaysTable() {\r\n\t\t\tif (MainCalendar.last_action === 'select') {\r\n\t\t\t\tbuildTable(MainCalendar.last_selected_days);\r\n\t\t\t}\r\n\t\t\telse if (MainCalendar.last_action === 'deselect') {\r\n\t\t\t\tif (Array.isArray(MainCalendar.last_selected_days)) {\r\n\t\t\t\t\tvar classes = [];\r\n\t\t\t\t\tMainCalendar.last_selected_days.forEach(function(day) {\r\n\t\t\t\t\t\tclasses.push('.TableDay_' + day);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$fucking_table.detach(classes.join(', '));\r\n\t\t\t\t\t$fucking_table = $fucking_table.not(classes.join(', '));\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t$fucking_table.detach('.TableDay_' + MainCalendar.last_selected_days);\r\n\t\t\t\t\t$fucking_table = $fucking_table.not('.TableDay_' + MainCalendar.last_selected_days);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdoTheFuckingSort($fucking_table, $selected_days_table_rows);\r\n\t\t\t\r\n\t\t\t//TODO: Do not forget to rename 'fucking' names\r\n\t\t\t//TODO: Please, don't forget to rename 'fucking' names\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tPAGE.$wrapper.find('#edit_event_different_time').on('change', function() {\r\n\t\t\tvar $table_wrapper = PAGE.$wrapper.find('#edit_event_selected_days_wrapper'),\r\n\t\t\t\t$table_content = $table_wrapper.children();\r\n\t\t\tif ($(this).prop('checked')) {\r\n\t\t\t\tbuildTable(MainCalendar.selected_days);\r\n\t\t\t\t$table_wrapper.height($table_content.height()).one('transitionend', function() {\r\n\t\t\t\t\t$table_wrapper.css({\r\n\t\t\t\t\t\t'height': 'auto',\r\n\t\t\t\t\t\t'overflow': 'visible'\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tMainCalendar.$calendar.on('days-changed.buildTable', BuildSelectedDaysTable);\r\n\t\t\t} else {\r\n\t\t\t\t$table_wrapper.css({\r\n\t\t\t\t\t'height': $table_content.height(),\r\n\t\t\t\t\t'overflow': 'hidden'\r\n\t\t\t\t}).height(0);\r\n\t\t\t\t$fucking_table.remove();\r\n\t\t\t\tMainCalendar.$calendar.off('days-changed.buildTable');\r\n\t\t\t}\r\n\t\t\tPAGE.$wrapper.find('.MainTime').toggleStatus('disabled');\r\n\t\t});\r\n\t\t\r\n\t\tvar AddRowDatePicker = PAGE.$wrapper.find('.AddDayToTable').data('datepicker');\r\n\t\tAddRowDatePicker.$datepicker.on('date-picked', function() {\r\n\t\t\tMainCalendar.selectDays(AddRowDatePicker.selected_day);\r\n\t\t});\r\n\t\t\r\n\t})();\r\n\t(function initOrganization(selected_id) {\r\n\t\tOrganizationsCollection.fetchMyOrganizations(['admin', 'moderator'], {fields: ['default_address']}, function(data) {\r\n\t\t\tvar $wrapper = $('.EditEventOrganizations'),\r\n\t\t\t\torganizations_options = $(),\r\n\t\t\t\t$default_address_button = PAGE.$wrapper.find('.EditEventDefaultAddress'),\r\n\t\t\t\t$select = $wrapper.find('#edit_event_organization'),\r\n\t\t\t\tselected_address;\r\n\t\t\t\r\n\t\t\tdata.forEach(function(organization) {\r\n\t\t\t\tif (organization.id == selected_id) {\r\n\t\t\t\t\tselected_address = organization.default_address;\r\n\t\t\t\t}\r\n\t\t\t\torganizations_options = organizations_options.add(tmpl('option', {\r\n\t\t\t\t\tval: organization.id,\r\n\t\t\t\t\tdata: \"data-image-url='\" + organization.img_url + \"' data-default-address='\" + organization.default_address + \"'\",\r\n\t\t\t\t\tdisplay_name: organization.name\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$select.append(organizations_options).select2({\r\n\t\t\t\tcontainerCssClass: 'form_select2',\r\n\t\t\t\tdropdownCssClass: 'form_select2_drop'\r\n\t\t\t}).on('change', function() {\r\n\t\t\t\t$default_address_button.data('default_address', $(this).children(\":selected\").data('default-address'));\r\n\t\t\t});\r\n\t\t\tif (selected_id) {\r\n\t\t\t\t$select.select2('val', selected_id);\r\n\t\t\t\t$default_address_button.data('default_address', selected_address);\r\n\t\t\t} else {\r\n\t\t\t\t$default_address_button.data('default_address', data[0].default_address);\r\n\t\t\t}\r\n\t\t\tif (organizations_options.length > 1) {\r\n\t\t\t\t$wrapper.removeClass('-hidden');\r\n\t\t\t} else {\r\n\t\t\t\t$wrapper.addClass('-hidden');\r\n\t\t\t}\r\n\t\t});\r\n\t})(PAGE.event.organization_id);\r\n\t(function checkVkPublicationAbility() {\r\n\t\tif (__APP.USER.accounts.indexOf(\"vk\") !== -1) {\r\n\t\t\tsocket.emit('vk.getGroupsToPost', __APP.USER.id);\r\n\t\t\tPAGE.$wrapper\r\n\t\t\t\t.find(\r\n\t\t\t\t\t'#edit_event_title,' +\r\n\t\t\t\t\t'#edit_event_placepicker,' +\r\n\t\t\t\t\t'#edit_event_description,' +\r\n\t\t\t\t\t'#edit_event_free,' +\r\n\t\t\t\t\t'#edit_event_min_price,' +\r\n\t\t\t\t\t'#edit_event_registration_required,' +\r\n\t\t\t\t\t'#edit_event_url,' +\r\n\t\t\t\t\t'.EventTags'\r\n\t\t\t\t)\r\n\t\t\t\t.add('.RegistrationTill input')\r\n\t\t\t\t.add('.MainTime input')\r\n\t\t\t\t.on('change.FormatVkPost', function() { PAGE.formatVKPost(); });\r\n\t\t\tPAGE.$wrapper.find('.EventDatesCalendar').data('calendar').$calendar.on('days-changed.FormatVkPost', function() { PAGE.formatVKPost(); });\r\n\t\t} else {\r\n\t\t\tPAGE.$wrapper.find('#edit_event_to_public_vk').toggleStatus('disabled');\r\n\t\t}\r\n\t})();\r\n\t\r\n\t//TODO: perepilit' placepicker\r\n\tPAGE.$wrapper.find(\".Placepicker\").placepicker();\r\n\t\r\n\tPAGE.$wrapper.find('.EventTags').select2({\r\n\t\ttags: true,\r\n\t\twidth: '100%',\r\n\t\tplaceholder: \"Выберите до 5 тегов\",\r\n\t\tmaximumSelectionLength: 5,\r\n\t\tmaximumSelectionSize: 5,\r\n\t\ttokenSeparators: [',', ';'],\r\n\t\tmultiple: true,\r\n\t\tcreateSearchChoice: function(term, data) {\r\n\t\t\tif ($(data).filter(function() {\r\n\t\t\t\t\treturn this.text.localeCompare(term) === 0;\r\n\t\t\t\t}).length === 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: term,\r\n\t\t\t\t\ttext: term\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\tajax: {\r\n\t\t\turl: '/api/v1/tags/',\r\n\t\t\tdataType: 'JSON',\r\n\t\t\tdata: function(term, page) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: term // search term\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tresults: function(data) {\r\n\t\t\t\tvar _data = [];\r\n\t\t\t\tdata.data.forEach(function(value) {\r\n\t\t\t\t\tvalue.text = value.name;\r\n\t\t\t\t\t_data.push(value);\r\n\t\t\t\t});\r\n\t\t\t\treturn {\r\n\t\t\t\t\tresults: _data\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcontainerCssClass: \"form_select2\",\r\n\t\tdropdownCssClass: \"form_select2_drop\"\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('.EditEventDefaultAddress').off('click.defaultAddress').on('click.defaultAddress', function() {\r\n\t\tvar $this = $(this);\r\n\t\t$this.closest('.form_group').find('input').val($this.data('default_address'))\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('#edit_event_delayed_publication').off('change.DelayedPublication').on('change.DelayedPublication', function() {\r\n\t\tPAGE.$wrapper.find('.DelayedPublication').toggleStatus('disabled');\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('#edit_event_registration_required').off('change.RequireRegistration').on('change.RequireRegistration', function() {\r\n\t\tPAGE.$wrapper.find('.RegistrationTill').toggleStatus('disabled');\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('#edit_event_free').off('change.FreeEvent').on('change.FreeEvent', function() {\r\n\t\tPAGE.$wrapper.find('.MinPrice').toggleStatus('disabled');\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('.MinPrice').find('input').inputmask({\r\n\t\t'alias': 'numeric',\r\n\t\t'autoGroup': false,\r\n\t\t'digits': 2,\r\n\t\t'digitsOptional': true,\r\n\t\t'placeholder': '0',\r\n\t\t'rightAlign': false\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('.LoadImg').off('change.LoadImg').on('change.LoadImg', function(e) {\r\n\t\tvar $this = $(e.target),\r\n\t\t\tfiles = e.target.files,\r\n\t\t\treader;\r\n\t\t\r\n\t\tif (files.length == 0) return false;\r\n\t\tfor (var i = 0, f; f = files[i]; i++) {\r\n\t\t\treader = new FileReader();\r\n\t\t\tif (!f.type.match('image.*'))  continue;\r\n\t\t\treader.onload = (function(the_file) {\r\n\t\t\t\treturn function(e) {\r\n\t\t\t\t\tRedactEventPage.handleImgUpload($this, e.target.result, the_file.name);\r\n\t\t\t\t};\r\n\t\t\t})(f);\r\n\t\t\treader.readAsDataURL(f);\r\n\t\t}\r\n\t\t\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('#edit_event_to_public_vk').off('change.PublicVK').on('change.PublicVK', function() {\r\n\t\tvar $vk_post_wrapper = PAGE.$wrapper.find('#edit_event_vk_publication'),\r\n\t\t\t$vk_post_content = $vk_post_wrapper.children();\r\n\t\tif ($(this).prop('checked')) {\r\n\t\t\t$vk_post_wrapper.height($vk_post_content.height());\r\n\t\t} else {\r\n\t\t\t$vk_post_wrapper.height(0);\r\n\t\t}\r\n\t\t$vk_post_wrapper.toggleStatus('disabled');\r\n\t\t\r\n\t\t$vk_post_content.find('.DeleteImg').off('click.DeleteImg').on('click.DeleteImg', function() {\r\n\t\t\t$(this).closest('.EditEventImgLoadWrap').find('input').val('').end().find('img').attr('src', '');\r\n\t\t\tPAGE.toggleVkImg();\r\n\t\t})\r\n\t\t\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('#edit_event_submit').off('click.Submit').on('click.Submit', submitEditEvent);\r\n};\r\n\r\nRedactEventPage.prototype.render = function() {\r\n\tvar PAGE = this,\r\n\t\tis_edit = !!PAGE.event.id,\r\n\t\tpage_vars = {\r\n\t\t\tevent_id: PAGE.event.id ? PAGE.event.id : undefined,\r\n\t\t\tpublic_at_data_label: 'Дата',\r\n\t\t\tregistration_till_data_label: 'Дата',\r\n\t\t\tcurrent_date: moment().format(__C.DATE_FORMAT),\r\n\t\t\ttomorrow_date: moment().add(1, 'd').format(__C.DATE_FORMAT)\r\n\t\t};\r\n\t\r\n\tfunction selectDates($view, raw_dates) {\r\n\t\tvar MainCalendar = $view.find('.EventDatesCalendar').data('calendar'),\r\n\t\t\t$table_rows = $view.find('.SelectedDaysRows'),\r\n\t\t\tdates = [];\r\n\t\traw_dates.forEach(function(date) {\r\n\t\t\tdate.event_date = moment.unix(date.event_date).format('YYYY-MM-DD');\r\n\t\t\tdates.push(date.event_date);\r\n\t\t});\r\n\t\tMainCalendar.selectDays(dates);\r\n\t\traw_dates.forEach(function(date) {\r\n\t\t\tvar $day_row = $table_rows.find('.TableDay_' + date.event_date),\r\n\t\t\t\tstart_time = date.start_time.split(':'),\r\n\t\t\t\tend_time = date.end_time ? date.end_time.split(':') : [];\r\n\t\t\t$day_row.find('.StartHours').val(start_time[0]);\r\n\t\t\t$day_row.find('.StartMinutes').val(start_time[1]);\r\n\t\t\tif (end_time.length) {\r\n\t\t\t\t$day_row.find('.EndHours').val(end_time[0]);\r\n\t\t\t\t$day_row.find('.EndMinutes').val(end_time[1]);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction selectTags($view, tags) {\r\n\t\tvar selected_tags = [];\r\n\t\ttags.forEach(function(tag) {\r\n\t\t\tselected_tags.push({\r\n\t\t\t\tid: parseInt(tag.id),\r\n\t\t\t\ttext: tag.name\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\t$view.find('#event_tags').select2('data', selected_tags);\r\n\t}\r\n\t\r\n\tfunction initVkImgCopying() {\r\n\t\tvar $vk_wrapper = PAGE.$wrapper.find('#edit_event_vk_publication');\r\n\t\tPAGE.$wrapper.find('#edit_event_image_horizontal_src').on('change.CopyToVkImg', function() {\r\n\t\t\tvar $wrap = $(this).closest('.EditEventImgLoadWrap'),\r\n\t\t\t\t$vk_wrap = PAGE.$wrapper.find('#edit_event_vk_publication'),\r\n\t\t\t\t$vk_preview = $vk_wrap.find('.EditEventImgPreview'),\r\n\t\t\t\t$vk_button = $vk_wrap.find('.CallModal'),\r\n\t\t\t\t$vk_$data_url = $vk_wrap.find('#edit_event_vk_image_src'),\r\n\t\t\t\t$button_orig = $wrap.find('.CallModal'),\r\n\t\t\t\tsrc = $(this).data('source');\r\n\t\t\t\r\n\t\t\tif (!PAGE.$wrapper.find('.edit_event_vk_right_block').hasClass('-align_center')) {\r\n\t\t\t\tPAGE.toggleVkImg();\r\n\t\t\t}\r\n\t\t\t$vk_$data_url.val('data.source').data('source', src);\r\n\t\t\t$vk_preview.attr('src', src);\r\n\t\t\t$vk_wrap.find('#edit_event_vk_image_filename').val(PAGE.$wrapper.find('#edit_event_image_horizontal_filename').val());\r\n\t\t\t$vk_button\r\n\t\t\t\t.data('crop_data', $button_orig.data('crop_data'))\r\n\t\t\t\t.data('source_img', $button_orig.data('source_img'))\r\n\t\t\t\t.on('crop', function(event, cropped_src, crop_data) {\r\n\t\t\t\t\t$vk_preview.attr('src', cropped_src);\r\n\t\t\t\t\t$vk_button.data('crop_data', crop_data);\r\n\t\t\t\t\t$vk_$data_url.data('source', $vk_preview.attr('src')).trigger('change');\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t});\r\n\t\t$vk_wrapper.find('.FileLoadButton, .CallModal, .DeleteImg').on('click.OffCopying', function() {\r\n\t\t\tPAGE.$wrapper.find('#edit_event_image_horizontal_src').off('change.CopyToVkImg');\r\n\t\t});\r\n\t}\r\n\t\r\n\tif (!is_edit) {\r\n\t\tpage_vars.header_text = 'Новое событие';\r\n\t\tpage_vars.button_text = 'Опубликовать';\r\n\t\tPAGE.$wrapper.html(tmpl('edit-event-page', page_vars));\r\n\t\tPAGE.init();\r\n\t\tPAGE.toggleVkImg();\r\n\t\tinitVkImgCopying();\r\n\t} else {\r\n\t\tpage_vars.header_text = 'Редактирование события';\r\n\t\tpage_vars.button_text = 'Сохранить';\r\n\t\tif (PAGE.event.public_at !== null) {\r\n\t\t\tvar m_public_at = moment(PAGE.event.public_at);\r\n\t\t\tpage_vars.public_at_data = m_public_at.format('YYYY-MM-DD');\r\n\t\t\tpage_vars.public_at_data_label = m_public_at.format('DD.MM.YYYY');\r\n\t\t\tpage_vars.public_at_time_hours = m_public_at.format('HH');\r\n\t\t\tpage_vars.public_at_time_minutes = m_public_at.format('mm');\r\n\t\t}\r\n\t\tif (PAGE.event.registration_required) {\r\n\t\t\tvar m_registration_till = moment.unix(PAGE.event.registration_till);\r\n\t\t\tpage_vars.registration_till_data = m_registration_till.format('YYYY-MM-DD');\r\n\t\t\tpage_vars.registration_till_data_label = m_registration_till.format('DD.MM.YYYY');\r\n\t\t\tpage_vars.registration_till_time_hours = m_registration_till.format('HH');\r\n\t\t\tpage_vars.registration_till_time_minutes = m_registration_till.format('mm');\r\n\t\t}\r\n\t\tif (PAGE.event.image_horizontal_url) {\r\n\t\t\tpage_vars.image_horizontal_filename = PAGE.event.image_horizontal_url.split('/').reverse()[0];\r\n\t\t\tpage_vars.vk_image_url = PAGE.event.image_horizontal_url;\r\n\t\t\tpage_vars.vk_image_filename = page_vars.image_horizontal_filename;\r\n\t\t}\r\n\t\tif (PAGE.event.vk_image_url) {\r\n\t\t\tpage_vars.vk_image_url = PAGE.event.vk_image_url;\r\n\t\t\tpage_vars.vk_image_filename = PAGE.event.vk_image_url.split('/').reverse()[0];\r\n\t\t}\r\n\t\t\r\n\t\tpage_vars = $.extend(true, {}, PAGE.event, page_vars);\r\n\t\tPAGE.$wrapper.html(tmpl('edit-event-page', page_vars));\r\n\t\tPAGE.init();\r\n\t\t\r\n\t\tif (PAGE.event.is_same_time) {\r\n\t\t\tvar $day_row = PAGE.$wrapper.find('.MainTime'),\r\n\t\t\t\tstart_time = PAGE.event.dates[0].start_time.split(':'),\r\n\t\t\t\tend_time = PAGE.event.dates[0].end_time ? PAGE.event.dates[0].end_time.split(':') : [];\r\n\t\t\t$day_row.find('.StartHours').val(start_time[0]);\r\n\t\t\t$day_row.find('.StartMinutes').val(start_time[1]);\r\n\t\t\tif (end_time.length) {\r\n\t\t\t\t$day_row.find('.EndHours').val(end_time[0]);\r\n\t\t\t\t$day_row.find('.EndMinutes').val(end_time[1]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tPAGE.$wrapper.find('#edit_event_different_time').prop('checked', true).trigger('change');\r\n\t\t}\r\n\t\tselectDates(PAGE.$wrapper, PAGE.event.dates);\r\n\t\tselectTags(PAGE.$wrapper, PAGE.event.tags);\r\n\t\t\r\n\t\tif (PAGE.event.image_horizontal_url) {\r\n\t\t\ttoDataUrl(PAGE.event.image_horizontal_url, function(base64_string) {\r\n\t\t\t\tPAGE.$wrapper.find('#edit_event_image_horizontal_src').val(base64_string ? base64_string : null);\r\n\t\t\t});\r\n\t\t\tPAGE.$wrapper.find('.CallModal').removeClass('-hidden').on('crop', function(event, cropped_src, crop_data) {\r\n\t\t\t\tvar $button = $(this),\r\n\t\t\t\t\t$parent = $button.closest('.EditEventImgLoadWrap'),\r\n\t\t\t\t\t$preview = $parent.find('.EditEventImgPreview'),\r\n\t\t\t\t\t$data_url = $parent.find('.DataUrl');\r\n\t\t\t\t$data_url.val('data.source').data('source', $preview.attr('src')).trigger('change');\r\n\t\t\t\t$preview.attr('src', cropped_src);\r\n\t\t\t\t$button.data('crop_data', crop_data);\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (page_vars.vk_image_url) {\r\n\t\t\ttoDataUrl(page_vars.vk_image_url, function(base64_string) {\r\n\t\t\t\tPAGE.$wrapper.find('#edit_event_vk_image_src').val(base64_string ? base64_string : null);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tPAGE.toggleVkImg();\r\n\t\t}\r\n\t\t\r\n\t\tif (!PAGE.event.is_free) {\r\n\t\t\tPAGE.$wrapper.find('#edit_event_free').prop('checked', false).trigger('change');\r\n\t\t\tPAGE.$wrapper.find('#edit_event_min_price').val(PAGE.event.min_price);\r\n\t\t}\r\n\t\tif (PAGE.event.registration_required) {\r\n\t\t\tPAGE.$wrapper.find('#edit_event_registration_required').prop('checked', true).trigger('change');\r\n\t\t}\r\n\t\tif (PAGE.event.public_at !== null) {\r\n\t\t\tPAGE.$wrapper.find('#edit_event_delayed_publication').prop('checked', true).trigger('change');\r\n\t\t}\r\n\t\tPAGE.formatVKPost();\r\n\t}\r\n};","/**\r\n * @requires Class.RedactEventPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments RedactEventPage\r\n * @param {(string|number)} [org_id]\r\n */\r\nfunction AddEventPage(org_id) {\r\n\tRedactEventPage.apply(this);\r\n\tthis.page_title = 'Добавить событие';\r\n\tthis.organization_id = org_id;\r\n}\r\nAddEventPage.extend(RedactEventPage);","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Page\r\n * @param {(string|number)} event_id\r\n */\r\nfunction OneEventPage(event_id) {\r\n\tPage.apply(this);\r\n\t\r\n\tthis.fields = [\r\n\t\t'image_horizontal_large_url',\r\n\t\t'favored{fields:\"is_friend\",order_by:\"-is_friend\",length:10}',\r\n\t\t'favored_users_count',\r\n\t\t'is_favorite',\r\n\t\t'notifications{fields:\"notification_type,done\"}',\r\n\t\t'description',\r\n\t\t'location',\r\n\t\t'can_edit',\r\n\t\t'registration_required',\r\n\t\t'registration_till',\r\n\t\t'is_free',\r\n\t\t'min_price',\r\n\t\t'organization_logo_small_url',\r\n\t\t'organization_short_name',\r\n\t\t'is_same_time',\r\n\t\t'dates{length:0,fields:\"start_time,end_time\"}',\r\n\t\t'tags',\r\n\t\t'detail_info_url',\r\n\t\t'canceled'\r\n\t];\r\n\tthis.is_loading = true;\r\n\tthis.event = new OneEvent(event_id);\r\n\tthis.event.fetchEvent(this.fields, Page.triggerRender);\r\n}\r\nOneEventPage.extend(Page);\r\n/**\r\n *\r\n * @param {Array} raw_notifications\r\n * @param {OneEvent.id} event_id\r\n * @param {OneEvent.last_event_date} last_date\r\n * @return {jQuery}\r\n */\r\nOneEventPage.buildNotifications = function(raw_notifications, event_id, last_date) {\r\n\tvar m_today = moment(),\r\n\t\tall_notifications = {\r\n\t\t\t'notification-before-quarter-of-hour': {\r\n\t\t\t\tlabel: 'За 15 минут',\r\n\t\t\t\tmoment: moment.unix(last_date).subtract(15, 'minutes').unix()\r\n\t\t\t},\r\n\t\t\t'notification-before-three-hours': {\r\n\t\t\t\tlabel: 'За 3 часа',\r\n\t\t\t\tmoment: moment.unix(last_date).subtract(3, 'hours').unix()\r\n\t\t\t},\r\n\t\t\t'notification-before-day': {\r\n\t\t\t\tlabel: 'За день',\r\n\t\t\t\tmoment: moment.unix(last_date).subtract(1, 'days').unix()\r\n\t\t\t},\r\n\t\t\t'notification-before-three-days': {\r\n\t\t\t\tlabel: 'За 3 дня',\r\n\t\t\t\tmoment: moment.unix(last_date).subtract(3, 'days').unix()\r\n\t\t\t},\r\n\t\t\t'notification-before-week': {\r\n\t\t\t\tlabel: 'За неделю',\r\n\t\t\t\tmoment: moment.unix(last_date).subtract(1, 'week').unix()\r\n\t\t\t}\r\n\t\t},\r\n\t\t$notifications = $(),\r\n\t\tcurrent_notifications = {},\r\n\t\ti = 0;\r\n\tfor (var notif in raw_notifications) {\r\n\t\tif (raw_notifications.hasOwnProperty(notif)) {\r\n\t\t\tcurrent_notifications[raw_notifications[notif].notification_type] = raw_notifications[notif];\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor (var notification in all_notifications) {\r\n\t\t\r\n\t\tif (all_notifications.hasOwnProperty(notification)) {\r\n\t\t\tvar is_disabled = moment.unix(all_notifications[notification].moment).isBefore(m_today),\r\n\t\t\t\tdata = {\r\n\t\t\t\t\tid: 'event_notify_' + (++i),\r\n\t\t\t\t\tclasses: ['ToggleNotification'],\r\n\t\t\t\t\tname: 'notification_time',\r\n\t\t\t\t\tlabel: all_notifications[notification].label,\r\n\t\t\t\t\tattributes: {\r\n\t\t\t\t\t\tvalue: notification\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataset: {\r\n\t\t\t\t\t\tevent_id: event_id\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\r\n\t\t\tif (current_notifications[notification]) {\r\n\t\t\t\tis_disabled = is_disabled || current_notifications[notification].done || !current_notifications[notification].uuid;\r\n\t\t\t\tif (current_notifications[notification].uuid) {\r\n\t\t\t\t\tdata.dataset.uuid = current_notifications[notification].uuid;\r\n\t\t\t\t}\r\n\t\t\t\tdata.attributes.checked = true;\r\n\t\t\t}\r\n\t\t\tif (is_disabled) {\r\n\t\t\t\tdata.unit_classes = ['-status_disabled'];\r\n\t\t\t\tdata.attributes.disabled = true;\r\n\t\t\t}\r\n\t\t\t$notifications = $notifications.add(__APP.BUILD.radioOrCheckbox('checkbox', data))\r\n\t\t}\r\n\t}\r\n\treturn $notifications;\r\n};\r\n\r\nOneEventPage.prototype.init = function() {\r\n\tvar PAGE = this;\r\n\tbindAddAvatar(PAGE.$wrapper);\r\n\ttrimAvatarsCollection(PAGE.$wrapper);\r\n\tbindRippleEffect(PAGE.$wrapper);\r\n\tbindDropdown(PAGE.$wrapper);\r\n\t//bindShareButtons(PAGE.$wrapper);\r\n\tModal.bindCallModal(PAGE.$wrapper);\r\n\tbindCollapsing(PAGE.$wrapper);\r\n\tbindPageLinks(PAGE.$wrapper);\r\n\t\r\n\tPAGE.$wrapper.find('.ToggleNotification').each(function() {\r\n\t\tvar $this = $(this);\r\n\t\t\r\n\t\t$this.on('change', function() {\r\n\t\t\t$this.prop('disabled', true);\r\n\t\t\tif ($this.prop('checked')) {\r\n\t\t\t\tPAGE.event.addNotification($this.val(), function(data) {\r\n\t\t\t\t\t$this.data('uuid', data.uuid);\r\n\t\t\t\t\t$this.prop('disabled', false);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tPAGE.event.deleteNotification($this.data('uuid'), function() {\r\n\t\t\t\t\t$this.data('uuid', undefined);\r\n\t\t\t\t\t$this.prop('disabled', false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('.CancelEvent').on('click.CancelEvent', function() {\r\n\t\tPAGE.event.changeEventStatus(OneEvent.STATUS.CANCEL, function() {\r\n\t\t\tPAGE.$wrapper.find('.event_canceled_cap').removeClass('-hidden');\r\n\t\t});\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('.CancelCancellation').on('click.CancelCancellation', function() {\r\n\t\tPAGE.event.changeEventStatus(OneEvent.STATUS.BRING_BACK, function() {\r\n\t\t\tPAGE.$wrapper.find('.event_canceled_cap').addClass('-hidden');\r\n\t\t});\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('.ExternalLink').on('click.sendStat', function() {\r\n\t\tstoreStat(PAGE.event.id, __C.STATS.EVENT_ENTITY, __C.STATS.EVENT_OPEN_SITE);\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('.EventMap').on('click.sendStat', function() {\r\n\t\tstoreStat(PAGE.event.id, __C.STATS.EVENT_ENTITY, __C.STATS.EVENT_OPEN_MAP);\r\n\t});\r\n};\r\n\r\nOneEventPage.prototype.render = function() {\r\n\tvar PAGE = this,\r\n\t\t$subscribers = __APP.BUILD.avatars(PAGE.event.favored, 6),\r\n\t\tavatars_collection_classes = [],\r\n\t\tfavored_users_count = ($subscribers.length <= 6) ? 0 : PAGE.event.favored_users_count - 6,\r\n\t\t$event_additional_fields = $();\r\n\t\r\n\t__APP.changeTitle(PAGE.event.title);\r\n\tif (PAGE.event.is_favorite) {\r\n\t\tavatars_collection_classes.push('-subscribed');\r\n\t\tif ($subscribers.length > 4) {\r\n\t\t\tavatars_collection_classes.push('-shift');\r\n\t\t}\r\n\t}\r\n\t\r\n\tif (PAGE.event.is_same_time) {\r\n\t\t$event_additional_fields = $event_additional_fields.add(tmpl('event-additional-info', {\r\n\t\t\tkey: 'Время',\r\n\t\t\tvalue: displayTimeRange(PAGE.event.dates[0].start_time, PAGE.event.dates[0].end_time)\r\n\t\t}));\r\n\t} else {\r\n\t\t$event_additional_fields = $event_additional_fields.add(tmpl('event-date-time', {\r\n\t\t\tdate_times: tmpl('event-date-time-row', formatDates(PAGE.event.dates, {\r\n\t\t\t\tdate: '{D} {MMMMs}',\r\n\t\t\t\ttime: '{T}'\r\n\t\t\t}, PAGE.event.is_same_time))\r\n\t\t}));\r\n\t}\r\n\t$event_additional_fields = $event_additional_fields.add(tmpl('event-additional-info', {\r\n\t\tkey: 'Место',\r\n\t\tvalue: PAGE.event.location\r\n\t}));\r\n\t$event_additional_fields = $event_additional_fields.add(tmpl('event-additional-info', {\r\n\t\tkey: 'Теги',\r\n\t\tvalue: __APP.BUILD.tags(PAGE.event.tags)\r\n\t}));\r\n\t\r\n\tif (PAGE.event.detail_info_url) {\r\n\t\t$event_additional_fields = $event_additional_fields.add(tmpl('event-detail-link', {detail_info_url: PAGE.event.detail_info_url}));\r\n\t}\r\n\t\r\n\tPAGE.$wrapper.html(tmpl('event-page', $.extend({}, PAGE.event, {\r\n\t\tadd_to_favorite_button: new AddToFavoriteButton(PAGE.event.id, PAGE.event.is_favorite, {\r\n\t\t\tclasses: ['event_favourite_button', '-size_low', '-rounded', 'AddAvatar', 'RippleEffect']\r\n\t\t}),\r\n\t\tsubscribers: $subscribers,\r\n\t\tavatars_collection_classes: avatars_collection_classes.join(' '),\r\n\t\tfavored_users_show: favored_users_count ? '' : '-cast',\r\n\t\tfavored_users_count: favored_users_count,\r\n\t\tnotifications: OneEventPage.buildNotifications(PAGE.event.notifications, PAGE.event.id, PAGE.event.last_event_date),\r\n\t\tlocation_sanitized: encodeURI(PAGE.event.location),\r\n\t\tevent_edit_functions: PAGE.event.can_edit ? tmpl('event-edit-functions', PAGE.event) : '',\r\n\t\tevent_registration_information: PAGE.event.registration_required ? tmpl('event-registration-info', {registration_till: moment.unix(PAGE.event.registration_till).format('D MMMM')}) : '',\r\n\t\tevent_price_information: PAGE.event.is_free ? '' : tmpl('event-price-info', {min_price: PAGE.event.min_price ? PAGE.event.min_price : '0'}),\r\n\t\tcanceled: PAGE.event.canceled ? '' : '-hidden',\r\n\t\tevent_additional_fields: $event_additional_fields,\r\n\t\tcancel_cancellation: PAGE.event.can_edit ? tmpl('button', {\r\n\t\t\tclasses: '-color_primary RippleEffect CancelCancellation',\r\n\t\t\ttitle: 'Вернуть событие'\r\n\t\t}) : ''\r\n\t})));\r\n\t\r\n\tif (PAGE.event.is_same_time) {\r\n\t\tvar m_nearest_date = PAGE.event.nearest_event_date ? moment.unix(PAGE.event.nearest_event_date) : moment.unix(PAGE.event.first_event_date);\r\n\t\tPAGE.calendar = new Calendar(PAGE.$wrapper.find('.EventCalendar'), {\r\n\t\t\tclasses: {\r\n\t\t\t\twrapper_class: 'feed_calendar_wrapper',\r\n\t\t\t\ttd_class: 'event_calendar_day'\r\n\t\t\t},\r\n\t\t\tselection_type: Calendar.SELECTION_TYPES.MULTI,\r\n\t\t\tdisable_selection: true\r\n\t\t});\r\n\t\tPAGE.calendar\r\n\t\t\t.init()\r\n\t\t\t.setMonth(m_nearest_date.format('M'), m_nearest_date.format('YYYY'))\r\n\t\t\t.selectDays(\r\n\t\t\t\tPAGE.event.dates.map(function(date) {\r\n\t\t\t\t\treturn moment.unix(date.event_date).format(__C.DATE_FORMAT)\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t}\r\n\t\r\n\tPAGE.init();\r\n};","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Page\r\n */\r\nfunction OnboardingPage() {\r\n\tPage.apply(this, arguments);\r\n\tthis.ajax_data = {\r\n\t\tlength: 30,\r\n\t\toffset: 0,\r\n\t\tfields: 'img_small_url'\r\n\t};\r\n\tthis.disable_upload = false;\r\n\tthis.block_scroll = true;\r\n}\r\nOnboardingPage.extend(Page);\r\n\r\nOnboardingPage.prototype.init = function() {\r\n\tbindRippleEffect(this.$wrapper);\r\n\tbindPageLinks(this.$wrapper);\r\n\tthis.$wrapper.find('.Link').on('click', function() {\r\n\t\t__APP.SUBSCRIBED_ORGS.update();\r\n\t});\r\n};\r\n\r\nOnboardingPage.prototype.bindSubscriptions = function() {\r\n\tthis.$wrapper.find(\".OnboardingOrgItem\").not('.-Handled_OnboardingOrgItem').on('click', function() {\r\n\t\tvar $this = $(this);\r\n\t\tif ($this.hasClass(__C.CLASSES.NEW_ACTIVE)) {\r\n\t\t\t__APP.USER.unsubscribeFromOrganization($this.data(\"organization_id\"));\r\n\t\t} else {\r\n\t\t\t__APP.USER.subscribeToOrganization($this.data(\"organization_id\"));\r\n\t\t}\r\n\t\t$this.toggleClass(__C.CLASSES.NEW_ACTIVE);\r\n\t}).addClass('-Handled_OnboardingOrgItem');\r\n};\r\n\r\nOnboardingPage.prototype.render = function() {\r\n\tvar PAGE = this,\r\n\t\t$loader = tmpl('loader', {});\r\n\t\r\n\tfunction appendRecommendations(organizations) {\r\n\t\t$loader.detach();\r\n\t\tif (organizations.length) {\r\n\t\t\tPAGE.$wrapper.find(\".RecommendationsWrapper\").last().append(tmpl(\"onboarding-recommendation\", organizations));\r\n\t\t\tPAGE.bindSubscriptions();\r\n\t\t\tPAGE.block_scroll = false;\r\n\t\t} else {\r\n\t\t\tPAGE.disable_upload = true;\r\n\t\t}\r\n\t}\r\n\t\r\n\tPAGE.$wrapper.html(tmpl(\"onboarding-main\", {}));\r\n\tPAGE.init();\r\n\tPAGE.$wrapper.find('.RecommendationsWrapper').last().append($loader);\r\n\tOrganizationsCollection.fetchRecommendations(PAGE.ajax_data, appendRecommendations);\r\n\tPAGE.$wrapper.find(\".RecommendationsScrollbar\").scrollbar({\r\n\t\tonScroll: function(y, x) {\r\n\t\t\tif (y.scroll == y.maxScroll && !PAGE.disable_upload && !PAGE.block_scroll) {\r\n\t\t\t\tPAGE.block_scroll = true;\r\n\t\t\t\tPAGE.$wrapper.find('.RecommendationsWrapper').last().append($loader);\r\n\t\t\t\tOrganizationsCollection.fetchRecommendations(PAGE.ajax_data, appendRecommendations);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Page\r\n */\r\nfunction FriendsPage() {\r\n\tPage.apply(this);\r\n\t\r\n\tthis.wrapper_tmpl = 'friends';\r\n\tthis.page_title = 'Друзья';\r\n}\r\nFriendsPage.extend(Page);\r\n\r\nFriendsPage.prototype.render = function() {\r\n\tvar $view = this.$view,\r\n\t\tpage_number = 0;\r\n\t\r\n\tfunction getFeed() {\r\n\t\tif (page_number == 0) {\r\n\t\t\t$view.find('.friend-events-block').remove();\r\n\t\t}\r\n\t\t$.ajax({\r\n\t\t\turl: '/api/v1/users/feed?fields=entity,created_at,user,type_code,event{fields:\"organization_logo_small_url,image_square_vertical_url,organization_short_name\"},organization{fields:\"subscribed_count,img_medium_url\"}&&order_by=-created_at&length=10&offset=' + (10 * page_number++),\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\tvar cards_by_users = {};\r\n\t\t\t\tres.data.forEach(function(stat) {\r\n\t\t\t\t\tvar date = moment.unix(stat.created_at),\r\n\t\t\t\t\t\tent = stat[stat.entity],\r\n\t\t\t\t\t\tkey = [stat.entity, stat.stat_type_id, stat.user.id, date.format('DD.MM')].join('-');\r\n\t\t\t\t\tif (cards_by_users.hasOwnProperty(key) == false) {\r\n\t\t\t\t\t\tcards_by_users[key] = {\r\n\t\t\t\t\t\t\tuser: stat.user,\r\n\t\t\t\t\t\t\tentity: stat.entity,\r\n\t\t\t\t\t\t\ttype_code: stat.type_code,\r\n\t\t\t\t\t\t\tdate: date.format(__C.DATE_FORMAT) == moment().format(__C.DATE_FORMAT) ? 'Сегодня' : date.format('DD.MM'),\r\n\t\t\t\t\t\t\taction_name: __C.ACTION_NAMES[stat.type_code][0],\r\n\t\t\t\t\t\t\tfirst_name: stat.user.first_name,\r\n\t\t\t\t\t\t\tfriend_id: stat.user.id,\r\n\t\t\t\t\t\t\tavatar_url: stat.user.avatar_url,\r\n\t\t\t\t\t\t\tlast_name: stat.user.last_name,\r\n\t\t\t\t\t\t\tentities: []\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcards_by_users[key].entities.push(ent);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t$.each(cards_by_users, function(key, value) {\r\n\t\t\t\t\tvar $card = tmpl('friends-feed-card', value),\r\n\t\t\t\t\t\titem_tmpl_name = value.entity == __C.ENTITIES.EVENT ? 'friends-feed-event' : 'friends-feed-organization';\r\n\t\t\t\t\t\r\n\t\t\t\t\tvalue.entities.forEach(function(ent) {\r\n\t\t\t\t\t\t$card.append(tmpl(item_tmpl_name, ent));\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$load_btn.before($card);\r\n\t\t\t\t});\r\n\t\t\t\t$load_btn.removeClass(__C.CLASSES.HIDDEN).find('.btn').removeClass(__C.CLASSES.DISABLED);\r\n\t\t\t\tbindPageLinks($view);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\tvar $main_content = $view.find('.friends-main-content').removeClass(__C.CLASSES.HIDDEN),\r\n\t\t$friends_right_list = $view.find('.friends-right-bar'),\r\n\t\t$load_btn = $view.find('.load-more-btn').addClass(__C.CLASSES.HIDDEN),\r\n\t\t$user_content = $view.find('.one-friend-main-content').addClass(__C.CLASSES.HIDDEN);\r\n\t\r\n\t\r\n\tgetFriendsList($friends_right_list, function(res) {});\r\n\t$load_btn.find('.btn').on('click', getFeed);\r\n\tgetFeed();\r\n};","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Page\r\n * @param {(string|number)} friend_id\r\n */\r\nfunction OneFriendPage(friend_id) {\r\n\tPage.apply(this);\r\n\t\r\n\tthis.wrapper_tmpl = 'friends';\r\n\tthis.friend_id = friend_id;\r\n}\r\nOneFriendPage.extend(Page);\r\n\r\nOneFriendPage.prototype.render = function() {\r\n\tvar $view = this.$view,\r\n\t\tfriend_id = this.friend_id,\r\n\t\t$content = $view.find('.one-friend-main-content'),\r\n\t\tpage_number = 0;\r\n\t\r\n\tgetFriendsList($view.find('.friends-right-bar'), function() {\r\n\t\t$('.friend-item.friend-' + friend_id).addClass(__C.CLASSES.ACTIVE).siblings().removeClass(__C.CLASSES.ACTIVE);\r\n\t});\r\n\t$view.find('.friends-main-content').addClass(__C.CLASSES.HIDDEN);\r\n\t$content.removeClass(__C.CLASSES.HIDDEN).empty();\r\n\t\r\n\tfunction getFriendFeed() {\r\n\t\tvar $load_btn = $content.find('.load-more-btn');\r\n\t\tif (page_number == 0) {\r\n\t\t\t$content.find('.friend-events-block').remove();\r\n\t\t}\r\n\t\t$.ajax({\r\n\t\t\turl: '/api/v1/users/' + friend_id + '/actions?fields=entity,created_at,user,type_code,event{fields:\"organization_logo_small_url,image_square_vertical_url,organization_short_name\"},organization{fields:\"subscribed_count,img_medium_url\"}&&order_by=-created_at&length=10&offset=' + (10 * page_number++),\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\tvar hide_btn = false;\r\n\t\t\t\tif ((res.data.length == 0 && page_number != 1) || (res.data.length < 10 && res.data.length > 0)) {\r\n\t\t\t\t\t$load_btn.addClass(__C.CLASSES.HIDDEN);\r\n\t\t\t\t\thide_btn = true;\r\n\t\t\t\t} else if (res.data.length == 0 && page_number == 1) {\r\n\t\t\t\t\t$load_btn.before(tmpl('no-activity', {}));\r\n\t\t\t\t\t$load_btn.addClass(__C.CLASSES.HIDDEN);\r\n\t\t\t\t\thide_btn = true;\r\n\t\t\t\t}\r\n\t\t\t\tvar cards_by_users = {};\r\n\t\t\t\tres.data.forEach(function(stat) {\r\n\t\t\t\t\tvar date = moment.unix(stat.created_at),\r\n\t\t\t\t\t\tent = stat[stat.entity],\r\n\t\t\t\t\t\tkey = [stat.entity, stat.stat_type_id, stat.user.id, date.format('DD.MM')].join('-');\r\n\t\t\t\t\tif (cards_by_users.hasOwnProperty(key) == false) {\r\n\t\t\t\t\t\tcards_by_users[key] = {\r\n\t\t\t\t\t\t\tuser: stat.user,\r\n\t\t\t\t\t\t\tentity: stat.entity,\r\n\t\t\t\t\t\t\ttype_code: stat.type_code,\r\n\t\t\t\t\t\t\tdate: date.format(__C.DATE_FORMAT) == moment().format(__C.DATE_FORMAT) ? 'Сегодня' : date.format('DD.MM'),\r\n\t\t\t\t\t\t\taction_name: __C.ACTION_NAMES[stat.type_code][0].capitalize(),\r\n\t\t\t\t\t\t\tfirst_name: stat.user.first_name,\r\n\t\t\t\t\t\t\tavatar_url: stat.user.avatar_url,\r\n\t\t\t\t\t\t\tfriend_id: stat.user.id,\r\n\t\t\t\t\t\t\tlast_name: stat.user.last_name,\r\n\t\t\t\t\t\t\tentities: []\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcards_by_users[key].entities.push(ent);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t$.each(cards_by_users, function(key, value) {\r\n\t\t\t\t\tvar $card = tmpl('friends-feed-card-short', value),\r\n\t\t\t\t\t\titem_tmpl_name = value.entity == __C.ENTITIES.EVENT ? 'friends-feed-event' : 'friends-feed-organization';\r\n\t\t\t\t\t\r\n\t\t\t\t\tvalue.entities.forEach(function(ent) {\r\n\t\t\t\t\t\t$card.append(tmpl(item_tmpl_name, ent));\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$load_btn.before($card);\r\n\t\t\t\t});\r\n\t\t\t\tif (!hide_btn) {\r\n\t\t\t\t\t$load_btn.removeClass(__C.CLASSES.HIDDEN).find('.btn').removeClass(__C.CLASSES.DISABLED);\r\n\t\t\t\t}\r\n\t\t\t\t$load_btn.off('click').on('click', getFriendFeed);\r\n\t\t\t\tbindPageLinks($view);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t$.ajax({\r\n\t\turl: '/api/v1/users/' + friend_id + '?fields=subscriptions',\r\n\t\tsuccess: function(res) {\r\n\t\t\t$content.append(tmpl('friends-page-header', res.data[0]));\r\n\t\t\t__APP.changeTitle(res.data[0].first_name + ' ' + res.data[0].last_name);\r\n\t\t\t$content.find('.friend-user-link').on('click', function() {\r\n\t\t\t\twindow.open(res.data[0].link, '_blank');\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (res.data[0].subscriptions.length == 0) {\r\n\t\t\t\ttmpl('no-subscriptions', {}, $content.find('.one-friend-subscriptions'));\r\n\t\t\t} else {\r\n\t\t\t\ttmpl('friends-subscription', res.data[0].subscriptions, $content.find('.one-friend-subscriptions'))\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t$content.find('.friend-subscription-block').each(function(index) {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t$this.fadeIn(300);\r\n\t\t\t\t}, index * 40 + 500);\r\n\t\t\t});\r\n\t\t\t$content.find('.user-btn').on('click', function() {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\t$this.addClass(__C.CLASSES.ACTIVE);\r\n\t\t\t\t$this.siblings().removeClass(__C.CLASSES.ACTIVE);\r\n\t\t\t\t$content.find('.' + $this.data('tab'))\r\n\t\t\t\t\t.removeClass(__C.CLASSES.HIDDEN)\r\n\t\t\t\t\t.siblings()\r\n\t\t\t\t\t.addClass(__C.CLASSES.HIDDEN);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$view.find('.back-to-friends-list').on('click', function() {\r\n\t\t\t\t__APP.changeState('/friends');\r\n\t\t\t});\r\n\t\t\tgetFriendFeed();\r\n\t\t}\r\n\t});\r\n};","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Page\r\n * @param {(string|number)} [organization_id]\r\n */\r\nfunction EditOrganizationPage(organization_id) {\r\n\tPage.apply(this);\r\n\tthis.page_title = 'Редактировать организацию';\r\n\tthis.organization = new OneOrganization(organization_id);\r\n\tthis.categories = new CategoriesCollection();\r\n\t\r\n\tthis.fields = [\r\n\t\t'description',\r\n\t\t'site_url',\r\n\t\t'default_address',\r\n\t\t'vk_url',\r\n\t\t'facebook_url',\r\n\t\t'email'\r\n\t];\r\n\tif (organization_id) {\r\n\t\tthis.is_loading = true;\r\n\t\tthis.organization.fetchOrganization(this.fields, Page.triggerRender);\r\n\t}\r\n}\r\nEditOrganizationPage.extend(Page);\r\n\r\nEditOrganizationPage.prototype.render = function() {\r\n\tvar PAGE = this,\r\n\t\t$view = this.$view,\r\n\t\t$wrapper = this.$wrapper,\r\n\t\torganization_id = this.organization.id,\r\n\t\tadditional_fields,\r\n\t\tlocal_storage;\r\n\t\r\n\tfunction initEditEventPage($view) {\r\n\t\t\r\n\t\tfunction bindLoadByURLButton($view) {\r\n\t\t\t$view.find('.LoadByURLButton').not('-Handled_LoadByURLButton').on('click', function() {\r\n\t\t\t\tvar $this = $(this),\r\n\t\t\t\t\t$input = $('#' + $this.data('load_input'));\r\n\t\t\t\t$this.data('url', $input.val());\r\n\t\t\t\twindow.current_load_button = $this;\r\n\t\t\t\tsocket.emit('image.getFromURL', $input.val());\r\n\t\t\t\twindow.paceOptions = {\r\n\t\t\t\t\tcatchupTime: 10000,\r\n\t\t\t\t\tmaxProgressPerFrame: 1,\r\n\t\t\t\t\tghostTime: Number.MAX_SAFE_INTEGER,\r\n\t\t\t\t\tcheckInterval: {\r\n\t\t\t\t\t\tcheckInterval: 10000\r\n\t\t\t\t\t},\r\n\t\t\t\t\teventLag: {\r\n\t\t\t\t\t\tminSamples: 1,\r\n\t\t\t\t\t\tsampleCount: 30000000,\r\n\t\t\t\t\t\tlagThreshold: 0.1\r\n\t\t\t\t\t}\r\n\t\t\t\t}; //хз зачем, все равно не работает\r\n\t\t\t\tPace.restart();\r\n\t\t\t}).addClass('-Handled_LoadByURLButton');\r\n\t\t}\r\n\t\t\r\n\t\tfunction handleImgUpload($context, source, filename) {\r\n\t\t\tvar $parent = $context.closest('.EditEventImgLoadWrap'),\r\n\t\t\t\t$preview = $parent.find('.EditEventImgPreview'),\r\n\t\t\t\t$file_name_text = $parent.find('.FileNameText'),\r\n\t\t\t\t$file_name = $parent.find('.FileName'),\r\n\t\t\t\t$data_url = $parent.find('.DataUrl'),\r\n\t\t\t\t$button = $parent.find('.CallModal');\r\n\t\t\t\r\n\t\t\t$preview.attr('src', source);\r\n\t\t\t$file_name_text.html('Загружен файл:<br>' + filename);\r\n\t\t\t$file_name.val(filename);\r\n\t\t\t$button\r\n\t\t\t\t.data('source_img', source)\r\n\t\t\t\t.on('crop', function(event, cropped_src, crop_data) {\r\n\t\t\t\t\t$preview.attr('src', cropped_src);\r\n\t\t\t\t\t$button.data('crop_data', crop_data);\r\n\t\t\t\t\t$data_url.val('data.source').data('source', $preview.attr('src')).trigger('change');\r\n\t\t\t\t})\r\n\t\t\t\t.trigger('click.CallModal');\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tbindSelect2($view);\r\n\t\tbindTabs($view);\r\n\t\tbindLimitInputSize($view);\r\n\t\tbindRippleEffect($view);\r\n\t\tbindFileLoadButton($view);\r\n\t\tbindLoadByURLButton($view);\r\n\t\t\r\n\t\t\r\n\t\t$view.find('.LoadImg').off('change.LoadImg').on('change.LoadImg', function(e) {\r\n\t\t\tvar $this = $(e.target),\r\n\t\t\t\tfiles = e.target.files;\r\n\t\t\t\r\n\t\t\tif (files.length == 0) return false;\r\n\t\t\tfor (var i = 0, f; f = files[i]; i++) {\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\tif (!f.type.match('image.*'))    continue;\r\n\t\t\t\treader.onload = (function(the_file) {\r\n\t\t\t\t\treturn function(e) {\r\n\t\t\t\t\t\thandleImgUpload($this, e.target.result, the_file['name']);\r\n\t\t\t\t\t};\r\n\t\t\t\t})(f);\r\n\t\t\t\treader.readAsDataURL(f);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\t$view.find('#add_organization_submit').off('click.Submit').on('click.Submit', submitEditOrganization);\r\n\t\t\r\n\t}\r\n\t\r\n\tfunction initOrganizationTypes(selected_id) {\r\n\t\tPAGE.categories.fetchCategories({}, 0, function(data) {\r\n\t\t\tvar $wrapper = $view.find('.EditEventOrganizations'),\r\n\t\t\t\torganizations_options = $(),\r\n\t\t\t\t$select = $wrapper.find('#add_organization_type');\r\n\t\t\t\r\n\t\t\tdata.forEach(function(organization) {\r\n\t\t\t\torganizations_options = organizations_options.add(tmpl('option', {\r\n\t\t\t\t\tval: organization.id,\r\n\t\t\t\t\tdisplay_name: organization.name\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$select.append(organizations_options).select2({\r\n\t\t\t\tcontainerCssClass: 'form_select2',\r\n\t\t\t\tdropdownCssClass: 'form_select2_drop'\r\n\t\t\t});\r\n\t\t\tif (selected_id) {\r\n\t\t\t\t$select.select2('val', selected_id);\r\n\t\t\t}\r\n\t\t\tif (organizations_options.length > 1) {\r\n\t\t\t\t$wrapper.removeClass('-hidden');\r\n\t\t\t} else {\r\n\t\t\t\t$wrapper.addClass('-hidden');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction submitEditOrganization() {\r\n\t\tfunction formValidation($form, for_edit) {\r\n\t\t\tvar is_valid = true,\r\n\t\t\t\t$times = $form.find('#edit_event_different_time').prop('checked') ? $form.find('[class^=\"TableDay_\"]') : $form.find('.MainTime');\r\n\t\t\t\r\n\t\t\t$form.find(':required').not(':disabled').each(function() {\r\n\t\t\t\tvar $this = $(this),\r\n\t\t\t\t\tmax_length = $this.data('maxlength');\r\n\t\t\t\tif ($this.val() === \"\" || (max_length && $this.val().length > max_length)) {\r\n\t\t\t\t\tif (is_valid) {\r\n\t\t\t\t\t\t$('body').stop().animate({scrollTop: Math.ceil($this.offset().top - 150)}, 1000, 'swing');\r\n\t\t\t\t\t}\r\n\t\t\t\t\thandleErrorField($this);\r\n\t\t\t\t\tis_valid = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$times.each(function() {\r\n\t\t\t\tvar $row = $(this),\r\n\t\t\t\t\tstart = $row.find('.StartHours').val() + $row.find('.StartMinutes').val(),\r\n\t\t\t\t\tend = $row.find('.EndHours').val() + $row.find('.EndMinutes').val();\r\n\t\t\t\tif (start > end) {\r\n\t\t\t\t\tif (is_valid) {\r\n\t\t\t\t\t\t$('body').stop().animate({scrollTop: Math.ceil($row.offset().top - 150)}, 1000, 'swing');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tshowNotifier({text: 'Начальное время не может быть меньше конечного', status: false});\r\n\t\t\t\t\tis_valid = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (!for_edit) {\r\n\t\t\t\t$form.find('.DataUrl').each(function() {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tif ($this.val() === \"\") {\r\n\t\t\t\t\t\tif (is_valid) {\r\n\t\t\t\t\t\t\t$('body').stop().animate({scrollTop: Math.ceil($this.closest('.EditEventImgLoadWrap').offset().top - 150)}, 1000, 'swing', function() {\r\n\t\t\t\t\t\t\t\tshowNotifier({text: 'Пожалуйста, добавьте обложку организации', status: false})\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tis_valid = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn is_valid;\r\n\t\t}\r\n\t\t\r\n\t\tfunction afterSubmit() {\r\n\t\t\tsocket.on('utils.updateImagesDone', function() {\r\n\t\t\t\twindow.location.href = '/organization/' + PAGE.organization.id;\r\n\t\t\t});\r\n\t\t\tsocket.emit('utils.updateImages');\r\n\t\t}\r\n\t\t\r\n\t\tvar $form = $view.find(\"#add-organization-form\"),\r\n\t\t\tdata = {\r\n\t\t\t\torganization_id: null,\r\n\t\t\t\tname: null,\r\n\t\t\t\tshort_name: null,\r\n\t\t\t\ttype_id: null,\r\n\t\t\t\tbackground_filename: null,\r\n\t\t\t\tlogo_filename: null,\r\n\t\t\t\tdefault_address: null,\r\n\t\t\t\tlocation: null,\r\n\t\t\t\tdescription: null,\r\n\t\t\t\tsite_url: null,\r\n\t\t\t\tvk_url: null,\r\n\t\t\t\tfacebook_url: null,\r\n\t\t\t\temail: null,\r\n\t\t\t\tfilenames: {\r\n\t\t\t\t\tbackground: null,\r\n\t\t\t\t\tlogo: null\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tform_data = $form.serializeForm(),\r\n\t\t\tvalid_form = formValidation($form, !!(form_data.organization_id));\r\n\t\t\r\n\t\tif (valid_form) {\r\n\t\t\t$.extend(true, data, form_data);\r\n\t\t\t\r\n\t\t\tdata.filenames = {\r\n\t\t\t\tbackground: data.background_filename,\r\n\t\t\t\tlogo: data.logo_filename\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (PAGE.organization.id) {\r\n\t\t\t\tPAGE.organization.updateOrganization(data, afterSubmit);\r\n\t\t\t} else {\r\n\t\t\t\tPAGE.organization.createOrganization(data, afterSubmit);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tif (typeof organization_id === 'undefined') {\r\n\t\ttry {\r\n\t\t\tlocal_storage = JSON.parse(window.localStorage.getItem('organization_info'));\r\n\t\t} catch (e) {\r\n\t\t\tlocal_storage = {}\r\n\t\t}\r\n\t\t\r\n\t\tadditional_fields = $.extend({\r\n\t\t\theader_text: 'Новый организатор'\r\n\t\t}, local_storage, true);\r\n\t\t\r\n\t\twindow.localStorage.removeItem('open_add_organization');\r\n\t\twindow.localStorage.removeItem('organization_info');\r\n\t\t\r\n\t\t$wrapper.html(tmpl('add-organization-page', additional_fields));\r\n\t\tinitEditEventPage($view);\r\n\t\tModal.bindCallModal($view);\r\n\t\tinitOrganizationTypes();\r\n\t} else {\r\n\t\tadditional_fields = $.extend(true, {}, this.organization);\r\n\t\t\r\n\t\tadditional_fields.header_text = 'Редактирование организации';\r\n\t\t\r\n\t\tif (additional_fields.background_img_url) {\r\n\t\t\tadditional_fields.background_filename = additional_fields.background_img_url.split('/').reverse()[0];\r\n\t\t}\r\n\t\tif (additional_fields.img_url) {\r\n\t\t\tadditional_fields.logo_filename = additional_fields.img_url.split('/').reverse()[0];\r\n\t\t}\r\n\t\t\r\n\t\t$.extend(true, additional_fields, additional_fields);\r\n\t\t$wrapper.html(tmpl('add-organization-page', additional_fields));\r\n\t\t\r\n\t\tinitEditEventPage($view);\r\n\t\tinitOrganizationTypes(additional_fields.type_id);\r\n\t\t\r\n\t\tif (additional_fields.background_img_url && additional_fields.img_url) {\r\n\t\t\t$view.find('.CallModal').removeClass('-hidden').on('crop', function(event, cropped_src, crop_data) {\r\n\t\t\t\tvar $button = $(this),\r\n\t\t\t\t\t$parent = $button.closest('.EditEventImgLoadWrap'),\r\n\t\t\t\t\t$preview = $parent.find('.EditEventImgPreview'),\r\n\t\t\t\t\t$data_url = $parent.find('.DataUrl');\r\n\t\t\t\t$data_url.val('data.source').data('source', $preview.attr('src')).trigger('change');\r\n\t\t\t\t$preview.attr('src', cropped_src);\r\n\t\t\t\t$button.data('crop_data', crop_data);\r\n\t\t\t});\r\n\t\t}\r\n\t\tModal.bindCallModal($view);\r\n\t\t\r\n\t\tif (additional_fields.img_url) {\r\n\t\t\ttoDataUrl(additional_fields.img_url, function(base64_string) {\r\n\t\t\t\t$view.find('#add_organization_img_src').val(base64_string ? base64_string : null);\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (additional_fields.background_img_url) {\r\n\t\t\ttoDataUrl(additional_fields.background_img_url, function(base64_string) {\r\n\t\t\t\t$view.find('#add_organization_background_src').val(base64_string ? base64_string : null);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};","/**\r\n * @requires Class.EditOrganizationPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments EditOrganizationPage\r\n */\r\nfunction AddOrganizationPage() {\r\n\tEditOrganizationPage.apply(this);\r\n\tthis.page_title = 'Новая организация';\r\n}\r\nAddOrganizationPage.extend(EditOrganizationPage);","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Page\r\n * @param {(string|number)} [category_id]\r\n */\r\nfunction CatalogPage(category_id) {\r\n\tvar self = this;\r\n\tPage.apply(this);\r\n\t\r\n\tthis.wrapper_tmpl = 'organizations';\r\n\t\r\n\tthis.categories_ajax_data = {order_by: 'order_position'};\r\n\tthis.organizations_ajax_data = {\r\n\t\tfields: [\r\n\t\t\t'background_small_img_url',\r\n\t\t\t'img_small_url',\r\n\t\t\t'is_subscribed',\r\n\t\t\t'subscribed_count',\r\n\t\t\t'privileges'\r\n\t\t],\r\n\t\torder_by: '-subscribed_count'\r\n\t};\r\n\t\r\n\tthis.default_title = 'Организации';\r\n\t\r\n\tthis.is_loading = true;\r\n\tthis.selected_category_id = category_id;\r\n\tthis.categories = new CategoriesCollection();\r\n\tthis.all_organizations = new OrganizationsCollection();\r\n\tthis.categories.fetchCategoriesWithOrganizations(this.categories_ajax_data, this.organizations_ajax_data, 0, function() {\r\n\t\tself.all_organizations = self.categories\r\n\t\t\t.reduce(function(collection, cat) {\r\n\t\t\t\treturn collection.setData(cat.organizations);\r\n\t\t\t}, new OrganizationsCollection())\r\n\t\t\t.sort(function(a, b) {\r\n\t\t\t\treturn b.subscribed_count - a.subscribed_count;\r\n\t\t\t});\r\n\t\tPage.triggerRender();\r\n\t});\r\n}\r\nCatalogPage.extend(Page);\r\n/**\r\n *\r\n * @param {(string|number)} category_id\r\n */\r\nCatalogPage.prototype.selectCategory = function(category_id) {\r\n\tthis.selected_category_id = category_id ? category_id : this.selected_category_id;\r\n\tthis.$view.find('.Category').filter('[data-category-id=\"' + this.selected_category_id + '\"]').addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t__APP.changeState('/organizations/' + this.selected_category_id, true);\r\n\t__APP.changeTitle(this.categories.getByID(this.selected_category_id).name);\r\n};\r\n\r\nCatalogPage.prototype.init = function() {\r\n\tvar PAGE = this,\r\n\t\t$categories = PAGE.$view.find('.Category');\r\n\t\r\n\tfunction bindOrganizationsEvents() {\r\n\t\tbindRippleEffect(PAGE.$view);\r\n\t\tbindPageLinks(PAGE.$view);\r\n\t}\r\n\t\r\n\t$(window).on('subscribe.updateCatalog', function(e, id) {\r\n\t\tvar org = PAGE.all_organizations.getByID(id);\r\n\t\torg.is_subscribed = true;\r\n\t\torg.subscribed_count++;\r\n\t});\r\n\t$(window).on('unsubscribe.updateCatalog', function(e, id) {\r\n\t\tvar org = PAGE.all_organizations.getByID(id);\r\n\t\torg.is_subscribed = false;\r\n\t\torg.subscribed_count--;\r\n\t});\r\n\t\r\n\tbindOrganizationsEvents();\r\n\t\r\n\tPAGE.$view.find('.OrganizationsCategoriesScroll').scrollbar({disableBodyScroll: true});\r\n\t\r\n\tPAGE.$view.find('.ShowAllOrganizations').on('click.showAllOrganizations', function() {\r\n\t\t$categories.removeClass(__C.CLASSES.NEW_ACTIVE).siblings('.SubcategoryWrap').height(0);\r\n\t\tPAGE.selected_category_id = undefined;\r\n\t\t\r\n\t\t__APP.changeState('/organizations', true);\r\n\t\t__APP.changeTitle(PAGE.default_title);\r\n\t\tPAGE.$wrapper.html(__APP.BUILD.organizationCard(PAGE.all_organizations));\r\n\t\tbindOrganizationsEvents();\r\n\t});\r\n\t\r\n\t$categories.on('click.selectCategory', function() {\r\n\t\tvar $this = $(this),\r\n\t\t\tcategory_id = $this.data('category-id'),\r\n\t\t\t$wrap = $this.next('.SubcategoryWrap'),\r\n\t\t\tis_parent_category = !!$wrap.length,\r\n\t\t\tis_this_active = $this.hasClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\r\n\t\t$this.parent().find('.Category').not($this).removeClass(__C.CLASSES.NEW_ACTIVE).filter('.SubcategoryWrap').height(0);\r\n\t\tif (is_parent_category) {\r\n\t\t\t$wrap.height(is_this_active ? 0 : $wrap.children().outerHeight());\r\n\t\t\t$this.toggleClass(__C.CLASSES.NEW_ACTIVE);\r\n\t\t} else {\r\n\t\t\tif (is_this_active) {\r\n\t\t\t\tPAGE.categories = new CategoriesCollection();\r\n\t\t\t\tPAGE.categories.fetchCategoriesWithOrganizations(PAGE.categories_ajax_data, PAGE.organizations_ajax_data, 0, function() {\r\n\t\t\t\t\tPAGE.render();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tPAGE.selectCategory(category_id);\r\n\t\t\t\tPAGE.$wrapper.html(__APP.BUILD.organizationCard(PAGE.categories.getByID(category_id).organizations));\r\n\t\t\t\tbindOrganizationsEvents();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nCatalogPage.prototype.render = function() {\r\n\tthis.$view.find('.OrganizationsCategoriesScroll').html(__APP.BUILD.organisationsCategoriesItems(this.categories));\r\n\tthis.$wrapper.html(__APP.BUILD.organizationCard(this.selected_category_id ? this.categories.getByID(this.selected_category_id).organizations : this.all_organizations));\r\n\t\r\n\tif (this.selected_category_id) {\r\n\t\tthis.selectCategory(this.selected_category_id);\r\n\t} else {\r\n\t\t__APP.changeTitle(this.default_title);\r\n\t}\r\n\tthis.init();\r\n};\r\n\r\nCatalogPage.prototype.destroy = function() {\r\n\t$(window).off('subscribe.updateCatalog unsubscribe.updateCatalog');\r\n};","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Page\r\n * @param {(string|number)} organization_id\r\n */\r\nfunction OrganizationPage(organization_id) {\r\n\t/**\r\n\t * @typedef {object} OrganizationPage~EventType\r\n\t * @property {string} name\r\n\t * @property {string} scroll_event\r\n\t * @property {string} sort_date_type\r\n\t * @property {string} last_date\r\n\t * @property {boolean} disable_upload\r\n\t */\r\n\tvar self = this,\r\n\t\tevent_type_default = {\r\n\t\t\tlast_date: '',\r\n\t\t\tdisable_upload: false\r\n\t\t};\r\n\tPage.apply(this, arguments);\r\n\tthis.fields = [\r\n\t\t'img_small_url',\r\n\t\t'background_medium_img_url',\r\n\t\t'description',\r\n\t\t'site_url',\r\n\t\t'is_subscribed',\r\n\t\t'privileges',\r\n\t\t'default_address',\r\n\t\t'subscribed_count',\r\n\t\t'subscribed{fields:\"is_friend\",order_by:\"-is_friend,first_name\",length:10}'\r\n\t];\r\n\tthis.events_fields = [\r\n\t\t'image_horizontal_medium_url',\r\n\t\t'favored_users_count',\r\n\t\t'is_favorite',\r\n\t\t'favored{length:5}',\r\n\t\t'dates'\r\n\t];\r\n\t\r\n\t/**\r\n\t * @name OrganizationPage#event_types\r\n\t * @type object\r\n\t * @enum {OrganizationPage~EventType}\r\n\t */\r\n\tthis.event_types = {\r\n\t\tfuture: $.extend(true, {}, event_type_default, {\r\n\t\t\tname: 'future',\r\n\t\t\tscroll_event: 'scroll.uploadFutureEvents',\r\n\t\t\tsort_date_type: 'nearest_event_date'\r\n\t\t}),\r\n\t\tpast: $.extend(true, {}, event_type_default, {\r\n\t\t\tname: 'past',\r\n\t\t\tscroll_event: 'scroll.uploadPastEvents',\r\n\t\t\tsort_date_type: 'last_event_date'\r\n\t\t}),\r\n\t\tdelayed: $.extend(true, {}, event_type_default, {\r\n\t\t\tname: 'delayed',\r\n\t\t\tscroll_event: 'scroll.uploadDelayedEvents',\r\n\t\t\tsort_date_type: 'public_at'\r\n\t\t}),\r\n\t\tcanceled: $.extend(true, {}, event_type_default, {\r\n\t\t\tname: 'canceled',\r\n\t\t\tscroll_event: 'scroll.uploadCanceledEvents',\r\n\t\t\tsort_date_type: 'first_event_date'\r\n\t\t})\r\n\t};\r\n\t\r\n\tthis.events_load = 0;\r\n\tthis.is_loading = true;\r\n\tthis.future_events = new FutureEventsCollection();\r\n\tthis.past_events = new PastEventsCollection();\r\n\tthis.delayed_events = new DelayedEventsCollection();\r\n\tthis.canceled_events = new CanceledEventsCollection();\r\n\tthis.organization = new OneOrganization(organization_id);\r\n\tthis.organization.fetchOrganization(this.fields, function(data) {\r\n\t\tself.is_admin = self.organization.role != OneUser.ROLE.USER;\r\n\t\tself.max_events_load = self.is_admin ? 4 : 2;\r\n\t\tPage.triggerRender();\r\n\t});\r\n}\r\nOrganizationPage.extend(Page);\r\n/**\r\n *\r\n * @param {OrganizationPage~EventType} type\r\n * @param {Array<OneEvent>} events\r\n * @returns {jQuery}\r\n */\r\nOrganizationPage.prototype.appendEvents = function(type, events) {\r\n\tvar $wrapper = this.$wrapper.find('.' + type.name.capitalize() + 'Events'),\r\n\t\t$output;\r\n\t\r\n\tif (events.length) {\r\n\t\t$output = __APP.BUILD.organizationFeedEvents(events, type);\r\n\t} else {\r\n\t\ttype.disable_upload = true;\r\n\t\t$(window).off(type.scroll_event);\r\n\t\t$output = tmpl('organization-feed-no-event', {\r\n\t\t\ttext: 'Больше событий нет :('\r\n\t\t});\r\n\t}\r\n\t$wrapper.append($output);\r\n\tif ($wrapper.hasClass(__C.CLASSES.NEW_ACTIVE)) {\r\n\t\t$wrapper.parent().height($wrapper.height());\r\n\t}\r\n\treturn $output;\r\n};\r\n/**\r\n *\r\n * @param {OrganizationPage~EventType} type\r\n */\r\nOrganizationPage.prototype.bindUploadEventsOnScroll = function(type) {\r\n\tvar PAGE = this,\r\n\t\t$window = $(window),\r\n\t\tscrollEvent = function() {\r\n\t\t\tif ($window.height() + $window.scrollTop() + 200 >= $(document).height() && !type.disable_upload) {\r\n\t\t\t\t$window.off(type.scroll_event);\r\n\t\t\t\tPAGE[type.name + '_events'].fetchOrganizationsFeed(PAGE.organization.id, PAGE.events_fields, 10, function(events) {\r\n\t\t\t\t\tPAGE.bindFeedEvents(PAGE.appendEvents(type, events));\r\n\t\t\t\t\t$window.on(type.scroll_event, scrollEvent);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\tif (!type.disable_upload) {\r\n\t\t$window.on(type.scroll_event, scrollEvent);\r\n\t}\r\n};\r\n\r\nOrganizationPage.prototype.bindFeedEvents = function($parent) {\r\n\tbindRippleEffect($parent);\r\n\tbindAddAvatar($parent);\r\n\ttrimAvatarsCollection($parent);\r\n\tModal.bindCallModal($parent);\r\n\tbindPageLinks($parent);\r\n};\r\n\r\nOrganizationPage.prototype.init = function() {\r\n\tvar PAGE = this,\r\n\t\t$subscribers_scroll;\r\n\tbindTabs(PAGE.$wrapper);\r\n\tPAGE.bindFeedEvents(PAGE.$wrapper);\r\n\tModal.bindCallModal(PAGE.$wrapper);\r\n\t\r\n\tPAGE.$wrapper.find('.Tabs').on('change.tabs', function() {\r\n\t\tvar scroll_events = [];\r\n\t\t$.each(PAGE.event_types, function() {\r\n\t\t\tscroll_events.push(this.scroll_event);\r\n\t\t});\r\n\t\t$(window).off(scroll_events.join(' '));\r\n\t\tPAGE.bindUploadEventsOnScroll(PAGE.event_types[$(this).find('.Tab.-active').data('type')]);\r\n\t});\r\n\t\r\n\tPAGE.$wrapper.find('.ExternalPage').on('click.sendStat', function() {\r\n\t\tstoreStat(PAGE.organization.id, __C.STATS.ORGANIZATION_ENTITY, __C.STATS.ORGANIZATION_OPEN_SITE);\r\n\t});\r\n\t\r\n\t$subscribers_scroll = PAGE.$wrapper.find('.SubscribersScroll').scrollbar({\r\n\t\tdisableBodyScroll: true,\r\n\t\tonScroll: function(y) {\r\n\t\t\tif (y.scroll == y.maxScroll) {\r\n\t\t\t\tPAGE.organization.subscribed.fetchOrganizationSubscribers(PAGE.organization.id, 10, {\r\n\t\t\t\t\tfields: 'is_friend',\r\n\t\t\t\t\torder_by: '-is_friend,first_name'\r\n\t\t\t\t}, function(subscribed) {\r\n\t\t\t\t\tif (subscribed.length) {\r\n\t\t\t\t\t\t$subscribers_scroll.append(__APP.BUILD.subscribers(subscribed, PAGE.organization.subscribed[PAGE.organization.subscribed.length - 1].is_friend));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$subscribers_scroll.off('scroll.onScroll');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbindPageLinks($subscribers_scroll);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nOrganizationPage.prototype.render = function() {\r\n\tvar PAGE = this;\r\n\t\r\n\t__APP.changeTitle(PAGE.organization.short_name);\r\n\t$('.SidebarOrganizationsList').find('[data-organization_id=\"' + PAGE.organization.id + '\"]').find('.OrganizationCounter').addClass('-hidden');\r\n\t\r\n\tPAGE.$wrapper.html(tmpl('organization-wrapper', $.extend(true, {\r\n\t\tsubscribe_button: new SubscribeButton(PAGE.organization.id, PAGE.organization.is_subscribed, {\r\n\t\t\tcolors: {\r\n\t\t\t\tsubscribe: '-color_accent',\r\n\t\t\t\tunsubscribe: '-color_neutral',\r\n\t\t\t\tsubscribed: '-color_neutral'\r\n\t\t\t},\r\n\t\t\tclasses: ['-size_low', '-fill', 'RippleEffect']\r\n\t\t}),\r\n\t\thas_address: PAGE.organization.default_address ? '' : '-hidden',\r\n\t\tredact_org_button: (PAGE.organization.role == OneUser.ROLE.ADMIN) ? __APP.BUILD.link({\r\n\t\t\ttitle: 'Изменить',\r\n\t\t\tclasses: ['button', '-fill', '-color_neutral', 'fa_icon', 'fa-pencil', 'RippleEffect'],\r\n\t\t\tpage: 'organization/' + PAGE.organization.id + '/edit/'\r\n\t\t}) : '',\r\n\t\thidden_for_users: PAGE.is_admin ? '' : '-hidden',\r\n\t\tsubscribed_blocks: __APP.BUILD.subscribers(PAGE.organization.subscribed)\r\n\t}, PAGE.organization)));\r\n\t\r\n\tPAGE.$wrapper.on('events_load.FutureEvents events_load.PastEvents events_load.DelayedEvents events_load.CanceledEvents', function(e) {\r\n\t\tif (e.namespace == 'FutureEvents') {\r\n\t\t\tPAGE.init();\r\n\t\t\tPAGE.bindUploadEventsOnScroll(PAGE.event_types.future);\r\n\t\t}\r\n\t\tPAGE.bindFeedEvents(PAGE.$wrapper.find('.' + e.namespace));\r\n\t\tif (++PAGE.events_load == PAGE.max_events_load) {\r\n\t\t\tPAGE.$wrapper.off('events_load');\r\n\t\t}\r\n\t});\r\n\t\r\n\t\r\n\tPAGE.future_events.fetchOrganizationsFeed(PAGE.organization.id, PAGE.events_fields, 10, function(future_events) {\r\n\t\tPAGE.appendEvents(PAGE.event_types.future, future_events);\r\n\t\tPAGE.$wrapper.trigger('events_load.FutureEvents');\r\n\t});\r\n\t\r\n\tPAGE.past_events.fetchOrganizationsFeed(PAGE.organization.id, PAGE.events_fields, 10, function(past_events) {\r\n\t\tPAGE.appendEvents(PAGE.event_types.past, past_events);\r\n\t\tPAGE.$wrapper.trigger('events_load.PastEvents');\r\n\t});\r\n\t\r\n\tif (PAGE.is_admin) {\r\n\t\tPAGE.delayed_events.fetchOrganizationsFeed(PAGE.organization.id, PAGE.events_fields, 10, function(delayed_events) {\r\n\t\t\tPAGE.appendEvents(PAGE.event_types.delayed, delayed_events);\r\n\t\t\tPAGE.$wrapper.trigger('events_load.DelayedEvents');\r\n\t\t});\r\n\t\t\r\n\t\tPAGE.canceled_events.fetchOrganizationsFeed(PAGE.organization.id, PAGE.events_fields, 10, function(canceled_events) {\r\n\t\t\tPAGE.appendEvents(PAGE.event_types.canceled, canceled_events);\r\n\t\t\tPAGE.$wrapper.trigger('events_load.CanceledEvents');\r\n\t\t});\r\n\t}\r\n};","/**\r\n * @requires ../Class.Page.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments Page\r\n * @param {string} search\r\n */\r\nfunction SearchPage(search) {\r\n\tPage.apply(this, arguments);\r\n\t\r\n\tthis.page_title = 'Поиск';\r\n\tthis.$search_bar_input = $('#search_bar_input');\r\n\tthis.search_string = decodeURIComponent(search);\r\n\tthis.events_ajax_data = {\r\n\t\tlength: 20,\r\n\t\tfields: [\r\n\t\t\t'image_horizontal_medium_url',\r\n\t\t\t'detail_info_url',\r\n\t\t\t'is_favorite',\r\n\t\t\t'nearest_event_date',\r\n\t\t\t'can_edit',\r\n\t\t\t'location',\r\n\t\t\t'favored_users_count',\r\n\t\t\t'organization_name',\r\n\t\t\t'organization_short_name',\r\n\t\t\t'organization_logo_small_url',\r\n\t\t\t'description',\r\n\t\t\t'favored',\r\n\t\t\t'is_same_time',\r\n\t\t\t'tags',\r\n\t\t\t'dates'\r\n\t\t],\r\n\t\tfilters: \"future=true\"\r\n\t};\r\n\tthis.organizations_ajax_data = {\r\n\t\tlength: 30,\r\n\t\tfields: [\r\n\t\t\t'subscribed_count',\r\n\t\t\t'img_small_url'\r\n\t\t]\r\n\t};\r\n\tthis.search_results = new SearchResults(this.search_string);\r\n\tthis.is_loading = true;\r\n\tthis.search_results.fetchEventsAndOrganizations(this.events_ajax_data, this.organizations_ajax_data, Page.triggerRender);\r\n}\r\nSearchPage.extend(Page);\r\n/**\r\n *\r\n * @param {(OneOrganization|Array<OneOrganization>|OrganizationsCollection)} organizations\r\n * @returns {jQuery}\r\n */\r\nSearchPage.buildOrganizationItems = function(organizations) {\r\n\treturn __APP.BUILD.organizationItems(organizations, {\r\n\t\tblock_classes: ['-show'],\r\n\t\tavatar_classes: ['-size_50x50', '-rounded'],\r\n\t\tcounter_classes: [__C.CLASSES.NEW_HIDDEN]\r\n\t})\r\n};\r\n\r\nSearchPage.prototype.render = function() {\r\n\tvar PAGE = this,\r\n\t\tdata = {},\r\n\t\t$organizations_scrollbar;\r\n\t\r\n\tthis.$search_bar_input.val(this.search_string);\r\n\t\r\n\tfunction bindFeedEvents($parent) {\r\n\t\tbindAddAvatar($parent);\r\n\t\ttrimAvatarsCollection($parent);\r\n\t\tbindRippleEffect($parent);\r\n\t\tModal.bindCallModal($parent);\r\n\t\tbindPageLinks($parent);\r\n\t\t\r\n\t\t$parent.find('.HideEvent').addClass(__C.CLASSES.NEW_HIDDEN);\r\n\t}\r\n\t\r\n\tif (this.search_results.events.length == 0) {\r\n\t\tdata.events = tmpl('search-no-events', {});\r\n\t} else {\r\n\t\tdata.events = __APP.BUILD.feedEventCards(this.search_results.events);\r\n\t}\r\n\tif (this.search_results.organizations.length == 0) {\r\n\t\tdata.no_organizations = __C.CLASSES.NEW_HIDDEN;\r\n\t} else {\r\n\t\tdata.organizations = SearchPage.buildOrganizationItems(this.search_results.organizations);\r\n\t}\r\n\t\r\n\tthis.$wrapper.append(tmpl('search-wrapper', data));\r\n\t$organizations_scrollbar = this.$wrapper.find('.SearchOrganizationsScrollbar').scrollbar({\r\n\t\tdisableBodyScroll: true,\r\n\t\tonScroll: function(y) {\r\n\t\t\tif (y.scroll == y.maxScroll) {\r\n\t\t\t\tPAGE.search_results.fetchOrganizations(PAGE.organizations_ajax_data, function(organizations) {\r\n\t\t\t\t\tif (organizations.length) {\r\n\t\t\t\t\t\t$organizations_scrollbar.append(SearchPage.buildOrganizationItems(organizations));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$organizations_scrollbar.off('scroll.onScroll');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbindPageLinks($organizations_scrollbar);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tbindFeedEvents(this.$wrapper);\r\n};","/**\r\n * @requires Class.StatisticsPage.js\r\n */\r\n/**\r\n *\r\n * @constructor\r\n * @augments StatisticsPage\r\n */\r\nfunction StatisticsOverviewPage() {\r\n\tStatisticsPage.apply(this);\r\n\tthis.my_organizations_fields = ['img_medium_url', 'subscribed_count', 'staff'];\r\n\tthis.page_title = 'Организации';\r\n\tthis.is_loading = true;\r\n\tthis.my_organizations = new OrganizationsCollection();\r\n\tthis.my_organizations.fetchMyOrganizations('admin', this.my_organizations_fields, 10, '', Page.triggerRender);\r\n}\r\nStatisticsOverviewPage.extend(StatisticsPage);\r\n\r\nStatisticsOverviewPage.buildMyOrganizationsBlocks = function(organizations) {\r\n\treturn tmpl('statistics-overview-organization', organizations.map(function(org) {\r\n\t\tvar avatars_max_count = 2,\r\n\t\t\tstaff_additional_fields = {\r\n\t\t\t\tis_link: true,\r\n\t\t\t\tavatar_classes: ['-size_100x100', '-rounded']\r\n\t\t\t},\r\n\t\t\torg_roles = [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: OneUser.ROLE.ADMIN,\r\n\t\t\t\t\ttitle: 'Администраторы',\r\n\t\t\t\t\tstaff: org.staff.getSpecificStaff(OneUser.ROLE.ADMIN, staff_additional_fields),\r\n\t\t\t\t\tplural_name: OneUser.ROLE.ADMIN + 's'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: OneUser.ROLE.MODERATOR,\r\n\t\t\t\t\ttitle: 'Модераторы',\r\n\t\t\t\t\tstaff: org.staff.getSpecificStaff(OneUser.ROLE.MODERATOR, staff_additional_fields),\r\n\t\t\t\t\tplural_name: OneUser.ROLE.MODERATOR + 's'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tstaffs_fields = {\r\n\t\t\t\tclasses: ['-size_30x30', '-rounded', 'CallModal'],\r\n\t\t\t\tdataset: {\r\n\t\t\t\t\tmodal_type: 'editors',\r\n\t\t\t\t\tmodal_organization_id: org.id\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\torg_roles.forEach(function(role) {\r\n\t\t\torg[role.plural_name] = __APP.BUILD.avatarCollection(role.staff, avatars_max_count, $.extend(true, {}, staffs_fields, {\r\n\t\t\t\tdataset: {\r\n\t\t\t\t\tmodal_specific_role: role.name,\r\n\t\t\t\t\tmodal_title: role.title\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\torg[role.plural_name + '_plus_count'] = role.staff.length - avatars_max_count;\r\n\t\t\torg[role.plural_name + '_plus_count_hidden'] = org[role.plural_name + '_plus_count'] <= 0 ? '-cast' : '';\r\n\t\t});\r\n\t\treturn $.extend(true, {}, org, {\r\n\t\t\tsubscribers: org.subscribed_count + getUnitsText(org.subscribed_count, __LOCALES.ru_RU.TEXTS.SUBSCRIBERS),\r\n\t\t\tbuttons: __APP.BUILD.link({\r\n\t\t\t\ttitle: 'Редактировать',\r\n\t\t\t\tclasses: ['button', 'fa_icon', 'fa-pencil', '-color_neutral', 'RippleEffect'],\r\n\t\t\t\tpage: '/organization/' + org.id + '/edit'\r\n\t\t\t}, {\r\n\t\t\t\ttitle: 'Создать событие',\r\n\t\t\t\tclasses: ['button', 'fa_icon', 'fa-plus', '-color_accent', 'RippleEffect'],\r\n\t\t\t\tpage: '/event/add_to/' + org.id\r\n\t\t\t})\r\n\t\t});\r\n\t}));\r\n};\r\n\r\nStatisticsOverviewPage.prototype.bindOrganizationsEvents = function($parent) {\r\n\ttrimAvatarsCollection($parent);\r\n\tbindPageLinks($parent);\r\n\tModal.bindCallModal($parent);\r\n\tbindRippleEffect($parent);\r\n\treturn $parent;\r\n};\r\n\r\nStatisticsOverviewPage.prototype.bindUploadOnScroll = function() {\r\n\tvar PAGE = this,\r\n\t\t$window = $(window),\r\n\t\tscrollEvent = function() {\r\n\t\t\tif ($window.height() + $window.scrollTop() + 200 >= $(document).height() && !PAGE.disable_upload) {\r\n\t\t\t\t$window.off('scroll.uploadOrganizations');\r\n\t\t\t\tPAGE.my_organizations.fetchMyOrganizations('admin', PAGE.my_organizations_fields, 10, '', function(organizations) {\r\n\t\t\t\t\tif (organizations.length) {\r\n\t\t\t\t\t\tPAGE.find('.StatOverviewOrganizations').append(PAGE.bindOrganizationsEvents(StatisticsOverviewPage.buildMyOrganizationsBlocks(organizations)));\r\n\t\t\t\t\t\t$window.on('scroll.uploadOrganizations', scrollEvent);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tPAGE.disable_upload = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\tif (!PAGE.disable_upload) {\r\n\t\t$window.on('scroll.uploadOrganizations', scrollEvent);\r\n\t}\r\n};\r\n\r\nStatisticsOverviewPage.prototype.init = function() {\r\n\tthis.bindOrganizationsEvents(this.$wrapper);\r\n\tthis.bindUploadOnScroll();\r\n};\r\n\r\nStatisticsOverviewPage.prototype.render = function() {\r\n\tthis.$wrapper.html(tmpl('statistics-overview-wrapper', {\r\n\t\torganizations: StatisticsOverviewPage.buildMyOrganizationsBlocks(this.my_organizations)\r\n\t}));\r\n\tthis.init();\r\n};\r\n\r\nStatisticsOverviewPage.prototype.destroy = function() {\r\n\t$(window).off('scroll.uploadOrganizations');\r\n};","socket = io.connect(window.location.protocol == 'https:' ? ':8443' : ':8080', {secure: window.location.protocol == 'https:'});\r\n\r\nsocket.on('auth', function (data) {\r\n\tconsole.log(data);\r\n\t$.ajax({\r\n\t\turl: 'auth.php',\r\n\t\ttype: 'POST',\r\n\t\tdata: data,\r\n\t\tsuccess: function (res) {\r\n\t\t\t\r\n\t\t\tif (yaCounter32442130) {\r\n\t\t\t\tswitch (data.type) {\r\n\t\t\t\t\tcase 'vk': {\r\n\t\t\t\t\t\tyaCounter32442130.reachGoal('VkAuthDone');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'facebook': {\r\n\t\t\t\t\t\tyaCounter32442130.reachGoal('FacebookAuthDone');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'google': {\r\n\t\t\t\t\t\tyaCounter32442130.reachGoal('GoogleAuthDone');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (res.status) {\r\n\t\t\t\tif (data.hasOwnProperty('mobile') && data.mobile == true) {\r\n\t\t\t\t\twindow.location.href = '/mobileAuthDone.php?token=' + data.token + '&email=' + data.email;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (window.localStorage.getItem('open_add_organization') == 'true') {\r\n\t\t\t\t\t\twindow.parent.location = 'organization/add';\r\n\t\t\t\t\t} else if (data.subscriptions_count == 0) {\r\n\t\t\t\t\t\twindow.parent.location = 'onboarding';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.parent.location = 'feed';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$('.panel-body.loader-demo').text(res.text);\r\n\t\t\t\t$('.panel-heading').hide();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});\r\n\r\nsocket.on('log', function (data) {\r\n\tconsole.log(data);\r\n});\r\n\r\nsocket.on('error.retry', function () {\r\n\t$('.panel-body.loader-demo').text('Во время загрузки данных произошла ошибка. Войдите с помощью другой социальной сети или попробуте чуть позже.');\r\n\t$('.panel-heading').hide();\r\n});\r\n\r\nsocket.on('notification', function (data) {\r\n\tif (!Notify.needsPermission) {\r\n\t\tsocket.emit('notification.received', {\r\n\t\t\tnotification_id: data.notification_id\r\n\t\t});\r\n\t\tvar myNotification = new Notify(data.note.payload.title, {\r\n\t\t\t\tbody: data.note.body,\r\n\t\t\t\ticon: data.note.icon,\r\n\t\t\t\ttag: data.note.payload.event_id,\r\n\t\t\t\ttimeout: 60,\r\n\t\t\t\tnotifyClick: function () {\r\n\t\t\t\t\t$(\"<a>\").attr(\"href\", window.location.origin + '/event.php?id=' + data.note.payload.event_id).attr(\"target\", \"_blank\")[0].click();\r\n\t\t\t\t\tsocket.emit('notification.received', {\r\n\t\t\t\t\t\tnotification_id: data.notification_id,\r\n\t\t\t\t\t\tclick_time: moment().format(__C.DATE_FORMAT + ' HH:MM:SS')\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t\t\r\n\t\tmyNotification.show();\r\n\t} else if (Notify.isSupported()) {\r\n\t\tNotify.requestPermission();\r\n\t}\r\n});\r\n\r\nsocket.on('image.getFromURLDone', function(response){\r\n\tif(response.error){\r\n\t\tshowNotifier({text: response.error, status: false});\r\n\t} else {\r\n\t\tRedactEventPage.handleImgUpload(window.current_load_button, response.data, response.filename);\r\n\t}\r\n});\r\n\r\nsocket.on('vk.getGroupsToPostDone', function(response){\r\n\tif(response.error){\r\n\t\tshowNotifier({text: response.error, status: false});\r\n\t} else {\r\n\t\tvar data = response.data.response,\r\n\t\t\t$groups = __APP.CURRENT_PAGE.$wrapper.find('#edit_event_vk_groups');\r\n\t\tif(data.length || data[0]){\r\n\t\t\tdata.splice(0,1);\r\n\t\t\tdata.forEach(function(option){\r\n\t\t\t\t$groups.append(tmpl('option', {\r\n\t\t\t\t\tval: option.gid,\r\n\t\t\t\t\tdisplay_name: option.name,\r\n\t\t\t\t\tdata: \"data-img='\"+option.photo+\"'\"\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\t\t\tinitSelect2($groups);\r\n\t\t} else {\r\n\t\t\t__APP.CURRENT_PAGE.$wrapper.find('#edit_event_to_public_vk').toggleStatus('disabled').prop('checked', false).trigger('change');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nsocket.on('vk.post.error', function(response){\r\n\tconsole.log(response);\r\n\tshowNotifier({text: 'Не удалось опубликовать событие в группе vk. Пожалуйста, попробуйте еще раз.', status: false});\r\n});","__APP = {\r\n\tSERVER: {\r\n\t\t/**\r\n\t\t * @enum {string}\r\n\t\t */\r\n\t\tAJAX_METHOD: {\r\n\t\t\tGET: 'GET',\r\n\t\t\tPOST: 'POST',\r\n\t\t\tPUT: 'PUT',\r\n\t\t\tDELETE: 'DELETE'\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {__APP.SERVER.AJAX_METHOD} ajax_method\r\n\t\t * @param {string} ajax_url\r\n\t\t * @param {(AJAXData|string)} ajax_data\r\n\t\t * @param {AJAXCallback} [success]\r\n\t\t * @param {function} [error]\r\n\t\t * @returns {jqXHR}\r\n\t\t */\r\n\t\tAJAX: function AJAX(ajax_method, ajax_url, ajax_data, success, error) {\r\n\t\t\treturn $.ajax({\r\n\t\t\t\turl: ajax_url,\r\n\t\t\t\tdata: ajax_data,\r\n\t\t\t\tmethod: ajax_method,\r\n\t\t\t\tcontentType: 'application/json',\r\n\t\t\t\tsuccess: success,\r\n\t\t\t\terror: error\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {string} ajax_url\r\n\t\t * @param {AJAXData} ajax_data\r\n\t\t * @param {AJAXCallback} [success]\r\n\t\t * @returns {jqXHR}\r\n\t\t */\r\n\t\tgetData: function getData(ajax_url, ajax_data, success) {\r\n\t\t\treturn __APP.SERVER.AJAX(__APP.SERVER.AJAX_METHOD.GET, ajax_url, __APP.SERVER.validateData(ajax_data), function(res) {\r\n\t\t\t\t__APP.SERVER.ajaxHandler(res, function(data, text) {\r\n\t\t\t\t\tif (success && typeof success == 'function') {\r\n\t\t\t\t\t\tif (ajax_data.length != undefined && ajax_data.offset != undefined) {\r\n\t\t\t\t\t\t\tajax_data.offset += ajax_data.length;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsuccess.call(self, data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, __APP.SERVER.ajaxErrorHandler)\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {string} ajax_url\r\n\t\t * @param {AJAXData} ajax_data\r\n\t\t * @param {AJAXCallback} [success]\r\n\t\t * @returns {jqXHR}\r\n\t\t */\r\n\t\tupdateData: function updateData(ajax_url, ajax_data, success) {\r\n\t\t\treturn __APP.SERVER.AJAX(__APP.SERVER.AJAX_METHOD.PUT, ajax_url, ajax_data, function(res) {\r\n\t\t\t\t__APP.SERVER.ajaxHandler(res, function(data, text) {\r\n\t\t\t\t\tif (success && typeof success == 'function') {\r\n\t\t\t\t\t\tif (ajax_data.length != undefined && ajax_data.offset != undefined) {\r\n\t\t\t\t\t\t\tajax_data.offset += ajax_data.length;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsuccess.call(self, data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, __APP.SERVER.ajaxErrorHandler)\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {string} ajax_url\r\n\t\t * @param {AJAXData} ajax_data\r\n\t\t * @param {AJAXCallback} [success]\r\n\t\t * @returns {jqXHR}\r\n\t\t */\r\n\t\taddData: function addData(ajax_url, ajax_data, success) {\r\n\t\t\treturn __APP.SERVER.AJAX(__APP.SERVER.AJAX_METHOD.POST, ajax_url, ajax_data, function(res) {\r\n\t\t\t\t__APP.SERVER.ajaxHandler(res, function(data, text) {\r\n\t\t\t\t\tif (success && typeof success == 'function') {\r\n\t\t\t\t\t\tif (ajax_data.length != undefined && ajax_data.offset != undefined) {\r\n\t\t\t\t\t\t\tajax_data.offset += ajax_data.length;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsuccess.call(self, data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, __APP.SERVER.ajaxErrorHandler)\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {string} ajax_url\r\n\t\t * @param {AJAXData} ajax_data\r\n\t\t * @param {AJAXCallback} [success]\r\n\t\t * @returns {jqXHR}\r\n\t\t */\r\n\t\tdeleteData: function deleteData(ajax_url, ajax_data, success) {\r\n\t\t\treturn __APP.SERVER.AJAX(__APP.SERVER.AJAX_METHOD.DELETE, ajax_url, ajax_data, function(res) {\r\n\t\t\t\t__APP.SERVER.ajaxHandler(res, function(data, text) {\r\n\t\t\t\t\tif (success && typeof success == 'function') {\r\n\t\t\t\t\t\tif (ajax_data.length != undefined && ajax_data.offset != undefined) {\r\n\t\t\t\t\t\t\tajax_data.offset += ajax_data.length;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsuccess.call(self, data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, __APP.SERVER.ajaxErrorHandler)\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {AJAXData} ajax_data\r\n\t\t * @returns {AJAXData}\r\n\t\t */\r\n\t\tvalidateData: function validateData(ajax_data) {\r\n\t\t\tif (ajax_data.fields && Array.isArray(ajax_data.fields)) {\r\n\t\t\t\tif (ajax_data.order_by) {\r\n\t\t\t\t\t(ajax_data.order_by instanceof Array ? ajax_data.order_by : ajax_data.order_by.split(',')).forEach(function(order_by) {\r\n\t\t\t\t\t\tif (ajax_data.fields.indexOf(order_by.trim().replace('-', '')) === -1) {\r\n\t\t\t\t\t\t\tajax_data.fields.push(order_by.trim().replace('-', ''));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (ajax_data.fields.length) {\r\n\t\t\t\t\tajax_data.fields = ajax_data.fields.join(',');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tajax_data.fields = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn ajax_data;\r\n\t\t},\r\n\t\t\r\n\t\tajaxHandler: function ajaxHandler(result, success, error) {\r\n\t\t\terror = typeof error !== 'undefined' ? error : function() {\r\n\t\t\t\tconsole.log(result);\r\n\t\t\t\tshowNotifier({text: 'Упс, что-то пошло не так', status: false});\r\n\t\t\t};\r\n\t\t\tsuccess = typeof success !== 'function' ? function() {} : success;\r\n\t\t\ttry {\r\n\t\t\t\tif (result.status) {\r\n\t\t\t\t\tsuccess(result.data, result.text);\r\n\t\t\t\t} else {\r\n\t\t\t\t\terror(result);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\terror(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tajaxErrorHandler: function ajaxErrorHandler(event, jqxhr, settings, thrownError) {\r\n\t\t\tvar args = Array.prototype.slice.call(arguments),\r\n\t\t\t\tdebug = {},\r\n\t\t\t\tfields;\r\n\t\t\tif (args.length == 4) {\r\n\t\t\t\tfields = ['event', 'jqxhr', 'settings', 'thrownError'];\r\n\t\t\t\targs.forEach(function(arg, i) {\r\n\t\t\t\t\tdebug[fields[i]] = arg;\r\n\t\t\t\t});\r\n\t\t\t} else if (args.length == 1) {\r\n\t\t\t\tdebug = args[0];\r\n\t\t\t} else {\r\n\t\t\t\targs.forEach(function(arg, i) {\r\n\t\t\t\t\tdebug[i] = arg;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconsole.groupCollapsed('AJAX error');\r\n\t\t\tif (debug.thrownError)\r\n\t\t\t\tconsole.log('Thrown error:', debug.thrownError);\r\n\t\t\tif (debug.event && debug.event.type)\r\n\t\t\t\tconsole.log('Error type:', debug.event.type);\r\n\t\t\tif (debug.event && debug.event.text)\r\n\t\t\t\tconsole.log('Description:', debug.event.text);\r\n\t\t\tif (debug.jqxhr && debug.jqxhr.responseJSON && debug.jqxhr.responseJSON.text) {\r\n\t\t\t\tconsole.log('Response:', debug.jqxhr.responseJSON.text);\r\n\t\t\t\tshowNotifier({text: debug.jqxhr.responseJSON.text, status: false});\r\n\t\t\t}\r\n\t\t\tif (debug.settings) {\r\n\t\t\t\tconsole.log('URL:', debug.settings.url);\r\n\t\t\t\tconsole.log('Method:', debug.settings.type);\r\n\t\t\t}\r\n\t\t\tif (debug.stack) {\r\n\t\t\t\tconsole.log('Thrown error:', debug.name);\r\n\t\t\t\tconsole.log('Description:', debug.message);\r\n\t\t\t\tconsole.log('Error stacktrace:', debug.stack);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error('Error stacktrace:');\r\n\t\t\t}\r\n\t\t\tconsole.groupEnd();\r\n\t\t\t\r\n\t\t\tif (!window.errors_array)  window.errors_array = [];\r\n\t\t\twindow.errors_array.push(debug);\r\n\t\t}\r\n\t},\r\n\tEVENDATE_BEGIN: '15-12-2015',\r\n\tUSER: new CurrentUser(),\r\n\tPREVIOUS_PAGE: new Page(),\r\n\tCURRENT_PAGE: new Page(),\r\n\tCURRENT_JQXHR: {},\r\n\tBUILD: {\r\n\t\t/**\r\n\t\t * @typedef {object} buildProps\r\n\t\t * @property {(Array<string>|string)} classes\r\n\t\t * @property {(Array<string>|object)} dataset\r\n\t\t * @property {(Array<string>|object)} attributes\r\n\t\t */\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {buildProps} props\r\n\t\t * @param {Array<string>} [classes]\r\n\t\t * @param {Array<string>} [datasets]\r\n\t\t * @param {Array<string>} [attributes]\r\n\t\t * @returns {buildProps}\r\n\t\t */\r\n\t\tnormalizeBuildProps: function normalizeBuildProps(props, classes, datasets, attributes) {\r\n\t\t\tprops = props ? props : {};\r\n\t\t\tclasses ? classes.push('classes') : classes = ['classes'];\r\n\t\t\tdatasets ? datasets.push('dataset') : datasets = ['dataset'];\r\n\t\t\tattributes ? attributes.push('attributes') : attributes = ['attributes'];\r\n\t\t\tclasses.forEach(function(c) {\r\n\t\t\t\tprops[c] = props[c] ? (typeof props[c] === 'string') ? props[c].split(' ') : props[c] : [];\r\n\t\t\t\tprops[c].toString = Array.toSpaceSeparatedString;\r\n\t\t\t});\r\n\t\t\tdatasets.forEach(function(d) {\r\n\t\t\t\tprops[d] = props[d] ? props[d] : {};\r\n\t\t\t\tprops[d].toString = (Array.isArray(props[d])) ? Array.toSpaceSeparatedString : Object.toHtmlDataSet;\r\n\t\t\t});\r\n\t\t\tattributes.forEach(function(a) {\r\n\t\t\t\tprops[a] = props[a] ? props[a] : {};\r\n\t\t\t\tprops[a].toString = (Array.isArray(props[a])) ? Array.toSpaceSeparatedString : Object.toHtmlAttributes;\r\n\t\t\t});\r\n\t\t\treturn props;\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {...buildProps} props\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\tbutton: function buildButton(props) {\r\n\t\t\treturn tmpl('button', [].map.call(arguments, function(arg) {\r\n\t\t\t\treturn __APP.BUILD.normalizeBuildProps(arg);\r\n\t\t\t}));\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {...buildProps} props\r\n\t\t * @param {string} props.page\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\tlink: function buildLink(props) {\r\n\t\t\treturn tmpl('link', [].map.call(arguments, function(arg) {\r\n\t\t\t\treturn __APP.BUILD.normalizeBuildProps(arg);\r\n\t\t\t}));\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {string} type - checkbox or radio\r\n\t\t * @param {buildProps} props\r\n\t\t * @param {(Array<string>|string)} [props.unit_classes]\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\tradioOrCheckbox: function buildRadioOrCheckbox(type, props) {\r\n\t\t\tif (type == 'checkbox' || type == 'radio') {\r\n\t\t\t\tprops = __APP.BUILD.normalizeBuildProps(props, ['unit_classes']);\r\n\t\t\t\tif (props.classes.indexOf('form_checkbox') == -1 && props.classes.indexOf('form_radio') == -1) {\r\n\t\t\t\t\tprops.classes.unshift('form_' + type);\r\n\t\t\t\t}\r\n\t\t\t\tprops.unit_classes.unshift('form_unit');\r\n\t\t\t\treturn tmpl('radio-checkbox', $.extend(props, {type: type}));\r\n\t\t\t} else {\r\n\t\t\t\tthrow Error('Принимаемый аргумент type может быть либо \"radio\" либо \"checkbox\", придурок')\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {(OneTag|Array<OneTag>|TagsCollection)} tags\r\n\t\t * @param {buildProps} [props]\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\ttags: function buildTags(tags, props) {\r\n\t\t\tprops = __APP.BUILD.normalizeBuildProps(props);\r\n\t\t\t\r\n\t\t\tfunction normalizeTag(tag) {\r\n\t\t\t\treturn $.extend(true, {}, {\r\n\t\t\t\t\tname: tag.name.toLowerCase(),\r\n\t\t\t\t\tpage: '/search/' + encodeURIComponent('#' + tag.name.toLowerCase())\r\n\t\t\t\t}, props);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (tags instanceof Array) {\r\n\t\t\t\treturn tmpl('tag', tags.map(normalizeTag));\r\n\t\t\t} else {\r\n\t\t\t\treturn tmpl('tag', normalizeTag(tags));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param users\r\n\t\t * @param {buildProps} props\r\n\t\t * @param {(Array<string>|string)} [props.avatar_classes]\r\n\t\t * @param {(Array<string>|string)} [props.tombstone_classes]\r\n\t\t * @param {boolean} [props.is_link]\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\tuserTombstones: function buildUserTombstones(users, props) {\r\n\t\t\tprops = __APP.BUILD.normalizeBuildProps(props, ['avatar_classes', 'tombstone_classes']);\r\n\t\t\tfunction normalize(user) {\r\n\t\t\t\tif (props.is_link) {\r\n\t\t\t\t\tprops.html_tag = 'a';\r\n\t\t\t\t\tprops.tombstone_classes.push('link Link');\r\n\t\t\t\t\tprops.attributes.href = '/friend/' + user.id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprops.html_tag = 'div';\r\n\t\t\t\t}\r\n\t\t\t\t$.extend(true, user, {\r\n\t\t\t\t\tname: [user.first_name, user.last_name].join(' '),\r\n\t\t\t\t\tsize: '70x70'\r\n\t\t\t\t}, props);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (users instanceof Array) {\r\n\t\t\t\tusers.forEach(normalize);\r\n\t\t\t} else {\r\n\t\t\t\tnormalize(users);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn tmpl('user-tombstone', users);\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {(buildProps|Array<buildProps>)} props\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\tavatarBlocks: function buildAvatarBlocks(props) {\r\n\t\t\tif (Array.isArray(props)) {\r\n\t\t\t\tprops.forEach(normalize);\r\n\t\t\t} else {\r\n\t\t\t\tnormalize(props);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction normalize(props_unit) {\r\n\t\t\t\tprops_unit = __APP.BUILD.normalizeBuildProps(props_unit, ['avatar_classes', 'block_classes']);\r\n\t\t\t\tif (props_unit.is_link) {\r\n\t\t\t\t\tprops_unit.html_tag = 'a';\r\n\t\t\t\t\tprops_unit.block_classes.push('link Link');\r\n\t\t\t\t\tprops_unit.attributes.href = '/friend/' + props_unit.id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprops_unit.html_tag = 'div';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn tmpl('avatar-block', props);\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {Array} subscribers\r\n\t\t * @param {number} count\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\tavatars: function buildAvatars(subscribers, count) {\r\n\t\t\tvar $subscribers = $();\r\n\t\t\t$subscribers = $subscribers.add(tmpl('subscriber-avatar', __APP.USER));\r\n\t\t\tsubscribers.forEach(function(subscriber) {\r\n\t\t\t\tif (subscriber.id != __APP.USER.id && $subscribers.length <= count) {\r\n\t\t\t\t\t$subscribers = $subscribers.add(tmpl('subscriber-avatar', subscriber));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn $subscribers;\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {Array} users\r\n\t\t * @param {number} max_count\r\n\t\t * @param {buildProps} props\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\tavatarCollection: function buildAvatarCollection(users, max_count, props) {\r\n\t\t\tvar data = __APP.BUILD.normalizeBuildProps(props);\r\n\t\t\t\r\n\t\t\tdata.avatars = tmpl('subscriber-avatar', __APP.USER);\r\n\t\t\tusers.forEach(function(user) {\r\n\t\t\t\tif (user.id != __APP.USER.id && data.avatars.length <= max_count) {\r\n\t\t\t\t\tdata.avatars = data.avatars.add(tmpl('subscriber-avatar', user));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn tmpl('avatars-collection', data);\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {(OneOrganization|Array<OneOrganization>|OrganizationsCollection)} organizations\r\n\t\t * @param {object} [additional_fields]\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\torganizationItems: function buildOrganizationItems(organizations, additional_fields) {\r\n\t\t\torganizations = organizations instanceof Array ? organizations : [organizations];\r\n\t\t\tvar orgs = organizations.map(function(org) {\r\n\t\t\t\torg.counter_classes = org.new_events_count ? [] : [__C.CLASSES.NEW_HIDDEN];\r\n\t\t\t\treturn org;\r\n\t\t\t});\r\n\t\t\tif (additional_fields) {\r\n\t\t\t\treturn tmpl('organization-item', orgs.map(function(organization) {\r\n\t\t\t\t\treturn $.extend(true, {}, organization, __APP.BUILD.normalizeBuildProps(additional_fields, ['avatar_classes', 'block_classes', 'counter_classes']));\r\n\t\t\t\t}));\r\n\t\t\t} else {\r\n\t\t\t\treturn tmpl('organization-item', orgs);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {(Array<OneOrganization>|OrganizationsCollection)} organizations\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\torganizationCard: function buildOrganisationCard(organizations) {\r\n\t\t\treturn tmpl('organization-card', organizations.map(function(org) {\r\n\t\t\t\treturn $.extend(true, {}, org, {\r\n\t\t\t\t\tsubscribe_button: new SubscribeButton(org.id, org.is_subscribed, {\r\n\t\t\t\t\t\tcolors: {\r\n\t\t\t\t\t\t\tsubscribe: '-color_marginal_accent'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ticons: null,\r\n\t\t\t\t\t\tclasses: ['-size_low', 'RippleEffect']\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tsubscribed_text: org.subscribed_count + getUnitsText(org.subscribed_count, __LOCALES.ru_RU.TEXTS.SUBSCRIBERS),\r\n\t\t\t\t\tredact_org_button: org.role === OneUser.ROLE.USER ? '' : __APP.BUILD.link({\r\n\t\t\t\t\t\tclasses: ['button', '-size_low', '-color_marginal_primary', 'fa_icon', 'fa-pencil', '-empty', 'RippleEffect'],\r\n\t\t\t\t\t\tpage: 'organization/' + org.id + '/edit'\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}))\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {Array<OneEvent>} events\r\n\t\t * @param {OrganizationPage~EventType} type\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\torganizationFeedEvents: function buildOrganizationFeedEvents(events, type) {\r\n\t\t\treturn tmpl('organization-feed-event', events.map(function(event) {\r\n\t\t\t\tvar m_event_date = moment.unix(event[type.sort_date_type]),\r\n\t\t\t\t\t$subscribers = __APP.BUILD.avatars(event.favored, 4),\r\n\t\t\t\t\tfavored_users_count = ($subscribers.length <= 4) ? 0 : event.favored_users_count - 4,\r\n\t\t\t\t\tdifferent_day = type.last_date != m_event_date.format(__C.DATE_FORMAT);\r\n\t\t\t\t\r\n\t\t\t\ttype.last_date = m_event_date.format(__C.DATE_FORMAT);\r\n\t\t\t\treturn $.extend({}, event, {\r\n\t\t\t\t\tdivider: different_day ? tmpl('organization-feed-event-divider', {\r\n\t\t\t\t\t\tformatted_date: m_event_date.calendar().capitalize(),\r\n\t\t\t\t\t\tdate: m_event_date.format(__C.DATE_FORMAT)\r\n\t\t\t\t\t}) : '',\r\n\t\t\t\t\tadd_to_favorite_button: new AddToFavoriteButton(event.id, event.is_favorite, {\r\n\t\t\t\t\t\tclasses: ['-size_low', '-fill', '-rounded', 'AddToFavorites', 'AddAvatar', 'RippleEffect'],\r\n\t\t\t\t\t\tlabels: {\r\n\t\t\t\t\t\t\tsubscribed: 'В избранном'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tsubscribers: $subscribers,\r\n\t\t\t\t\tdate: m_event_date.format(__C.DATE_FORMAT),\r\n\t\t\t\t\tavatars_collection_classes: event.is_favorite ? ($subscribers.length > 4) ? '-subscribed -shift' : '-subscribed' : '',\r\n\t\t\t\t\tfavored_users_count: favored_users_count,\r\n\t\t\t\t\tfavored_users_show: favored_users_count ? '' : '-cast',\r\n\t\t\t\t\ttime: event.dates.reduce(function(times, date) {\r\n\t\t\t\t\t\tif (moment.unix(date.event_date).format(__C.DATE_FORMAT) == m_event_date.format(__C.DATE_FORMAT)) {\r\n\t\t\t\t\t\t\ttimes.push(displayTimeRange(date.start_time, date.end_time));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn times;\r\n\t\t\t\t\t}, []).join('; ')\r\n\t\t\t\t})\r\n\t\t\t}));\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {OneCategory|Array<OneCategory>} categories\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\torganisationsCategoriesItems: function buildOrganisationsCategoriesItems(categories) {\r\n\t\t\tif (!(categories instanceof Array))\r\n\t\t\t\tcategories = [categories];\r\n\t\t\treturn tmpl('organization-category', categories.map(function(cat) {\r\n\t\t\t\tvar is_parent_category = true,\r\n\t\t\t\t\tnew_events_count,\r\n\t\t\t\t\taside_classes = [];\r\n\t\t\t\t\r\n\t\t\t\tif (cat.organizations && cat.organizations.new_events_count) {\r\n\t\t\t\t\tif (is_parent_category) {\r\n\t\t\t\t\t\tnew_events_count = cat.organizations.reduce(function(sum, org) {\r\n\t\t\t\t\t\t\treturn sum + org.new_events_count;\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\taside_classes = new_events_count ? ['counter'] : ['counter', __C.CLASSES.NEW_HIDDEN];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taside_classes = ['fa_icon', 'fa-angle-down', '-empty'];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnew_events_count = '';\r\n\t\t\t\t\taside_classes = [__C.CLASSES.NEW_HIDDEN];\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcategory_id: cat.id,\r\n\t\t\t\t\tcategory_name: cat.name,\r\n\t\t\t\t\torder_position: cat.order_position,\r\n\t\t\t\t\taside_classes: aside_classes,\r\n\t\t\t\t\tnew_events_count: is_parent_category ? '+' + new_events_count : ''\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {Array} subscribers\r\n\t\t * @param {boolean} [last_is_fiend]\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\tsubscribers: function buildSubscribers(subscribers, last_is_fiend) {\r\n\t\t\treturn tmpl('subscriber', subscribers.map(function(subscriber, i) {\r\n\t\t\t\tvar append_divider = (typeof last_is_fiend == 'undefined') || last_is_fiend != subscriber.is_friend;\r\n\t\t\t\t\r\n\t\t\t\tlast_is_fiend = subscriber.is_friend;\r\n\t\t\t\treturn $.extend({\r\n\t\t\t\t\tdivider: append_divider ? tmpl('subscriber-divider', {label: subscriber.is_friend ? 'Друзья' : 'Все подписчики'}) : '',\r\n\t\t\t\t\tavatar_block: __APP.BUILD.avatarBlocks({\r\n\t\t\t\t\t\tavatar_classes: ['-size_40x40', '-rounded', '-bordered'],\r\n\t\t\t\t\t\tname: [subscriber.first_name, subscriber.last_name].join(' '),\r\n\t\t\t\t\t\tavatar_url: subscriber.avatar_url\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tname: [subscriber.first_name, subscriber.last_name].join(' ')\r\n\t\t\t\t}, subscriber);\r\n\t\t\t}));\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {(OneEvent|Array<OneEvent>|EventsCollection)} events\r\n\t\t * @returns {jQuery}\r\n\t\t */\r\n\t\tfeedEventCards: function buildFeedEventCards(events) {\r\n\t\t\tvar $events;\r\n\t\t\tevents = events instanceof Array ? events : [events];\r\n\t\t\t$events = tmpl('feed-event', events.map(function(event) {\r\n\t\t\t\tvar $subscribers = __APP.BUILD.avatars(event.favored, 4),\r\n\t\t\t\t\tavatars_collection_classes = [],\r\n\t\t\t\t\tfavored_users_count = ($subscribers.length <= 4) ? 0 : event.favored_users_count - 4,\r\n\t\t\t\t\tfeed_event_infos = [];\r\n\t\t\t\t\r\n\t\t\t\tif (event.is_favorite) {\r\n\t\t\t\t\tavatars_collection_classes.push('-subscribed');\r\n\t\t\t\t\tif ($subscribers.length > 4) {\r\n\t\t\t\t\t\tavatars_collection_classes.push('-shift');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfeed_event_infos.push({\r\n\t\t\t\t\ttext: displayDateRange(event.dates[0].event_date, event.dates[event.dates.length - 1].event_date)\r\n\t\t\t\t\t+ (event.is_same_time ? ', ' + displayTimeRange(event.dates[0].start_time, event.dates[0].end_time) : '')\r\n\t\t\t\t});\r\n\t\t\t\tif (event.registration_required) {\r\n\t\t\t\t\tfeed_event_infos.push({text: 'Регистрация до ' + moment.unix(event.registration_till).calendar().capitalize()});\r\n\t\t\t\t}\r\n\t\t\t\tif (event.is_free) {\r\n\t\t\t\t\tfeed_event_infos.push({text: 'Бесплатно'});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfeed_event_infos.push({text: 'Цена от ' + (event.min_price ? event.min_price : 0) + ' руб.'});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn $.extend(true, {\r\n\t\t\t\t\tadd_to_favorite_button: new AddToFavoriteButton(event.id, event.is_favorite, {\r\n\t\t\t\t\t\tclasses: ['-size_low', '-fill', '-rounded', 'AddAvatar', 'RippleEffect']\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tsubscribers: $subscribers,\r\n\t\t\t\t\tavatars_collection_classes: avatars_collection_classes.join(' '),\r\n\t\t\t\t\tfavored_users_show: favored_users_count ? '' : '-cast',\r\n\t\t\t\t\tfavored_users_count: favored_users_count,\r\n\t\t\t\t\tfeed_event_infos: tmpl('feed-event-info', feed_event_infos)\r\n\t\t\t\t}, event);\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\tevents.forEach(function(event, i) {\r\n\t\t\t\t$events.eq(i).appear(function() {\r\n\t\t\t\t\tstoreStat(event.id, __C.STATS.EVENT_ENTITY, __C.STATS.EVENT_VIEW);\r\n\t\t\t\t}, {accY: 100})\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn $events;\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * Rendering header tabs\r\n\t * @param {(buildProps|Array<buildProps>)} tabs\r\n\t */\r\n\trenderHeaderTabs: function renderHeaderTabs(tabs) {\r\n\t\tvar $wrapper = $('#main_header_bottom').find('.HeaderTabsWrapper');\r\n\t\ttabs = tabs instanceof Array ? tabs : [tabs];\r\n\t\ttabs.forEach(function(tab) {\r\n\t\t\ttab = __APP.BUILD.normalizeBuildProps(tab);\r\n\t\t\ttab.classes.push('tab', 'Tab');\r\n\t\t\tif (window.location.pathname.contains(tab.page)) {\r\n\t\t\t\ttab.classes.push(__C.CLASSES.NEW_ACTIVE);\r\n\t\t\t}\r\n\t\t});\r\n\t\t$wrapper.html(tmpl('tabs-header', {\r\n\t\t\tcolor: 'default',\r\n\t\t\ttabs: tmpl('link', tabs)\r\n\t\t}));\r\n\t\tbindTabs($wrapper);\r\n\t\tbindPageLinks($wrapper);\r\n\t},\r\n\t/**\r\n\t * Changes title of the page\r\n\t * @param {(string|Array<{page: {string}, title: {string}}>|jQuery)} new_title\r\n\t */\r\n\tchangeTitle: function changeTitle(new_title) {\r\n\t\tvar $new_title = $(),\r\n\t\t\ttitle_str;\r\n\t\tswitch (true) {\r\n\t\t\tcase (typeof new_title == 'string'): {\r\n\t\t\t\ttitle_str = new_title;\r\n\t\t\t\tnew_title = new_title.split(' > ');\r\n\t\t\t}\r\n\t\t\tcase (new_title instanceof Array): {\r\n\t\t\t\tnew_title.forEach(function(title_chunk, i) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\t$new_title = $new_title.add('<span class=\"title_chunk fa_icon fa-angle-right -empty\"></span>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof title_chunk == 'object') {\r\n\t\t\t\t\t\ttitle_chunk.toString = (Array.isArray(title_chunk)) ? Array.toSpaceSeparatedString : Object.toHtmlDataSet;\r\n\t\t\t\t\t\t$new_title = $new_title.add('<a href=\"' + title_chunk.page + '\" class=\"title_chunk link Link\">' + title_chunk.title + '</a>');\r\n\t\t\t\t\t\tnew_title[i] = title_chunk.title;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$new_title = $new_title.add('<span class=\"title_chunk\">' + title_chunk + '</span>');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (!title_str) {\r\n\t\t\t\t\ttitle_str = new_title.join(' > ');\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase (new_title instanceof jQuery): {\r\n\t\t\t\t$new_title = new_title;\r\n\t\t\t\tnew_title.each(function() {\r\n\t\t\t\t\tif (this.text())\r\n\t\t\t\t\t\ttitle_str += this.text() + ' ';\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindPageLinks($('#page_title').html($new_title));\r\n\t\t$('title').text(title_str ? 'Evendate. ' + title_str : 'Evendate');\r\n\t},\r\n\t/**\r\n\t * Pushes state in History.js`s states stack and renders page or replaces last state\r\n\t * @param {string} page_name\r\n\t * @param {boolean} [soft_change=false]\r\n\t * @param {boolean} [reload=false]\r\n\t */\r\n\tchangeState: function changeState(page_name, soft_change, reload) {\r\n\t\tif (page_name) {\r\n\t\t\tpage_name = page_name.indexOf('/') == 0 ? page_name : '/' + page_name;\r\n\t\t\tif (soft_change) {\r\n\t\t\t\tHistory.replaceState({_index: History.getCurrentIndex()}, '', page_name);\r\n\t\t\t} else {\r\n\t\t\t\tHistory.pushState({_index: History.getCurrentIndex()}, '', page_name);\r\n\t\t\t}\r\n\t\t\tif (!soft_change || (soft_change && reload)) {\r\n\t\t\t\t__APP.reInit();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.error('Need to pass page name');\r\n\t\t}\r\n\t},\r\n\tinit: function appInit() {\r\n\t\tvar $sidebar_nav_items = $('.SidebarNavItem');\r\n\t\t__APP.CURRENT_PAGE = Page.routeNewPage(window.location.pathname);\r\n\t\t__APP.CURRENT_PAGE.show();\r\n\t\t$sidebar_nav_items.removeClass(__C.CLASSES.NEW_ACTIVE)\r\n\t\t\t.filter(function() {\r\n\t\t\t\treturn window.location.pathname.indexOf(this.getAttribute('href')) === 0;\r\n\t\t\t}).addClass(__C.CLASSES.NEW_ACTIVE);\r\n\t},\r\n\treInit: function appReInit() {\r\n\t\t$(window).off('scroll');\r\n\t\t\r\n\t\tunbindPageLinks();\r\n\t\t\r\n\t\t__APP.PREVIOUS_PAGE = __APP.CURRENT_PAGE;\r\n\t\t__APP.PREVIOUS_PAGE.destroy();\r\n\t\t__APP.init();\r\n\t\t\r\n\t\tif (!(__APP.CURRENT_PAGE instanceof SearchPage)) {\r\n\t\t\t$('#search_bar_input').val('');\r\n\t\t}\r\n\t}\r\n};\r\n\r\n__C = {\r\n\tCLASSES: {\r\n\t\tACTIVE: 'active',\r\n\t\tNEW_ACTIVE: '-active',\r\n\t\tDISABLED: 'disabled',\r\n\t\tNEW_DISABLED: '-disabled',\r\n\t\tHIDDEN: 'hidden',\r\n\t\tNEW_HIDDEN: '-hidden'\r\n\t},\r\n\tDATE_FORMAT: 'YYYY-MM-DD',\r\n\tCOLORS: {\r\n\t\tPRIMARY: '#2e3b50',\r\n\t\tMUTED: '#3e4d66',\r\n\t\tMUTED_80: '#657184',\r\n\t\tMUTED_50: '#9fa6b3',\r\n\t\tMUTED_30: '#c5c9d1',\r\n\t\tTEXT: '#4a4a4a',\r\n\t\tACCENT: '#f82969',\r\n\t\tACCENT_ALT: '#ff5f9e',\r\n\t\tFRANKLIN: '#28be84',\r\n\t\tFRANKLIN_ALT: '#23d792'\r\n\t},\r\n\tSTATS: {\r\n\t\tEVENT_VIEW: 'view',\r\n\t\tEVENT_VIEW_DETAIL: 'view_detail',\r\n\t\tEVENT_OPEN_SITE: 'open_site',\r\n\t\tEVENT_OPEN_MAP: 'open_map',\r\n\t\tORGANIZATION_OPEN_SITE: 'open_site',\r\n\t\tEVENT_ENTITY: 'event',\r\n\t\tORGANIZATION_ENTITY: 'organization'\r\n\t},\r\n\tACTION_NAMES: {\r\n\t\tfave: ['добавил(а) в избранное'],\r\n\t\tunfave: ['удалил(а) из избранного'],\r\n\t\tsubscribe: ['добавил(а) подписки'],\r\n\t\tunsubscribe: ['удалил(а) подписки']\r\n\t},\r\n\tENTITIES: {\r\n\t\tEVENT: 'event',\r\n\t\tORGANIZATION: 'organization'\r\n\t}\r\n};\r\n\r\n__LOCALES = {\r\n\tru_RU: {\r\n\t\tTEXTS: {\r\n\t\t\tBUTTON: {\r\n\t\t\t\tREMOVE_FAVORITE: 'Удалить из избранного',\r\n\t\t\t\tADD_FAVORITE: 'Добавить в избранное',\r\n\t\t\t\tFAVORED: 'Избранное событие',\r\n\t\t\t\tADD_SUBSCRIPTION: 'Подписаться',\r\n\t\t\t\tREMOVE_SUBSCRIPTION: 'Отписаться',\r\n\t\t\t\tSUBSCRIBED: 'Подписан'\r\n\t\t\t},\r\n\t\t\tSUBSCRIBERS: {\r\n\t\t\t\tNOM: ' подписчик',\r\n\t\t\t\tGEN: ' подписчика',\r\n\t\t\t\tPLU: ' подписчиков'\r\n\t\t\t},\r\n\t\t\tPEOPLE: {\r\n\t\t\t\tNOM: ' человек',\r\n\t\t\t\tGEN: ' человека',\r\n\t\t\t\tPLU: ' человек'\r\n\t\t\t},\r\n\t\t\tFAVORED: {\r\n\t\t\t\tNOM: ' участник',\r\n\t\t\t\tGEN: ' участника',\r\n\t\t\t\tPLU: ' участников'\r\n\t\t\t}\r\n\t\t},\r\n\t\tDATE: {\r\n\t\t\tDATE_FORMAT: 'DD MM YYYY',\r\n\t\t\tMONTH_SHORT_NAMES: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн', 'Июл', 'Авг', 'Сен', 'Окт', 'Ноя', 'Дек'],\r\n\t\t\tMONTH_NAMES: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь']\r\n\t\t}\r\n\t}\r\n};","paceOptions = {\r\n\tajax: false, // disabled\r\n\tdocument: false, // disabled\r\n\teventLag: false, // disabled\r\n\telements: {},\r\n\tsearch_is_active: false,\r\n\tsearch_query: null,\r\n\tsearch_xhr: null\r\n};\r\n__stats = [];\r\naskToSubscribe = null;\r\n\r\n$(document)\r\n\t.ajaxStart(function() {\r\n\t\tPace.restart()\r\n\t})\r\n\t.ajaxError(function(event, jqxhr, settings, thrownError) {\r\n\t\tif (!(thrownError && thrownError == 'abort')) {\r\n\t\t\t__APP.SERVER.ajaxErrorHandler(event, jqxhr, settings, thrownError);\r\n\t\t}\r\n\t})\r\n\t.ready(function() {\r\n\t\tvar OneSignal = window.OneSignal || [];\r\n\t\t\r\n\t\tfunction initSidebar() {\r\n\t\t\tvar $sidebar = $('#main_sidebar'),\r\n\t\t\t\t$sidebar_nav = $sidebar.find('.SidebarNav'),\r\n\t\t\t\t$sidebar_nav_items = $sidebar_nav.find('.SidebarNavItem');\r\n\t\t\t\r\n\t\t\t$sidebar_nav.addClass('-items_' + $sidebar_nav_items.not('.-hidden').length);\r\n\t\t\t__APP.SUBSCRIBED_ORGS.update();\r\n\t\t\t$(window).on('subscribe unsubscribe', function() {\r\n\t\t\t\t__APP.SUBSCRIBED_ORGS.update();\r\n\t\t\t});\r\n\t\t\t((window.innerHeight > 800) ? $('.SidebarOrganizationsScroll') : $('.SidebarScroll')).scrollbar({\r\n\t\t\t\tdisableBodyScroll: true\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction initTopBar() {\r\n\t\t\tvar $main_header = $('#main_header');\r\n\t\t\t\r\n\t\t\t$main_header.find('#search_bar_input').on('keypress', function(e) {\r\n\t\t\t\tif (e.which == 13) {\r\n\t\t\t\t\t__APP.changeState('/search/' + encodeURIComponent(this.value));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$main_header.find('#user_bar').on('click.openUserBar', function() {\r\n\t\t\t\tvar $this = $(this),\r\n\t\t\t\t\t$document = $(document);\r\n\t\t\t\t$this.addClass('-open');\r\n\t\t\t\t$document.on('click.closeUserBar', function(e) {\r\n\t\t\t\t\tif (!$(e.target).parents('#user_bar').length) {\r\n\t\t\t\t\t\t$document.off('click.closeUserBar');\r\n\t\t\t\t\t\t$this.removeClass('-open');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\t$main_header.find('.LogoutButton').on('click', __APP.USER.logout);\r\n\t\t\t$main_header.find('.OpenSettingsButton').on('click', showSettingsModal);\r\n\t\t\tbindRippleEffect($main_header);\r\n\t\t\tbindPageLinks($main_header);\r\n\t\t}\r\n\t\t\r\n\t\tOneSignal.push([\"init\", {\r\n\t\t\tappId: \"7471a586-01f3-4eef-b989-c809700a8658\",\r\n\t\t\tautoRegister: false,\r\n\t\t\tnotifyButton: {\r\n\t\t\t\tenable: false /* Set to false to hide */\r\n\t\t\t}\r\n\t\t}]);\r\n\t\tOneSignal.push(function () {\r\n\t\t\t// If we're on an unsupported browser, do nothing\r\n\t\t\tif (!OneSignal.isPushNotificationsSupported()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tOneSignal.isPushNotificationsEnabled(function (isEnabled) {\r\n\t\t\t\tif (isEnabled) {\r\n\t\t\t\t\t// The user is subscribed to notifications\r\n\t\t\t\t\t// Don't show anything\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindow.askToSubscribe = function subscribe() {\r\n\t\t\t\t\t\tOneSignal.push(function () {\r\n\t\t\t\t\t\t\tOneSignal.on('subscriptionChange', function (isSubscribed) {\r\n\t\t\t\t\t\t\t\tif (isSubscribed) {\r\n\t\t\t\t\t\t\t\t\t// The user is subscribed\r\n\t\t\t\t\t\t\t\t\t//   Either the user subscribed for the first time\r\n\t\t\t\t\t\t\t\t\t//   Or the user was subscribed -> unsubscribed -> subscribed\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tOneSignal.getUserId(function (userId) {\r\n\t\t\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\t\t\turl: 'api/v1/users/me/devices',\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 'PUT',\r\n\t\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t'device_token': userId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t'client_type': 'browser',\r\n\t\t\t\t\t\t\t\t\t\t\t\t'model': navigator.appVersion ? navigator.appVersion : null,\r\n\t\t\t\t\t\t\t\t\t\t\t\t'os_version': navigator.platform ? navigator.platform : null\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\tglobal: false\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tOneSignal.push([\"registerForPushNotifications\"]);\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tif (window['moment'] != undefined) {\r\n\t\t\tmoment.locale(navigator.language);\r\n\t\t\tmoment.tz.setDefault('Europe/Moscow');\r\n\t\t\tmoment.updateLocale('ru', {\r\n\t\t\t\tmonthsShort: __LOCALES.ru_RU.DATE.MONTH_SHORT_NAMES,\r\n\t\t\t\tcalendar: {\r\n\t\t\t\t\tsameDay: '[Сегодня]',\r\n\t\t\t\t\tnextDay: '[Завтра]',\r\n\t\t\t\t\tlastDay: '[Вчера]',\r\n\t\t\t\t\tnextWeek: 'dddd',\r\n\t\t\t\t\tlastWeek: 'D MMMM',\r\n\t\t\t\t\tsameElse: 'D MMMM'\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\tif (window['Highcharts'] != undefined) {\r\n\t\t\tHighcharts.setOptions({\r\n\t\t\t\tlang: {\r\n\t\t\t\t\tshortMonths: __LOCALES.ru_RU.DATE.MONTH_SHORT_NAMES\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Bind only on 'back' action\r\n\t\t */\r\n\t\tHistory.Adapter.bind(window, 'statechange', function() {\r\n\t\t\tif (History.getCurrentIndex() - 1 !== History.getState().data._index) {\r\n\t\t\t\t__APP.reInit();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t__APP.SUBSCRIBED_ORGS = $('.SidebarOrganizationsList');\r\n\t\t__APP.SUBSCRIBED_ORGS.update = function() {\r\n\t\t\t/**\r\n\t\t\t * @this jQuery\r\n\t\t\t */\r\n\t\t\tvar self = this,\r\n\t\t\t\ttiming = 0,\r\n\t\t\t\tcurrent_menu_items = $.map(self.children(), function(el) {\r\n\t\t\t\t\treturn $(el).data('organization_id');\r\n\t\t\t\t}),\r\n\t\t\t\tto_add = __APP.USER.subscriptions.filter(function(item) {\r\n\t\t\t\t\treturn current_menu_items.indexOf(item.id) === -1;\r\n\t\t\t\t}),\r\n\t\t\t\tto_remove = current_menu_items.filter(function(item) {\r\n\t\t\t\t\treturn !(__APP.USER.subscriptions.has(item));\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\tif (to_add.length) {\r\n\t\t\t\t__APP.BUILD.organizationItems(to_add, {\r\n\t\t\t\t\tblock_classes: ['animated'],\r\n\t\t\t\t\tavatar_classes: ['-size_30x30', '-rounded']\r\n\t\t\t\t})\r\n\t\t\t\t\t[(self.length ? 'prependTo' : 'appendTo')](self)\r\n\t\t\t\t\t.each(function(i, org_block) {\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t$(org_block).addClass('-show');\r\n\t\t\t\t\t\t}, timing += 100);\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tbindPageLinks(self);\r\n\t\t\t}\r\n\t\t\tif (to_remove.length) {\r\n\t\t\t\tto_remove.forEach(function(id) {\r\n\t\t\t\t\tvar $organization_item = self.find('.organization_item[data-organization_id=\"' + id + '\"]').removeClass('-show');\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t$organization_item.remove();\r\n\t\t\t\t\t}, 500);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t__APP.USER.fetchUserWithSubscriptions([], undefined, function() {\r\n\t\t\tinitTopBar();\r\n\t\t\tinitSidebar();\r\n\t\t\t__APP.init();\r\n\t\t\tbindPageLinks();\r\n\t\t});\r\n\t\t\r\n\t\tsetInterval(function () {\r\n\t\t\tif (window.__stats.length != 0) {\r\n\t\t\t\tvar batch = window.__stats;\r\n\t\t\t\twindow.__stats = [];\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: '/api/v1/statistics/batch',\r\n\t\t\t\t\tdata: JSON.stringify(batch),\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tcontentType: 'application/json; charset=utf-8',\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\terror: function () {\r\n\t\t\t\t\t\twindow.__stats.concat(batch);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}, 5000);\r\n\t\t\r\n\t});"],"sourceRoot":"/src/js"}